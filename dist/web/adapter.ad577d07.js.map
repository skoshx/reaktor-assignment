{"version":3,"sources":["public/scripts/adapter.js"],"names":["f","exports","module","define","amd","window","global","self","adapter","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","_adapter_factory","adapterFactory","Object","defineProperty","value","_ref","arguments","undefined","options","shimChrome","shimFirefox","shimEdge","shimSafari","logging","utils","log","browserDetails","detectBrowser","commonShim","extractVersion","disableLog","disableWarnings","browser","chromeShim","shimPeerConnection","version","browserShim","shimGetUserMedia","shimMediaStream","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimGetStats","shimSenderReceiverGetStats","fixNegotiationNeeded","shimRTCIceCandidate","shimConnectionState","shimMaxMessageSize","shimSendThrowTypeError","removeAllowExtmapMixed","firefoxShim","shimRemoveStream","shimSenderGetStats","shimReceiverGetStats","shimRTCDataChannel","shimAddTransceiver","shimGetParameters","shimCreateOffer","shimCreateAnswer","edgeShim","shimGetDisplayMedia","shimReplaceTrack","safariShim","shimRTCIceServerUrls","shimCreateOfferLegacy","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","shimAudioContext","_utils","_interopRequireWildcard","obj","__esModule","newObj","key","prototype","hasOwnProperty","default","_typeof","Symbol","iterator","constructor","_getusermedia","enumerable","get","_getdisplaymedia","MediaStream","webkitMediaStream","RTCPeerConnection","wrapPeerConnectionEvent","transceiver","receiver","_ontrack","set","removeEventListener","addEventListener","configurable","origSetRemoteDescription","setRemoteDescription","_this","_ontrackpoly","stream","te","getReceivers","find","track","id","event","Event","streams","dispatchEvent","getTracks","forEach","apply","shimSenderWithDtmf","pc","dtmf","_dtmf","kind","createDTMFSender","_pc","getSenders","_senders","slice","origAddTrack","addTrack","sender","push","origRemoveTrack","removeTrack","idx","indexOf","splice","origAddStream","addStream","_this2","origRemoveStream","removeStream","_this3","s","RTCRtpSender","origGetSenders","_this4","senders","origGetStats","getStats","_this5","_arguments","Array","selector","onSucc","onErr","fixChromeStats_","response","standardReport","reports","result","report","standardStats","timestamp","type","localcandidate","remotecandidate","names","name","stat","makeMapStats","stats","Map","keys","map","Promise","resolve","reject","then","RTCRtpReceiver","_this6","filterStats","origGetReceivers","_this7","receivers","srcElement","MediaStreamTrack","err","DOMException","shimAddTrackRemoveTrackWithNative","origGetLocalStreams","getLocalStreams","_this11","nativeStreams","_reverseStreams","_this12","_streams","alreadyExists","newStream","replaceInternalStreamId","description","sdp","internalId","externalStream","internalStream","replace","RegExp","RTCSessionDescription","_this13","signalingState","oldStream","method","nativeMethod","methodObj","_defineProperty","_this14","args","isLegacyCall","desc","origSetLocalDescription","setLocalDescription","replaceExternalStreamId","origLocalDescription","getOwnPropertyDescriptor","_this15","isLocal","streamid","hasTrack","webkitRTCPeerConnection","addIceCandidateNullSupported","addIceCandidate","RTCIceCandidate","nativeAddIceCandidate","candidate","target","getConfiguration","sdpSemantics","writable","_this8","_shimmedLocalStreams","streamId","_this9","existingSenders","newSenders","filter","newSender","concat","_this10","getSourceId","navigator","mediaDevices","console","error","getDisplayMedia","constraints","sourceId","widthSpecified","video","width","heightSpecified","height","frameRateSpecified","frameRate","mandatory","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","getUserMedia","constraintsToChrome_","optional","cc","ideal","exact","min","max","oldname_","prefix","charAt","toUpperCase","oc","mix","advanced","shimConstraints_","func","JSON","parse","stringify","audio","remap","b","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","devices","dev","d","some","match","label","toLowerCase","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","toString","onSuccess","onError","webkitGetUserMedia","bind","origGetUserMedia","cs","getAudioTracks","getVideoTracks","stop","NativeRTCIceCandidate","substr","nativeCandidate","parsedCandidate","_sdp2","parseCandidate","augmentedCandidate","assign","toJSON","sdpMid","sdpMLineIndex","usernameFragment","_sctp","sctpInDescription","_getConfiguration","sections","splitSections","shift","mediaSection","mLine","parseMLine","protocol","isFirefox","parseInt","getRemoteFirefoxVersion","canSendMMS","remoteIsFirefox","canSendMaxMessageSize","getCanSendMaxMessageSize","remoteMMS","maxMessageSize","matchPrefix","getMaxMessageSize","Number","POSITIVE_INFINITY","Math","sctp","wrapDcSend","dc","origDataChannelSend","send","data","size","byteLength","readyState","TypeError","origCreateDataChannel","createDataChannel","dataChannel","channel","proto","completed","checking","iceConnectionState","_onconnectionstatechange","cb","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","nativeSRD","split","line","trim","join","_sdp","RTCIceGatherer","origMSTEnabled","ev","enabled","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","_rtcpeerconnectionShim2","config","iceServers","_filtericeservers","filterIceServers","replaceTrack","setTrack","_rtcpeerconnectionShim","edgeVersion","hasTurn","server","urls","url","deprecated","isString","validTurn","startsWith","catch","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","nativeGetStats","DataChannel","RTCDataChannel","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","test","rid","parseFloat","scaleResolutionDownBy","RangeError","maxFramerate","params","getParameters","encodings","setParameters","origGetParameters","origCreateOffer","createOffer","_arguments2","all","finally","origCreateAnswer","createAnswer","_arguments3","preferredMediaSource","mediaSource","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","_localStreams","_addTrack","_len","_key","index","tracks","getRemoteStreams","_remoteStreams","_onaddstream","_onaddstreampoly","successCallback","failureCallback","promise","withCallback","_getUserMedia","shimConstraints","errcb","OrigPeerConnection","pcConfig","pcConstraints","newIceServers","generateCertificate","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","direction","setDirection","offerToReceiveVideo","videoTransceiver","AudioContext","webkitAudioContext","compactObject","eventNameToWrap","wrapper","nativeAddEventListener","nativeEventName","wrappedCallback","modifiedEvent","handleEvent","_eventMap","nativeRemoveEventListener","has","unwrappedCb","delete","bool","logDisabled_","deprecationWarnings_","oldMethod","newMethod","warn","mozGetUserMedia","userAgent","isSecureContext","supportsUnifiedPlan","RTCRtpTransceiver","isObject","reduce","accumulator","isObj","isEmptyObject","walkStats","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","trackId","uastring","expr","pos","val","base","resultSet","endsWith","SDPUtils","writeMediaSection","caps","dtlsRole","writeRtpDescription","writeIceParameters","iceGatherer","getLocalParameters","writeDtlsParameters","dtlsTransport","mid","rtpSender","rtpReceiver","_initialTrackId","msid","sendEncodingParameters","ssrc","rtx","localCName","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","codecs","headerExtensions","fecMechanisms","findCodecByPayloadType","pt","payloadType","preferredPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","parameters","apt","rCodec","clockRate","numChannels","rtcpFeedback","fb","j","parameter","lHeaderExtension","rHeaderExtension","uri","isActionAllowedInSignalingState","action","offer","answer","maybeAddCandidate","iceTransport","alreadyAdded","getRemoteCandidates","remoteCandidate","foundation","ip","port","priority","addRemoteCandidate","makeError","NotSupportedError","InvalidAccessError","OperationError","addTrackToStreamAndFireEvent","MediaStreamTrackEvent","fireAddTrack","trackEvent","setTimeout","_dispatchEvent","_eventTarget","document","createDocumentFragment","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","_localDescription","_remoteDescription","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","_iceGatherers","iceCandidatePoolSize","gatherPolicy","_config","transceivers","_sdpSessionId","generateSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","_emitGatheringStateChange","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","clonedStream","clone","clonedTrack","_createIceGatherer","bufferedCandidateEvents","bufferCandidates","end","state","_gather","onlocalcandidate","evt","cand","component","ufrag","serializedCandidate","writeCandidate","getMediaSections","getDescription","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_disposeIceAndDtlsTransports","_transceive","recv","rtcp","cname","compound","rtcpParameters","receive","sessionpart","parseRtpParameters","isIceLite","isRejected","rejected","remoteIceParameters","getIceParameters","remoteDtlsParameters","getDtlsParameters","role","start","_updateSignalingState","receiverList","iceOptions","lines","splitLines","getKind","getDirection","remoteMsid","parseMsid","getMid","generateIdentifier","parseRtpEncodingParameters","parseRtcpParameters","isComplete","cands","setTransport","setRemoteCandidates","getCapabilities","codec","isNewTrack","nativeTrack","sid","item","close","newState","states","new","closed","connected","disconnected","failed","connecting","numAudioTracks","numVideoTracks","writeSessionBoilerplate","remoteCodec","hdrExt","rHdrExt","getLocalCandidates","mediaSectionsInOffer","localTrack","reducedSize","candidateString","senderOrReceiver","promises","allStats","results","ortcObjectName","nativeGetstats","nativeStats","mapStats","fixStatsType","methods","random","blob","parts","part","substring","address","relatedAddress","relatedPort","tcpType","parseIceOptions","parseRtpMap","parsed","channels","writeRtpMap","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","param","parseRtcpFb","writeRtcpFb","parseSsrcMedia","sp","colon","attribute","parseSsrcGroup","semantics","ssrcs","parseFingerprint","algorithm","fingerprints","setupType","fp","parseCryptoLine","tag","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","pwd","password","mline","rtpmapline","fmtps","maxptime","extension","encodingParameters","secondarySsrc","hasRed","hasUlpfec","primarySsrc","flows","encParam","codecPayloadType","fec","mechanism","bandwidth","maxBitrate","remoteSsrc","rsize","mux","spec","planB","msidParts","parseSctpDescription","maxSizeLine","isNaN","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","output","sessId","sessVer","sessUser","sessionId","parseOLine","username","sessionVersion","netType","addressType","isValidSDP"],"mappings":"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","file":"adapter.ad577d07.js","sourceRoot":"../../src","sourcesContent":["(function (f) {\n  if (typeof exports === \"object\" && typeof module !== \"undefined\") {\n    module.exports = f();\n  } else if (typeof define === \"function\" && define.amd) {\n    define([], f);\n  } else {\n    var g;\n    if (typeof window !== \"undefined\") {\n      g = window;\n    } else if (typeof global !== \"undefined\") {\n      g = global;\n    } else if (typeof self !== \"undefined\") {\n      g = self;\n    } else {\n      g = this;\n    }\n    g.adapter = f();\n  }\n})(function () {\n  var define, module, exports;\n  return (function () {\n    function r(e, n, t) {\n      function o(i, f) {\n        if (!n[i]) {\n          if (!e[i]) {\n            var c = \"function\" == typeof require && require;\n            if (!f && c) return c(i, !0);\n            if (u) return u(i, !0);\n            var a = new Error(\"Cannot find module '\" + i + \"'\");\n            throw ((a.code = \"MODULE_NOT_FOUND\"), a);\n          }\n          var p = (n[i] = { exports: {} });\n          e[i][0].call(\n            p.exports,\n            function (r) {\n              var n = e[i][1][r];\n              return o(n || r);\n            },\n            p,\n            p.exports,\n            r,\n            e,\n            n,\n            t\n          );\n        }\n        return n[i].exports;\n      }\n      for (\n        var u = \"function\" == typeof require && require, i = 0;\n        i < t.length;\n        i++\n      )\n        o(t[i]);\n      return o;\n    }\n    return r;\n  })()(\n    {\n      1: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          /* eslint-env node */\n\n          \"use strict\";\n\n          var _adapter_factory = require(\"./adapter_factory.js\");\n\n          var adapter = (0, _adapter_factory.adapterFactory)({\n            window: window,\n          });\n          module.exports = adapter; // this is the difference from adapter_core.\n        },\n        { \"./adapter_factory.js\": 2 },\n      ],\n      2: [\n        function (require, module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true,\n          });\n          exports.adapterFactory = adapterFactory;\n\n          var _utils = require(\"./utils\");\n\n          var utils = _interopRequireWildcard(_utils);\n\n          var _chrome_shim = require(\"./chrome/chrome_shim\");\n\n          var chromeShim = _interopRequireWildcard(_chrome_shim);\n\n          var _edge_shim = require(\"./edge/edge_shim\");\n\n          var edgeShim = _interopRequireWildcard(_edge_shim);\n\n          var _firefox_shim = require(\"./firefox/firefox_shim\");\n\n          var firefoxShim = _interopRequireWildcard(_firefox_shim);\n\n          var _safari_shim = require(\"./safari/safari_shim\");\n\n          var safariShim = _interopRequireWildcard(_safari_shim);\n\n          var _common_shim = require(\"./common_shim\");\n\n          var commonShim = _interopRequireWildcard(_common_shim);\n\n          function _interopRequireWildcard(obj) {\n            if (obj && obj.__esModule) {\n              return obj;\n            } else {\n              var newObj = {};\n              if (obj != null) {\n                for (var key in obj) {\n                  if (Object.prototype.hasOwnProperty.call(obj, key))\n                    newObj[key] = obj[key];\n                }\n              }\n              newObj.default = obj;\n              return newObj;\n            }\n          }\n\n          // Shimming starts here.\n          /*\n           *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          function adapterFactory() {\n            var _ref =\n                arguments.length > 0 && arguments[0] !== undefined\n                  ? arguments[0]\n                  : {},\n              window = _ref.window;\n\n            var options =\n              arguments.length > 1 && arguments[1] !== undefined\n                ? arguments[1]\n                : {\n                    shimChrome: true,\n                    shimFirefox: true,\n                    shimEdge: true,\n                    shimSafari: true,\n                  };\n\n            // Utils.\n            var logging = utils.log;\n            var browserDetails = utils.detectBrowser(window);\n\n            var adapter = {\n              browserDetails: browserDetails,\n              commonShim: commonShim,\n              extractVersion: utils.extractVersion,\n              disableLog: utils.disableLog,\n              disableWarnings: utils.disableWarnings,\n            };\n\n            // Shim browser if found.\n            switch (browserDetails.browser) {\n              case \"chrome\":\n                if (\n                  !chromeShim ||\n                  !chromeShim.shimPeerConnection ||\n                  !options.shimChrome\n                ) {\n                  logging(\n                    \"Chrome shim is not included in this adapter release.\"\n                  );\n                  return adapter;\n                }\n                if (browserDetails.version === null) {\n                  logging(\n                    \"Chrome shim can not determine version, not shimming.\"\n                  );\n                  return adapter;\n                }\n                logging(\"adapter.js shimming chrome.\");\n                // Export to the adapter global object visible in the browser.\n                adapter.browserShim = chromeShim;\n\n                chromeShim.shimGetUserMedia(window);\n                chromeShim.shimMediaStream(window);\n                chromeShim.shimPeerConnection(window);\n                chromeShim.shimOnTrack(window);\n                chromeShim.shimAddTrackRemoveTrack(window);\n                chromeShim.shimGetSendersWithDtmf(window);\n                chromeShim.shimGetStats(window);\n                chromeShim.shimSenderReceiverGetStats(window);\n                chromeShim.fixNegotiationNeeded(window);\n\n                commonShim.shimRTCIceCandidate(window);\n                commonShim.shimConnectionState(window);\n                commonShim.shimMaxMessageSize(window);\n                commonShim.shimSendThrowTypeError(window);\n                commonShim.removeAllowExtmapMixed(window);\n                break;\n              case \"firefox\":\n                if (\n                  !firefoxShim ||\n                  !firefoxShim.shimPeerConnection ||\n                  !options.shimFirefox\n                ) {\n                  logging(\n                    \"Firefox shim is not included in this adapter release.\"\n                  );\n                  return adapter;\n                }\n                logging(\"adapter.js shimming firefox.\");\n                // Export to the adapter global object visible in the browser.\n                adapter.browserShim = firefoxShim;\n\n                firefoxShim.shimGetUserMedia(window);\n                firefoxShim.shimPeerConnection(window);\n                firefoxShim.shimOnTrack(window);\n                firefoxShim.shimRemoveStream(window);\n                firefoxShim.shimSenderGetStats(window);\n                firefoxShim.shimReceiverGetStats(window);\n                firefoxShim.shimRTCDataChannel(window);\n                firefoxShim.shimAddTransceiver(window);\n                firefoxShim.shimGetParameters(window);\n                firefoxShim.shimCreateOffer(window);\n                firefoxShim.shimCreateAnswer(window);\n\n                commonShim.shimRTCIceCandidate(window);\n                commonShim.shimConnectionState(window);\n                commonShim.shimMaxMessageSize(window);\n                commonShim.shimSendThrowTypeError(window);\n                break;\n              case \"edge\":\n                if (\n                  !edgeShim ||\n                  !edgeShim.shimPeerConnection ||\n                  !options.shimEdge\n                ) {\n                  logging(\n                    \"MS edge shim is not included in this adapter release.\"\n                  );\n                  return adapter;\n                }\n                logging(\"adapter.js shimming edge.\");\n                // Export to the adapter global object visible in the browser.\n                adapter.browserShim = edgeShim;\n\n                edgeShim.shimGetUserMedia(window);\n                edgeShim.shimGetDisplayMedia(window);\n                edgeShim.shimPeerConnection(window);\n                edgeShim.shimReplaceTrack(window);\n\n                // the edge shim implements the full RTCIceCandidate object.\n\n                commonShim.shimMaxMessageSize(window);\n                commonShim.shimSendThrowTypeError(window);\n                break;\n              case \"safari\":\n                if (!safariShim || !options.shimSafari) {\n                  logging(\n                    \"Safari shim is not included in this adapter release.\"\n                  );\n                  return adapter;\n                }\n                logging(\"adapter.js shimming safari.\");\n                // Export to the adapter global object visible in the browser.\n                adapter.browserShim = safariShim;\n\n                safariShim.shimRTCIceServerUrls(window);\n                safariShim.shimCreateOfferLegacy(window);\n                safariShim.shimCallbacksAPI(window);\n                safariShim.shimLocalStreamsAPI(window);\n                safariShim.shimRemoteStreamsAPI(window);\n                safariShim.shimTrackEventTransceiver(window);\n                safariShim.shimGetUserMedia(window);\n                safariShim.shimAudioContext(window);\n\n                commonShim.shimRTCIceCandidate(window);\n                commonShim.shimMaxMessageSize(window);\n                commonShim.shimSendThrowTypeError(window);\n                commonShim.removeAllowExtmapMixed(window);\n                break;\n              default:\n                logging(\"Unsupported browser!\");\n                break;\n            }\n\n            return adapter;\n          }\n\n          // Browser shims.\n        },\n        {\n          \"./chrome/chrome_shim\": 3,\n          \"./common_shim\": 6,\n          \"./edge/edge_shim\": 7,\n          \"./firefox/firefox_shim\": 11,\n          \"./safari/safari_shim\": 14,\n          \"./utils\": 15,\n        },\n      ],\n      3: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          /* eslint-env node */\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true,\n          });\n          exports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\n          var _typeof =\n            typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n              ? function (obj) {\n                  return typeof obj;\n                }\n              : function (obj) {\n                  return obj &&\n                    typeof Symbol === \"function\" &&\n                    obj.constructor === Symbol &&\n                    obj !== Symbol.prototype\n                    ? \"symbol\"\n                    : typeof obj;\n                };\n\n          var _getusermedia = require(\"./getusermedia\");\n\n          Object.defineProperty(exports, \"shimGetUserMedia\", {\n            enumerable: true,\n            get: function get() {\n              return _getusermedia.shimGetUserMedia;\n            },\n          });\n\n          var _getdisplaymedia = require(\"./getdisplaymedia\");\n\n          Object.defineProperty(exports, \"shimGetDisplayMedia\", {\n            enumerable: true,\n            get: function get() {\n              return _getdisplaymedia.shimGetDisplayMedia;\n            },\n          });\n          exports.shimMediaStream = shimMediaStream;\n          exports.shimOnTrack = shimOnTrack;\n          exports.shimGetSendersWithDtmf = shimGetSendersWithDtmf;\n          exports.shimGetStats = shimGetStats;\n          exports.shimSenderReceiverGetStats = shimSenderReceiverGetStats;\n          exports.shimAddTrackRemoveTrackWithNative = shimAddTrackRemoveTrackWithNative;\n          exports.shimAddTrackRemoveTrack = shimAddTrackRemoveTrack;\n          exports.shimPeerConnection = shimPeerConnection;\n          exports.fixNegotiationNeeded = fixNegotiationNeeded;\n\n          var _utils = require(\"../utils.js\");\n\n          var utils = _interopRequireWildcard(_utils);\n\n          function _interopRequireWildcard(obj) {\n            if (obj && obj.__esModule) {\n              return obj;\n            } else {\n              var newObj = {};\n              if (obj != null) {\n                for (var key in obj) {\n                  if (Object.prototype.hasOwnProperty.call(obj, key))\n                    newObj[key] = obj[key];\n                }\n              }\n              newObj.default = obj;\n              return newObj;\n            }\n          }\n\n          function _defineProperty(obj, key, value) {\n            if (key in obj) {\n              Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true,\n              });\n            } else {\n              obj[key] = value;\n            }\n            return obj;\n          }\n\n          function shimMediaStream(window) {\n            window.MediaStream = window.MediaStream || window.webkitMediaStream;\n          }\n\n          function shimOnTrack(window) {\n            if (\n              (typeof window === \"undefined\"\n                ? \"undefined\"\n                : _typeof(window)) === \"object\" &&\n              window.RTCPeerConnection &&\n              !(\"ontrack\" in window.RTCPeerConnection.prototype)\n            ) {\n              Object.defineProperty(\n                window.RTCPeerConnection.prototype,\n                \"ontrack\",\n                {\n                  get: function get() {\n                    return this._ontrack;\n                  },\n                  set: function set(f) {\n                    if (this._ontrack) {\n                      this.removeEventListener(\"track\", this._ontrack);\n                    }\n                    this.addEventListener(\"track\", (this._ontrack = f));\n                  },\n\n                  enumerable: true,\n                  configurable: true,\n                }\n              );\n              var origSetRemoteDescription =\n                window.RTCPeerConnection.prototype.setRemoteDescription;\n              window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n                var _this = this;\n\n                if (!this._ontrackpoly) {\n                  this._ontrackpoly = function (e) {\n                    // onaddstream does not fire when a track is added to an existing\n                    // stream. But stream.onaddtrack is implemented so we use that.\n                    e.stream.addEventListener(\"addtrack\", function (te) {\n                      var receiver = void 0;\n                      if (window.RTCPeerConnection.prototype.getReceivers) {\n                        receiver = _this.getReceivers().find(function (r) {\n                          return r.track && r.track.id === te.track.id;\n                        });\n                      } else {\n                        receiver = { track: te.track };\n                      }\n\n                      var event = new Event(\"track\");\n                      event.track = te.track;\n                      event.receiver = receiver;\n                      event.transceiver = { receiver: receiver };\n                      event.streams = [e.stream];\n                      _this.dispatchEvent(event);\n                    });\n                    e.stream.getTracks().forEach(function (track) {\n                      var receiver = void 0;\n                      if (window.RTCPeerConnection.prototype.getReceivers) {\n                        receiver = _this.getReceivers().find(function (r) {\n                          return r.track && r.track.id === track.id;\n                        });\n                      } else {\n                        receiver = { track: track };\n                      }\n                      var event = new Event(\"track\");\n                      event.track = track;\n                      event.receiver = receiver;\n                      event.transceiver = { receiver: receiver };\n                      event.streams = [e.stream];\n                      _this.dispatchEvent(event);\n                    });\n                  };\n                  this.addEventListener(\"addstream\", this._ontrackpoly);\n                }\n                return origSetRemoteDescription.apply(this, arguments);\n              };\n            } else {\n              // even if RTCRtpTransceiver is in window, it is only used and\n              // emitted in unified-plan. Unfortunately this means we need\n              // to unconditionally wrap the event.\n              utils.wrapPeerConnectionEvent(window, \"track\", function (e) {\n                if (!e.transceiver) {\n                  Object.defineProperty(e, \"transceiver\", {\n                    value: { receiver: e.receiver },\n                  });\n                }\n                return e;\n              });\n            }\n          }\n\n          function shimGetSendersWithDtmf(window) {\n            // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n            if (\n              (typeof window === \"undefined\"\n                ? \"undefined\"\n                : _typeof(window)) === \"object\" &&\n              window.RTCPeerConnection &&\n              !(\"getSenders\" in window.RTCPeerConnection.prototype) &&\n              \"createDTMFSender\" in window.RTCPeerConnection.prototype\n            ) {\n              var shimSenderWithDtmf = function shimSenderWithDtmf(pc, track) {\n                return {\n                  track: track,\n                  get dtmf() {\n                    if (this._dtmf === undefined) {\n                      if (track.kind === \"audio\") {\n                        this._dtmf = pc.createDTMFSender(track);\n                      } else {\n                        this._dtmf = null;\n                      }\n                    }\n                    return this._dtmf;\n                  },\n                  _pc: pc,\n                };\n              };\n\n              // augment addTrack when getSenders is not available.\n              if (!window.RTCPeerConnection.prototype.getSenders) {\n                window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n                  this._senders = this._senders || [];\n                  return this._senders.slice(); // return a copy of the internal state.\n                };\n                var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n                window.RTCPeerConnection.prototype.addTrack = function addTrack(\n                  track,\n                  stream\n                ) {\n                  var sender = origAddTrack.apply(this, arguments);\n                  if (!sender) {\n                    sender = shimSenderWithDtmf(this, track);\n                    this._senders.push(sender);\n                  }\n                  return sender;\n                };\n\n                var origRemoveTrack =\n                  window.RTCPeerConnection.prototype.removeTrack;\n                window.RTCPeerConnection.prototype.removeTrack = function removeTrack(\n                  sender\n                ) {\n                  origRemoveTrack.apply(this, arguments);\n                  var idx = this._senders.indexOf(sender);\n                  if (idx !== -1) {\n                    this._senders.splice(idx, 1);\n                  }\n                };\n              }\n              var origAddStream = window.RTCPeerConnection.prototype.addStream;\n              window.RTCPeerConnection.prototype.addStream = function addStream(\n                stream\n              ) {\n                var _this2 = this;\n\n                this._senders = this._senders || [];\n                origAddStream.apply(this, [stream]);\n                stream.getTracks().forEach(function (track) {\n                  _this2._senders.push(shimSenderWithDtmf(_this2, track));\n                });\n              };\n\n              var origRemoveStream =\n                window.RTCPeerConnection.prototype.removeStream;\n              window.RTCPeerConnection.prototype.removeStream = function removeStream(\n                stream\n              ) {\n                var _this3 = this;\n\n                this._senders = this._senders || [];\n                origRemoveStream.apply(this, [stream]);\n\n                stream.getTracks().forEach(function (track) {\n                  var sender = _this3._senders.find(function (s) {\n                    return s.track === track;\n                  });\n                  if (sender) {\n                    // remove sender\n                    _this3._senders.splice(_this3._senders.indexOf(sender), 1);\n                  }\n                });\n              };\n            } else if (\n              (typeof window === \"undefined\"\n                ? \"undefined\"\n                : _typeof(window)) === \"object\" &&\n              window.RTCPeerConnection &&\n              \"getSenders\" in window.RTCPeerConnection.prototype &&\n              \"createDTMFSender\" in window.RTCPeerConnection.prototype &&\n              window.RTCRtpSender &&\n              !(\"dtmf\" in window.RTCRtpSender.prototype)\n            ) {\n              var origGetSenders =\n                window.RTCPeerConnection.prototype.getSenders;\n              window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n                var _this4 = this;\n\n                var senders = origGetSenders.apply(this, []);\n                senders.forEach(function (sender) {\n                  return (sender._pc = _this4);\n                });\n                return senders;\n              };\n\n              Object.defineProperty(window.RTCRtpSender.prototype, \"dtmf\", {\n                get: function get() {\n                  if (this._dtmf === undefined) {\n                    if (this.track.kind === \"audio\") {\n                      this._dtmf = this._pc.createDTMFSender(this.track);\n                    } else {\n                      this._dtmf = null;\n                    }\n                  }\n                  return this._dtmf;\n                },\n              });\n            }\n          }\n\n          function shimGetStats(window) {\n            if (!window.RTCPeerConnection) {\n              return;\n            }\n\n            var origGetStats = window.RTCPeerConnection.prototype.getStats;\n            window.RTCPeerConnection.prototype.getStats = function getStats() {\n              var _this5 = this;\n\n              var _arguments = Array.prototype.slice.call(arguments),\n                selector = _arguments[0],\n                onSucc = _arguments[1],\n                onErr = _arguments[2];\n\n              // If selector is a function then we are in the old style stats so just\n              // pass back the original getStats format to avoid breaking old users.\n\n              if (arguments.length > 0 && typeof selector === \"function\") {\n                return origGetStats.apply(this, arguments);\n              }\n\n              // When spec-style getStats is supported, return those when called with\n              // either no arguments or the selector argument is null.\n              if (\n                origGetStats.length === 0 &&\n                (arguments.length === 0 || typeof selector !== \"function\")\n              ) {\n                return origGetStats.apply(this, []);\n              }\n\n              var fixChromeStats_ = function fixChromeStats_(response) {\n                var standardReport = {};\n                var reports = response.result();\n                reports.forEach(function (report) {\n                  var standardStats = {\n                    id: report.id,\n                    timestamp: report.timestamp,\n                    type:\n                      {\n                        localcandidate: \"local-candidate\",\n                        remotecandidate: \"remote-candidate\",\n                      }[report.type] || report.type,\n                  };\n                  report.names().forEach(function (name) {\n                    standardStats[name] = report.stat(name);\n                  });\n                  standardReport[standardStats.id] = standardStats;\n                });\n\n                return standardReport;\n              };\n\n              // shim getStats with maplike support\n              var makeMapStats = function makeMapStats(stats) {\n                return new Map(\n                  Object.keys(stats).map(function (key) {\n                    return [key, stats[key]];\n                  })\n                );\n              };\n\n              if (arguments.length >= 2) {\n                var successCallbackWrapper_ = function successCallbackWrapper_(\n                  response\n                ) {\n                  onSucc(makeMapStats(fixChromeStats_(response)));\n                };\n\n                return origGetStats.apply(this, [\n                  successCallbackWrapper_,\n                  selector,\n                ]);\n              }\n\n              // promise-support\n              return new Promise(function (resolve, reject) {\n                origGetStats.apply(_this5, [\n                  function (response) {\n                    resolve(makeMapStats(fixChromeStats_(response)));\n                  },\n                  reject,\n                ]);\n              }).then(onSucc, onErr);\n            };\n          }\n\n          function shimSenderReceiverGetStats(window) {\n            if (\n              !(\n                (typeof window === \"undefined\"\n                  ? \"undefined\"\n                  : _typeof(window)) === \"object\" &&\n                window.RTCPeerConnection &&\n                window.RTCRtpSender &&\n                window.RTCRtpReceiver\n              )\n            ) {\n              return;\n            }\n\n            // shim sender stats.\n            if (!(\"getStats\" in window.RTCRtpSender.prototype)) {\n              var origGetSenders =\n                window.RTCPeerConnection.prototype.getSenders;\n              if (origGetSenders) {\n                window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n                  var _this6 = this;\n\n                  var senders = origGetSenders.apply(this, []);\n                  senders.forEach(function (sender) {\n                    return (sender._pc = _this6);\n                  });\n                  return senders;\n                };\n              }\n\n              var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n              if (origAddTrack) {\n                window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n                  var sender = origAddTrack.apply(this, arguments);\n                  sender._pc = this;\n                  return sender;\n                };\n              }\n              window.RTCRtpSender.prototype.getStats = function getStats() {\n                var sender = this;\n                return this._pc.getStats().then(function (result) {\n                  return (\n                    /* Note: this will include stats of all senders that\n                     *   send a track with the same id as sender.track as\n                     *   it is not possible to identify the RTCRtpSender.\n                     */\n                    utils.filterStats(result, sender.track, true)\n                  );\n                });\n              };\n            }\n\n            // shim receiver stats.\n            if (!(\"getStats\" in window.RTCRtpReceiver.prototype)) {\n              var origGetReceivers =\n                window.RTCPeerConnection.prototype.getReceivers;\n              if (origGetReceivers) {\n                window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n                  var _this7 = this;\n\n                  var receivers = origGetReceivers.apply(this, []);\n                  receivers.forEach(function (receiver) {\n                    return (receiver._pc = _this7);\n                  });\n                  return receivers;\n                };\n              }\n              utils.wrapPeerConnectionEvent(window, \"track\", function (e) {\n                e.receiver._pc = e.srcElement;\n                return e;\n              });\n              window.RTCRtpReceiver.prototype.getStats = function getStats() {\n                var receiver = this;\n                return this._pc.getStats().then(function (result) {\n                  return utils.filterStats(result, receiver.track, false);\n                });\n              };\n            }\n\n            if (\n              !(\n                \"getStats\" in window.RTCRtpSender.prototype &&\n                \"getStats\" in window.RTCRtpReceiver.prototype\n              )\n            ) {\n              return;\n            }\n\n            // shim RTCPeerConnection.getStats(track).\n            var origGetStats = window.RTCPeerConnection.prototype.getStats;\n            window.RTCPeerConnection.prototype.getStats = function getStats() {\n              if (\n                arguments.length > 0 &&\n                arguments[0] instanceof window.MediaStreamTrack\n              ) {\n                var track = arguments[0];\n                var sender = void 0;\n                var receiver = void 0;\n                var err = void 0;\n                this.getSenders().forEach(function (s) {\n                  if (s.track === track) {\n                    if (sender) {\n                      err = true;\n                    } else {\n                      sender = s;\n                    }\n                  }\n                });\n                this.getReceivers().forEach(function (r) {\n                  if (r.track === track) {\n                    if (receiver) {\n                      err = true;\n                    } else {\n                      receiver = r;\n                    }\n                  }\n                  return r.track === track;\n                });\n                if (err || (sender && receiver)) {\n                  return Promise.reject(\n                    new DOMException(\n                      \"There are more than one sender or receiver for the track.\",\n                      \"InvalidAccessError\"\n                    )\n                  );\n                } else if (sender) {\n                  return sender.getStats();\n                } else if (receiver) {\n                  return receiver.getStats();\n                }\n                return Promise.reject(\n                  new DOMException(\n                    \"There is no sender or receiver for the track.\",\n                    \"InvalidAccessError\"\n                  )\n                );\n              }\n              return origGetStats.apply(this, arguments);\n            };\n          }\n\n          function shimAddTrackRemoveTrackWithNative(window) {\n            // shim addTrack/removeTrack with native variants in order to make\n            // the interactions with legacy getLocalStreams behave as in other browsers.\n            // Keeps a mapping stream.id => [stream, rtpsenders...]\n            window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n              var _this8 = this;\n\n              this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n              return Object.keys(this._shimmedLocalStreams).map(function (\n                streamId\n              ) {\n                return _this8._shimmedLocalStreams[streamId][0];\n              });\n            };\n\n            var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n            window.RTCPeerConnection.prototype.addTrack = function addTrack(\n              track,\n              stream\n            ) {\n              if (!stream) {\n                return origAddTrack.apply(this, arguments);\n              }\n              this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n              var sender = origAddTrack.apply(this, arguments);\n              if (!this._shimmedLocalStreams[stream.id]) {\n                this._shimmedLocalStreams[stream.id] = [stream, sender];\n              } else if (\n                this._shimmedLocalStreams[stream.id].indexOf(sender) === -1\n              ) {\n                this._shimmedLocalStreams[stream.id].push(sender);\n              }\n              return sender;\n            };\n\n            var origAddStream = window.RTCPeerConnection.prototype.addStream;\n            window.RTCPeerConnection.prototype.addStream = function addStream(\n              stream\n            ) {\n              var _this9 = this;\n\n              this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n              stream.getTracks().forEach(function (track) {\n                var alreadyExists = _this9.getSenders().find(function (s) {\n                  return s.track === track;\n                });\n                if (alreadyExists) {\n                  throw new DOMException(\n                    \"Track already exists.\",\n                    \"InvalidAccessError\"\n                  );\n                }\n              });\n              var existingSenders = this.getSenders();\n              origAddStream.apply(this, arguments);\n              var newSenders = this.getSenders().filter(function (newSender) {\n                return existingSenders.indexOf(newSender) === -1;\n              });\n              this._shimmedLocalStreams[stream.id] = [stream].concat(\n                newSenders\n              );\n            };\n\n            var origRemoveStream =\n              window.RTCPeerConnection.prototype.removeStream;\n            window.RTCPeerConnection.prototype.removeStream = function removeStream(\n              stream\n            ) {\n              this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n              delete this._shimmedLocalStreams[stream.id];\n              return origRemoveStream.apply(this, arguments);\n            };\n\n            var origRemoveTrack =\n              window.RTCPeerConnection.prototype.removeTrack;\n            window.RTCPeerConnection.prototype.removeTrack = function removeTrack(\n              sender\n            ) {\n              var _this10 = this;\n\n              this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n              if (sender) {\n                Object.keys(this._shimmedLocalStreams).forEach(function (\n                  streamId\n                ) {\n                  var idx = _this10._shimmedLocalStreams[streamId].indexOf(\n                    sender\n                  );\n                  if (idx !== -1) {\n                    _this10._shimmedLocalStreams[streamId].splice(idx, 1);\n                  }\n                  if (_this10._shimmedLocalStreams[streamId].length === 1) {\n                    delete _this10._shimmedLocalStreams[streamId];\n                  }\n                });\n              }\n              return origRemoveTrack.apply(this, arguments);\n            };\n          }\n\n          function shimAddTrackRemoveTrack(window) {\n            if (!window.RTCPeerConnection) {\n              return;\n            }\n            var browserDetails = utils.detectBrowser(window);\n            // shim addTrack and removeTrack.\n            if (\n              window.RTCPeerConnection.prototype.addTrack &&\n              browserDetails.version >= 65\n            ) {\n              return shimAddTrackRemoveTrackWithNative(window);\n            }\n\n            // also shim pc.getLocalStreams when addTrack is shimmed\n            // to return the original streams.\n            var origGetLocalStreams =\n              window.RTCPeerConnection.prototype.getLocalStreams;\n            window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n              var _this11 = this;\n\n              var nativeStreams = origGetLocalStreams.apply(this);\n              this._reverseStreams = this._reverseStreams || {};\n              return nativeStreams.map(function (stream) {\n                return _this11._reverseStreams[stream.id];\n              });\n            };\n\n            var origAddStream = window.RTCPeerConnection.prototype.addStream;\n            window.RTCPeerConnection.prototype.addStream = function addStream(\n              stream\n            ) {\n              var _this12 = this;\n\n              this._streams = this._streams || {};\n              this._reverseStreams = this._reverseStreams || {};\n\n              stream.getTracks().forEach(function (track) {\n                var alreadyExists = _this12.getSenders().find(function (s) {\n                  return s.track === track;\n                });\n                if (alreadyExists) {\n                  throw new DOMException(\n                    \"Track already exists.\",\n                    \"InvalidAccessError\"\n                  );\n                }\n              });\n              // Add identity mapping for consistency with addTrack.\n              // Unless this is being used with a stream from addTrack.\n              if (!this._reverseStreams[stream.id]) {\n                var newStream = new window.MediaStream(stream.getTracks());\n                this._streams[stream.id] = newStream;\n                this._reverseStreams[newStream.id] = stream;\n                stream = newStream;\n              }\n              origAddStream.apply(this, [stream]);\n            };\n\n            var origRemoveStream =\n              window.RTCPeerConnection.prototype.removeStream;\n            window.RTCPeerConnection.prototype.removeStream = function removeStream(\n              stream\n            ) {\n              this._streams = this._streams || {};\n              this._reverseStreams = this._reverseStreams || {};\n\n              origRemoveStream.apply(this, [\n                this._streams[stream.id] || stream,\n              ]);\n              delete this._reverseStreams[\n                this._streams[stream.id]\n                  ? this._streams[stream.id].id\n                  : stream.id\n              ];\n              delete this._streams[stream.id];\n            };\n\n            window.RTCPeerConnection.prototype.addTrack = function addTrack(\n              track,\n              stream\n            ) {\n              var _this13 = this;\n\n              if (this.signalingState === \"closed\") {\n                throw new DOMException(\n                  \"The RTCPeerConnection's signalingState is 'closed'.\",\n                  \"InvalidStateError\"\n                );\n              }\n              var streams = [].slice.call(arguments, 1);\n              if (\n                streams.length !== 1 ||\n                !streams[0].getTracks().find(function (t) {\n                  return t === track;\n                })\n              ) {\n                // this is not fully correct but all we can manage without\n                // [[associated MediaStreams]] internal slot.\n                throw new DOMException(\n                  \"The adapter.js addTrack polyfill only supports a single \" +\n                    \" stream which is associated with the specified track.\",\n                  \"NotSupportedError\"\n                );\n              }\n\n              var alreadyExists = this.getSenders().find(function (s) {\n                return s.track === track;\n              });\n              if (alreadyExists) {\n                throw new DOMException(\n                  \"Track already exists.\",\n                  \"InvalidAccessError\"\n                );\n              }\n\n              this._streams = this._streams || {};\n              this._reverseStreams = this._reverseStreams || {};\n              var oldStream = this._streams[stream.id];\n              if (oldStream) {\n                // this is using odd Chrome behaviour, use with caution:\n                // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n                // Note: we rely on the high-level addTrack/dtmf shim to\n                // create the sender with a dtmf sender.\n                oldStream.addTrack(track);\n\n                // Trigger ONN async.\n                Promise.resolve().then(function () {\n                  _this13.dispatchEvent(new Event(\"negotiationneeded\"));\n                });\n              } else {\n                var newStream = new window.MediaStream([track]);\n                this._streams[stream.id] = newStream;\n                this._reverseStreams[newStream.id] = stream;\n                this.addStream(newStream);\n              }\n              return this.getSenders().find(function (s) {\n                return s.track === track;\n              });\n            };\n\n            // replace the internal stream id with the external one and\n            // vice versa.\n            function replaceInternalStreamId(pc, description) {\n              var sdp = description.sdp;\n              Object.keys(pc._reverseStreams || []).forEach(function (\n                internalId\n              ) {\n                var externalStream = pc._reverseStreams[internalId];\n                var internalStream = pc._streams[externalStream.id];\n                sdp = sdp.replace(\n                  new RegExp(internalStream.id, \"g\"),\n                  externalStream.id\n                );\n              });\n              return new RTCSessionDescription({\n                type: description.type,\n                sdp: sdp,\n              });\n            }\n            function replaceExternalStreamId(pc, description) {\n              var sdp = description.sdp;\n              Object.keys(pc._reverseStreams || []).forEach(function (\n                internalId\n              ) {\n                var externalStream = pc._reverseStreams[internalId];\n                var internalStream = pc._streams[externalStream.id];\n                sdp = sdp.replace(\n                  new RegExp(externalStream.id, \"g\"),\n                  internalStream.id\n                );\n              });\n              return new RTCSessionDescription({\n                type: description.type,\n                sdp: sdp,\n              });\n            }\n            [\"createOffer\", \"createAnswer\"].forEach(function (method) {\n              var nativeMethod = window.RTCPeerConnection.prototype[method];\n              var methodObj = _defineProperty({}, method, function () {\n                var _this14 = this;\n\n                var args = arguments;\n                var isLegacyCall =\n                  arguments.length && typeof arguments[0] === \"function\";\n                if (isLegacyCall) {\n                  return nativeMethod.apply(this, [\n                    function (description) {\n                      var desc = replaceInternalStreamId(_this14, description);\n                      args[0].apply(null, [desc]);\n                    },\n                    function (err) {\n                      if (args[1]) {\n                        args[1].apply(null, err);\n                      }\n                    },\n                    arguments[2],\n                  ]);\n                }\n                return nativeMethod\n                  .apply(this, arguments)\n                  .then(function (description) {\n                    return replaceInternalStreamId(_this14, description);\n                  });\n              });\n              window.RTCPeerConnection.prototype[method] = methodObj[method];\n            });\n\n            var origSetLocalDescription =\n              window.RTCPeerConnection.prototype.setLocalDescription;\n            window.RTCPeerConnection.prototype.setLocalDescription = function setLocalDescription() {\n              if (!arguments.length || !arguments[0].type) {\n                return origSetLocalDescription.apply(this, arguments);\n              }\n              arguments[0] = replaceExternalStreamId(this, arguments[0]);\n              return origSetLocalDescription.apply(this, arguments);\n            };\n\n            // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n            var origLocalDescription = Object.getOwnPropertyDescriptor(\n              window.RTCPeerConnection.prototype,\n              \"localDescription\"\n            );\n            Object.defineProperty(\n              window.RTCPeerConnection.prototype,\n              \"localDescription\",\n              {\n                get: function get() {\n                  var description = origLocalDescription.get.apply(this);\n                  if (description.type === \"\") {\n                    return description;\n                  }\n                  return replaceInternalStreamId(this, description);\n                },\n              }\n            );\n\n            window.RTCPeerConnection.prototype.removeTrack = function removeTrack(\n              sender\n            ) {\n              var _this15 = this;\n\n              if (this.signalingState === \"closed\") {\n                throw new DOMException(\n                  \"The RTCPeerConnection's signalingState is 'closed'.\",\n                  \"InvalidStateError\"\n                );\n              }\n              // We can not yet check for sender instanceof RTCRtpSender\n              // since we shim RTPSender. So we check if sender._pc is set.\n              if (!sender._pc) {\n                throw new DOMException(\n                  \"Argument 1 of RTCPeerConnection.removeTrack \" +\n                    \"does not implement interface RTCRtpSender.\",\n                  \"TypeError\"\n                );\n              }\n              var isLocal = sender._pc === this;\n              if (!isLocal) {\n                throw new DOMException(\n                  \"Sender was not created by this connection.\",\n                  \"InvalidAccessError\"\n                );\n              }\n\n              // Search for the native stream the senders track belongs to.\n              this._streams = this._streams || {};\n              var stream = void 0;\n              Object.keys(this._streams).forEach(function (streamid) {\n                var hasTrack = _this15._streams[streamid]\n                  .getTracks()\n                  .find(function (track) {\n                    return sender.track === track;\n                  });\n                if (hasTrack) {\n                  stream = _this15._streams[streamid];\n                }\n              });\n\n              if (stream) {\n                if (stream.getTracks().length === 1) {\n                  // if this is the last track of the stream, remove the stream. This\n                  // takes care of any shimmed _senders.\n                  this.removeStream(this._reverseStreams[stream.id]);\n                } else {\n                  // relying on the same odd chrome behaviour as above.\n                  stream.removeTrack(sender.track);\n                }\n                this.dispatchEvent(new Event(\"negotiationneeded\"));\n              }\n            };\n          }\n\n          function shimPeerConnection(window) {\n            var browserDetails = utils.detectBrowser(window);\n\n            if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n              // very basic support for old versions.\n              window.RTCPeerConnection = window.webkitRTCPeerConnection;\n            }\n            if (!window.RTCPeerConnection) {\n              return;\n            }\n\n            var addIceCandidateNullSupported =\n              window.RTCPeerConnection.prototype.addIceCandidate.length === 0;\n\n            // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n            if (browserDetails.version < 53) {\n              [\n                \"setLocalDescription\",\n                \"setRemoteDescription\",\n                \"addIceCandidate\",\n              ].forEach(function (method) {\n                var nativeMethod = window.RTCPeerConnection.prototype[method];\n                var methodObj = _defineProperty({}, method, function () {\n                  arguments[0] = new (method === \"addIceCandidate\"\n                    ? window.RTCIceCandidate\n                    : window.RTCSessionDescription)(arguments[0]);\n                  return nativeMethod.apply(this, arguments);\n                });\n                window.RTCPeerConnection.prototype[method] = methodObj[method];\n              });\n            }\n\n            // support for addIceCandidate(null or undefined)\n            var nativeAddIceCandidate =\n              window.RTCPeerConnection.prototype.addIceCandidate;\n            window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n              if (!addIceCandidateNullSupported && !arguments[0]) {\n                if (arguments[1]) {\n                  arguments[1].apply(null);\n                }\n                return Promise.resolve();\n              }\n              // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n              // in older versions. Native support planned for Chrome M77.\n              if (\n                browserDetails.version < 78 &&\n                arguments[0] &&\n                arguments[0].candidate === \"\"\n              ) {\n                return Promise.resolve();\n              }\n              return nativeAddIceCandidate.apply(this, arguments);\n            };\n          }\n\n          // Attempt to fix ONN in plan-b mode.\n          function fixNegotiationNeeded(window) {\n            var browserDetails = utils.detectBrowser(window);\n            utils.wrapPeerConnectionEvent(\n              window,\n              \"negotiationneeded\",\n              function (e) {\n                var pc = e.target;\n                if (\n                  browserDetails.version < 72 ||\n                  (pc.getConfiguration &&\n                    pc.getConfiguration().sdpSemantics === \"plan-b\")\n                ) {\n                  if (pc.signalingState !== \"stable\") {\n                    return;\n                  }\n                }\n                return e;\n              }\n            );\n          }\n        },\n        { \"../utils.js\": 15, \"./getdisplaymedia\": 4, \"./getusermedia\": 5 },\n      ],\n      4: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          /* eslint-env node */\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true,\n          });\n          exports.shimGetDisplayMedia = shimGetDisplayMedia;\n          function shimGetDisplayMedia(window, getSourceId) {\n            if (\n              window.navigator.mediaDevices &&\n              \"getDisplayMedia\" in window.navigator.mediaDevices\n            ) {\n              return;\n            }\n            if (!window.navigator.mediaDevices) {\n              return;\n            }\n            // getSourceId is a function that returns a promise resolving with\n            // the sourceId of the screen/window/tab to be shared.\n            if (typeof getSourceId !== \"function\") {\n              console.error(\n                \"shimGetDisplayMedia: getSourceId argument is not \" +\n                  \"a function\"\n              );\n              return;\n            }\n            window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(\n              constraints\n            ) {\n              return getSourceId(constraints).then(function (sourceId) {\n                var widthSpecified =\n                  constraints.video && constraints.video.width;\n                var heightSpecified =\n                  constraints.video && constraints.video.height;\n                var frameRateSpecified =\n                  constraints.video && constraints.video.frameRate;\n                constraints.video = {\n                  mandatory: {\n                    chromeMediaSource: \"desktop\",\n                    chromeMediaSourceId: sourceId,\n                    maxFrameRate: frameRateSpecified || 3,\n                  },\n                };\n                if (widthSpecified) {\n                  constraints.video.mandatory.maxWidth = widthSpecified;\n                }\n                if (heightSpecified) {\n                  constraints.video.mandatory.maxHeight = heightSpecified;\n                }\n                return window.navigator.mediaDevices.getUserMedia(constraints);\n              });\n            };\n          }\n        },\n        {},\n      ],\n      5: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          /* eslint-env node */\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true,\n          });\n\n          var _typeof =\n            typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n              ? function (obj) {\n                  return typeof obj;\n                }\n              : function (obj) {\n                  return obj &&\n                    typeof Symbol === \"function\" &&\n                    obj.constructor === Symbol &&\n                    obj !== Symbol.prototype\n                    ? \"symbol\"\n                    : typeof obj;\n                };\n\n          exports.shimGetUserMedia = shimGetUserMedia;\n\n          var _utils = require(\"../utils.js\");\n\n          var utils = _interopRequireWildcard(_utils);\n\n          function _interopRequireWildcard(obj) {\n            if (obj && obj.__esModule) {\n              return obj;\n            } else {\n              var newObj = {};\n              if (obj != null) {\n                for (var key in obj) {\n                  if (Object.prototype.hasOwnProperty.call(obj, key))\n                    newObj[key] = obj[key];\n                }\n              }\n              newObj.default = obj;\n              return newObj;\n            }\n          }\n\n          var logging = utils.log;\n\n          function shimGetUserMedia(window) {\n            var navigator = window && window.navigator;\n\n            if (!navigator.mediaDevices) {\n              return;\n            }\n\n            var browserDetails = utils.detectBrowser(window);\n\n            var constraintsToChrome_ = function constraintsToChrome_(c) {\n              if (\n                (typeof c === \"undefined\" ? \"undefined\" : _typeof(c)) !==\n                  \"object\" ||\n                c.mandatory ||\n                c.optional\n              ) {\n                return c;\n              }\n              var cc = {};\n              Object.keys(c).forEach(function (key) {\n                if (\n                  key === \"require\" ||\n                  key === \"advanced\" ||\n                  key === \"mediaSource\"\n                ) {\n                  return;\n                }\n                var r =\n                  _typeof(c[key]) === \"object\" ? c[key] : { ideal: c[key] };\n                if (r.exact !== undefined && typeof r.exact === \"number\") {\n                  r.min = r.max = r.exact;\n                }\n                var oldname_ = function oldname_(prefix, name) {\n                  if (prefix) {\n                    return (\n                      prefix + name.charAt(0).toUpperCase() + name.slice(1)\n                    );\n                  }\n                  return name === \"deviceId\" ? \"sourceId\" : name;\n                };\n                if (r.ideal !== undefined) {\n                  cc.optional = cc.optional || [];\n                  var oc = {};\n                  if (typeof r.ideal === \"number\") {\n                    oc[oldname_(\"min\", key)] = r.ideal;\n                    cc.optional.push(oc);\n                    oc = {};\n                    oc[oldname_(\"max\", key)] = r.ideal;\n                    cc.optional.push(oc);\n                  } else {\n                    oc[oldname_(\"\", key)] = r.ideal;\n                    cc.optional.push(oc);\n                  }\n                }\n                if (r.exact !== undefined && typeof r.exact !== \"number\") {\n                  cc.mandatory = cc.mandatory || {};\n                  cc.mandatory[oldname_(\"\", key)] = r.exact;\n                } else {\n                  [\"min\", \"max\"].forEach(function (mix) {\n                    if (r[mix] !== undefined) {\n                      cc.mandatory = cc.mandatory || {};\n                      cc.mandatory[oldname_(mix, key)] = r[mix];\n                    }\n                  });\n                }\n              });\n              if (c.advanced) {\n                cc.optional = (cc.optional || []).concat(c.advanced);\n              }\n              return cc;\n            };\n\n            var shimConstraints_ = function shimConstraints_(\n              constraints,\n              func\n            ) {\n              if (browserDetails.version >= 61) {\n                return func(constraints);\n              }\n              constraints = JSON.parse(JSON.stringify(constraints));\n              if (constraints && _typeof(constraints.audio) === \"object\") {\n                var remap = function remap(obj, a, b) {\n                  if (a in obj && !(b in obj)) {\n                    obj[b] = obj[a];\n                    delete obj[a];\n                  }\n                };\n                constraints = JSON.parse(JSON.stringify(constraints));\n                remap(\n                  constraints.audio,\n                  \"autoGainControl\",\n                  \"googAutoGainControl\"\n                );\n                remap(\n                  constraints.audio,\n                  \"noiseSuppression\",\n                  \"googNoiseSuppression\"\n                );\n                constraints.audio = constraintsToChrome_(constraints.audio);\n              }\n              if (constraints && _typeof(constraints.video) === \"object\") {\n                // Shim facingMode for mobile & surface pro.\n                var face = constraints.video.facingMode;\n                face =\n                  face &&\n                  ((typeof face === \"undefined\"\n                    ? \"undefined\"\n                    : _typeof(face)) === \"object\"\n                    ? face\n                    : { ideal: face });\n                var getSupportedFacingModeLies = browserDetails.version < 66;\n\n                if (\n                  face &&\n                  (face.exact === \"user\" ||\n                    face.exact === \"environment\" ||\n                    face.ideal === \"user\" ||\n                    face.ideal === \"environment\") &&\n                  !(\n                    navigator.mediaDevices.getSupportedConstraints &&\n                    navigator.mediaDevices.getSupportedConstraints()\n                      .facingMode &&\n                    !getSupportedFacingModeLies\n                  )\n                ) {\n                  delete constraints.video.facingMode;\n                  var matches = void 0;\n                  if (\n                    face.exact === \"environment\" ||\n                    face.ideal === \"environment\"\n                  ) {\n                    matches = [\"back\", \"rear\"];\n                  } else if (face.exact === \"user\" || face.ideal === \"user\") {\n                    matches = [\"front\"];\n                  }\n                  if (matches) {\n                    // Look for matches in label, or use last cam for back (typical).\n                    return navigator.mediaDevices\n                      .enumerateDevices()\n                      .then(function (devices) {\n                        devices = devices.filter(function (d) {\n                          return d.kind === \"videoinput\";\n                        });\n                        var dev = devices.find(function (d) {\n                          return matches.some(function (match) {\n                            return d.label.toLowerCase().includes(match);\n                          });\n                        });\n                        if (\n                          !dev &&\n                          devices.length &&\n                          matches.includes(\"back\")\n                        ) {\n                          dev = devices[devices.length - 1]; // more likely the back cam\n                        }\n                        if (dev) {\n                          constraints.video.deviceId = face.exact\n                            ? { exact: dev.deviceId }\n                            : { ideal: dev.deviceId };\n                        }\n                        constraints.video = constraintsToChrome_(\n                          constraints.video\n                        );\n                        logging(\"chrome: \" + JSON.stringify(constraints));\n                        return func(constraints);\n                      });\n                  }\n                }\n                constraints.video = constraintsToChrome_(constraints.video);\n              }\n              logging(\"chrome: \" + JSON.stringify(constraints));\n              return func(constraints);\n            };\n\n            var shimError_ = function shimError_(e) {\n              if (browserDetails.version >= 64) {\n                return e;\n              }\n              return {\n                name:\n                  {\n                    PermissionDeniedError: \"NotAllowedError\",\n                    PermissionDismissedError: \"NotAllowedError\",\n                    InvalidStateError: \"NotAllowedError\",\n                    DevicesNotFoundError: \"NotFoundError\",\n                    ConstraintNotSatisfiedError: \"OverconstrainedError\",\n                    TrackStartError: \"NotReadableError\",\n                    MediaDeviceFailedDueToShutdown: \"NotAllowedError\",\n                    MediaDeviceKillSwitchOn: \"NotAllowedError\",\n                    TabCaptureError: \"AbortError\",\n                    ScreenCaptureError: \"AbortError\",\n                    DeviceCaptureError: \"AbortError\",\n                  }[e.name] || e.name,\n                message: e.message,\n                constraint: e.constraint || e.constraintName,\n                toString: function toString() {\n                  return this.name + (this.message && \": \") + this.message;\n                },\n              };\n            };\n\n            var getUserMedia_ = function getUserMedia_(\n              constraints,\n              onSuccess,\n              onError\n            ) {\n              shimConstraints_(constraints, function (c) {\n                navigator.webkitGetUserMedia(c, onSuccess, function (e) {\n                  if (onError) {\n                    onError(shimError_(e));\n                  }\n                });\n              });\n            };\n            navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n            // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n            // function which returns a Promise, it does not accept spec-style\n            // constraints.\n            if (navigator.mediaDevices.getUserMedia) {\n              var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(\n                navigator.mediaDevices\n              );\n              navigator.mediaDevices.getUserMedia = function (cs) {\n                return shimConstraints_(cs, function (c) {\n                  return origGetUserMedia(c).then(\n                    function (stream) {\n                      if (\n                        (c.audio && !stream.getAudioTracks().length) ||\n                        (c.video && !stream.getVideoTracks().length)\n                      ) {\n                        stream.getTracks().forEach(function (track) {\n                          track.stop();\n                        });\n                        throw new DOMException(\"\", \"NotFoundError\");\n                      }\n                      return stream;\n                    },\n                    function (e) {\n                      return Promise.reject(shimError_(e));\n                    }\n                  );\n                });\n              };\n            }\n          }\n        },\n        { \"../utils.js\": 15 },\n      ],\n      6: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          /* eslint-env node */\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true,\n          });\n\n          var _typeof =\n            typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n              ? function (obj) {\n                  return typeof obj;\n                }\n              : function (obj) {\n                  return obj &&\n                    typeof Symbol === \"function\" &&\n                    obj.constructor === Symbol &&\n                    obj !== Symbol.prototype\n                    ? \"symbol\"\n                    : typeof obj;\n                };\n\n          exports.shimRTCIceCandidate = shimRTCIceCandidate;\n          exports.shimMaxMessageSize = shimMaxMessageSize;\n          exports.shimSendThrowTypeError = shimSendThrowTypeError;\n          exports.shimConnectionState = shimConnectionState;\n          exports.removeAllowExtmapMixed = removeAllowExtmapMixed;\n\n          var _sdp = require(\"sdp\");\n\n          var _sdp2 = _interopRequireDefault(_sdp);\n\n          var _utils = require(\"./utils\");\n\n          var utils = _interopRequireWildcard(_utils);\n\n          function _interopRequireWildcard(obj) {\n            if (obj && obj.__esModule) {\n              return obj;\n            } else {\n              var newObj = {};\n              if (obj != null) {\n                for (var key in obj) {\n                  if (Object.prototype.hasOwnProperty.call(obj, key))\n                    newObj[key] = obj[key];\n                }\n              }\n              newObj.default = obj;\n              return newObj;\n            }\n          }\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : { default: obj };\n          }\n\n          function shimRTCIceCandidate(window) {\n            // foundation is arbitrarily chosen as an indicator for full support for\n            // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n            if (\n              !window.RTCIceCandidate ||\n              (window.RTCIceCandidate &&\n                \"foundation\" in window.RTCIceCandidate.prototype)\n            ) {\n              return;\n            }\n\n            var NativeRTCIceCandidate = window.RTCIceCandidate;\n            window.RTCIceCandidate = function RTCIceCandidate(args) {\n              // Remove the a= which shouldn't be part of the candidate string.\n              if (\n                (typeof args === \"undefined\" ? \"undefined\" : _typeof(args)) ===\n                  \"object\" &&\n                args.candidate &&\n                args.candidate.indexOf(\"a=\") === 0\n              ) {\n                args = JSON.parse(JSON.stringify(args));\n                args.candidate = args.candidate.substr(2);\n              }\n\n              if (args.candidate && args.candidate.length) {\n                // Augment the native candidate with the parsed fields.\n                var nativeCandidate = new NativeRTCIceCandidate(args);\n                var parsedCandidate = _sdp2.default.parseCandidate(\n                  args.candidate\n                );\n                var augmentedCandidate = Object.assign(\n                  nativeCandidate,\n                  parsedCandidate\n                );\n\n                // Add a serializer that does not serialize the extra attributes.\n                augmentedCandidate.toJSON = function toJSON() {\n                  return {\n                    candidate: augmentedCandidate.candidate,\n                    sdpMid: augmentedCandidate.sdpMid,\n                    sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n                    usernameFragment: augmentedCandidate.usernameFragment,\n                  };\n                };\n                return augmentedCandidate;\n              }\n              return new NativeRTCIceCandidate(args);\n            };\n            window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n            // Hook up the augmented candidate in onicecandidate and\n            // addEventListener('icecandidate', ...)\n            utils.wrapPeerConnectionEvent(window, \"icecandidate\", function (e) {\n              if (e.candidate) {\n                Object.defineProperty(e, \"candidate\", {\n                  value: new window.RTCIceCandidate(e.candidate),\n                  writable: \"false\",\n                });\n              }\n              return e;\n            });\n          }\n\n          function shimMaxMessageSize(window) {\n            if (!window.RTCPeerConnection) {\n              return;\n            }\n            var browserDetails = utils.detectBrowser(window);\n\n            if (!(\"sctp\" in window.RTCPeerConnection.prototype)) {\n              Object.defineProperty(\n                window.RTCPeerConnection.prototype,\n                \"sctp\",\n                {\n                  get: function get() {\n                    return typeof this._sctp === \"undefined\"\n                      ? null\n                      : this._sctp;\n                  },\n                }\n              );\n            }\n\n            var sctpInDescription = function sctpInDescription(description) {\n              if (!description || !description.sdp) {\n                return false;\n              }\n              var sections = _sdp2.default.splitSections(description.sdp);\n              sections.shift();\n              return sections.some(function (mediaSection) {\n                var mLine = _sdp2.default.parseMLine(mediaSection);\n                return (\n                  mLine &&\n                  mLine.kind === \"application\" &&\n                  mLine.protocol.indexOf(\"SCTP\") !== -1\n                );\n              });\n            };\n\n            var getRemoteFirefoxVersion = function getRemoteFirefoxVersion(\n              description\n            ) {\n              // TODO: Is there a better solution for detecting Firefox?\n              var match = description.sdp.match(\n                /mozilla...THIS_IS_SDPARTA-(\\d+)/\n              );\n              if (match === null || match.length < 2) {\n                return -1;\n              }\n              var version = parseInt(match[1], 10);\n              // Test for NaN (yes, this is ugly)\n              return version !== version ? -1 : version;\n            };\n\n            var getCanSendMaxMessageSize = function getCanSendMaxMessageSize(\n              remoteIsFirefox\n            ) {\n              // Every implementation we know can send at least 64 KiB.\n              // Note: Although Chrome is technically able to send up to 256 KiB, the\n              //       data does not reach the other peer reliably.\n              //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n              var canSendMaxMessageSize = 65536;\n              if (browserDetails.browser === \"firefox\") {\n                if (browserDetails.version < 57) {\n                  if (remoteIsFirefox === -1) {\n                    // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n                    // fragmentation.\n                    canSendMaxMessageSize = 16384;\n                  } else {\n                    // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n                    // messages. Thus, supporting ~2 GiB when sending.\n                    canSendMaxMessageSize = 2147483637;\n                  }\n                } else if (browserDetails.version < 60) {\n                  // Currently, all FF >= 57 will reset the remote maximum message size\n                  // to the default value when a data channel is created at a later\n                  // stage. :(\n                  // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n                  canSendMaxMessageSize =\n                    browserDetails.version === 57 ? 65535 : 65536;\n                } else {\n                  // FF >= 60 supports sending ~2 GiB\n                  canSendMaxMessageSize = 2147483637;\n                }\n              }\n              return canSendMaxMessageSize;\n            };\n\n            var getMaxMessageSize = function getMaxMessageSize(\n              description,\n              remoteIsFirefox\n            ) {\n              // Note: 65536 bytes is the default value from the SDP spec. Also,\n              //       every implementation we know supports receiving 65536 bytes.\n              var maxMessageSize = 65536;\n\n              // FF 57 has a slightly incorrect default remote max message size, so\n              // we need to adjust it here to avoid a failure when sending.\n              // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n              if (\n                browserDetails.browser === \"firefox\" &&\n                browserDetails.version === 57\n              ) {\n                maxMessageSize = 65535;\n              }\n\n              var match = _sdp2.default.matchPrefix(\n                description.sdp,\n                \"a=max-message-size:\"\n              );\n              if (match.length > 0) {\n                maxMessageSize = parseInt(match[0].substr(19), 10);\n              } else if (\n                browserDetails.browser === \"firefox\" &&\n                remoteIsFirefox !== -1\n              ) {\n                // If the maximum message size is not present in the remote SDP and\n                // both local and remote are Firefox, the remote peer can receive\n                // ~2 GiB.\n                maxMessageSize = 2147483637;\n              }\n              return maxMessageSize;\n            };\n\n            var origSetRemoteDescription =\n              window.RTCPeerConnection.prototype.setRemoteDescription;\n            window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n              this._sctp = null;\n              // Chrome decided to not expose .sctp in plan-b mode.\n              // As usual, adapter.js has to do an 'ugly worakaround'\n              // to cover up the mess.\n              if (\n                browserDetails.browser === \"chrome\" &&\n                browserDetails.version >= 76\n              ) {\n                var _getConfiguration = this.getConfiguration(),\n                  sdpSemantics = _getConfiguration.sdpSemantics;\n\n                if (sdpSemantics === \"plan-b\") {\n                  Object.defineProperty(this, \"sctp\", {\n                    get: function get() {\n                      return typeof this._sctp === \"undefined\"\n                        ? null\n                        : this._sctp;\n                    },\n\n                    enumerable: true,\n                    configurable: true,\n                  });\n                }\n              }\n\n              if (sctpInDescription(arguments[0])) {\n                // Check if the remote is FF.\n                var isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n                // Get the maximum message size the local peer is capable of sending\n                var canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n                // Get the maximum message size of the remote peer.\n                var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n                // Determine final maximum message size\n                var maxMessageSize = void 0;\n                if (canSendMMS === 0 && remoteMMS === 0) {\n                  maxMessageSize = Number.POSITIVE_INFINITY;\n                } else if (canSendMMS === 0 || remoteMMS === 0) {\n                  maxMessageSize = Math.max(canSendMMS, remoteMMS);\n                } else {\n                  maxMessageSize = Math.min(canSendMMS, remoteMMS);\n                }\n\n                // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n                // attribute.\n                var sctp = {};\n                Object.defineProperty(sctp, \"maxMessageSize\", {\n                  get: function get() {\n                    return maxMessageSize;\n                  },\n                });\n                this._sctp = sctp;\n              }\n\n              return origSetRemoteDescription.apply(this, arguments);\n            };\n          }\n\n          function shimSendThrowTypeError(window) {\n            if (\n              !(\n                window.RTCPeerConnection &&\n                \"createDataChannel\" in window.RTCPeerConnection.prototype\n              )\n            ) {\n              return;\n            }\n\n            // Note: Although Firefox >= 57 has a native implementation, the maximum\n            //       message size can be reset for all data channels at a later stage.\n            //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n            function wrapDcSend(dc, pc) {\n              var origDataChannelSend = dc.send;\n              dc.send = function send() {\n                var data = arguments[0];\n                var length = data.length || data.size || data.byteLength;\n                if (\n                  dc.readyState === \"open\" &&\n                  pc.sctp &&\n                  length > pc.sctp.maxMessageSize\n                ) {\n                  throw new TypeError(\n                    \"Message too large (can send a maximum of \" +\n                      pc.sctp.maxMessageSize +\n                      \" bytes)\"\n                  );\n                }\n                return origDataChannelSend.apply(dc, arguments);\n              };\n            }\n            var origCreateDataChannel =\n              window.RTCPeerConnection.prototype.createDataChannel;\n            window.RTCPeerConnection.prototype.createDataChannel = function createDataChannel() {\n              var dataChannel = origCreateDataChannel.apply(this, arguments);\n              wrapDcSend(dataChannel, this);\n              return dataChannel;\n            };\n            utils.wrapPeerConnectionEvent(window, \"datachannel\", function (e) {\n              wrapDcSend(e.channel, e.target);\n              return e;\n            });\n          }\n\n          /* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n           * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n           * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n           * since DTLS failures would be hidden. See\n           * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n           * for the Firefox tracking bug.\n           */\n          function shimConnectionState(window) {\n            if (\n              !window.RTCPeerConnection ||\n              \"connectionState\" in window.RTCPeerConnection.prototype\n            ) {\n              return;\n            }\n            var proto = window.RTCPeerConnection.prototype;\n            Object.defineProperty(proto, \"connectionState\", {\n              get: function get() {\n                return (\n                  {\n                    completed: \"connected\",\n                    checking: \"connecting\",\n                  }[this.iceConnectionState] || this.iceConnectionState\n                );\n              },\n\n              enumerable: true,\n              configurable: true,\n            });\n            Object.defineProperty(proto, \"onconnectionstatechange\", {\n              get: function get() {\n                return this._onconnectionstatechange || null;\n              },\n              set: function set(cb) {\n                if (this._onconnectionstatechange) {\n                  this.removeEventListener(\n                    \"connectionstatechange\",\n                    this._onconnectionstatechange\n                  );\n                  delete this._onconnectionstatechange;\n                }\n                if (cb) {\n                  this.addEventListener(\n                    \"connectionstatechange\",\n                    (this._onconnectionstatechange = cb)\n                  );\n                }\n              },\n\n              enumerable: true,\n              configurable: true,\n            });\n\n            [\"setLocalDescription\", \"setRemoteDescription\"].forEach(function (\n              method\n            ) {\n              var origMethod = proto[method];\n              proto[method] = function () {\n                if (!this._connectionstatechangepoly) {\n                  this._connectionstatechangepoly = function (e) {\n                    var pc = e.target;\n                    if (pc._lastConnectionState !== pc.connectionState) {\n                      pc._lastConnectionState = pc.connectionState;\n                      var newEvent = new Event(\"connectionstatechange\", e);\n                      pc.dispatchEvent(newEvent);\n                    }\n                    return e;\n                  };\n                  this.addEventListener(\n                    \"iceconnectionstatechange\",\n                    this._connectionstatechangepoly\n                  );\n                }\n                return origMethod.apply(this, arguments);\n              };\n            });\n          }\n\n          function removeAllowExtmapMixed(window) {\n            /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n            if (!window.RTCPeerConnection) {\n              return;\n            }\n            var browserDetails = utils.detectBrowser(window);\n            if (\n              browserDetails.browser === \"chrome\" &&\n              browserDetails.version >= 71\n            ) {\n              return;\n            }\n            if (\n              browserDetails.browser === \"safari\" &&\n              browserDetails.version >= 605\n            ) {\n              return;\n            }\n            var nativeSRD =\n              window.RTCPeerConnection.prototype.setRemoteDescription;\n            window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription(\n              desc\n            ) {\n              if (\n                desc &&\n                desc.sdp &&\n                desc.sdp.indexOf(\"\\na=extmap-allow-mixed\") !== -1\n              ) {\n                desc.sdp = desc.sdp\n                  .split(\"\\n\")\n                  .filter(function (line) {\n                    return line.trim() !== \"a=extmap-allow-mixed\";\n                  })\n                  .join(\"\\n\");\n              }\n              return nativeSRD.apply(this, arguments);\n            };\n          }\n        },\n        { \"./utils\": 15, sdp: 17 },\n      ],\n      7: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          /* eslint-env node */\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true,\n          });\n          exports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\n          var _getusermedia = require(\"./getusermedia\");\n\n          Object.defineProperty(exports, \"shimGetUserMedia\", {\n            enumerable: true,\n            get: function get() {\n              return _getusermedia.shimGetUserMedia;\n            },\n          });\n\n          var _getdisplaymedia = require(\"./getdisplaymedia\");\n\n          Object.defineProperty(exports, \"shimGetDisplayMedia\", {\n            enumerable: true,\n            get: function get() {\n              return _getdisplaymedia.shimGetDisplayMedia;\n            },\n          });\n          exports.shimPeerConnection = shimPeerConnection;\n          exports.shimReplaceTrack = shimReplaceTrack;\n\n          var _utils = require(\"../utils\");\n\n          var utils = _interopRequireWildcard(_utils);\n\n          var _filtericeservers = require(\"./filtericeservers\");\n\n          var _rtcpeerconnectionShim = require(\"rtcpeerconnection-shim\");\n\n          var _rtcpeerconnectionShim2 = _interopRequireDefault(\n            _rtcpeerconnectionShim\n          );\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : { default: obj };\n          }\n\n          function _interopRequireWildcard(obj) {\n            if (obj && obj.__esModule) {\n              return obj;\n            } else {\n              var newObj = {};\n              if (obj != null) {\n                for (var key in obj) {\n                  if (Object.prototype.hasOwnProperty.call(obj, key))\n                    newObj[key] = obj[key];\n                }\n              }\n              newObj.default = obj;\n              return newObj;\n            }\n          }\n\n          function shimPeerConnection(window) {\n            var browserDetails = utils.detectBrowser(window);\n\n            if (window.RTCIceGatherer) {\n              if (!window.RTCIceCandidate) {\n                window.RTCIceCandidate = function RTCIceCandidate(args) {\n                  return args;\n                };\n              }\n              if (!window.RTCSessionDescription) {\n                window.RTCSessionDescription = function RTCSessionDescription(\n                  args\n                ) {\n                  return args;\n                };\n              }\n              // this adds an additional event listener to MediaStrackTrack that signals\n              // when a tracks enabled property was changed. Workaround for a bug in\n              // addStream, see below. No longer required in 15025+\n              if (browserDetails.version < 15025) {\n                var origMSTEnabled = Object.getOwnPropertyDescriptor(\n                  window.MediaStreamTrack.prototype,\n                  \"enabled\"\n                );\n                Object.defineProperty(\n                  window.MediaStreamTrack.prototype,\n                  \"enabled\",\n                  {\n                    set: function set(value) {\n                      origMSTEnabled.set.call(this, value);\n                      var ev = new Event(\"enabled\");\n                      ev.enabled = value;\n                      this.dispatchEvent(ev);\n                    },\n                  }\n                );\n              }\n            }\n\n            // ORTC defines the DTMF sender a bit different.\n            // https://github.com/w3c/ortc/issues/714\n            if (\n              window.RTCRtpSender &&\n              !(\"dtmf\" in window.RTCRtpSender.prototype)\n            ) {\n              Object.defineProperty(window.RTCRtpSender.prototype, \"dtmf\", {\n                get: function get() {\n                  if (this._dtmf === undefined) {\n                    if (this.track.kind === \"audio\") {\n                      this._dtmf = new window.RTCDtmfSender(this);\n                    } else if (this.track.kind === \"video\") {\n                      this._dtmf = null;\n                    }\n                  }\n                  return this._dtmf;\n                },\n              });\n            }\n            // Edge currently only implements the RTCDtmfSender, not the\n            // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n            if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n              window.RTCDTMFSender = window.RTCDtmfSender;\n            }\n\n            var RTCPeerConnectionShim = (0, _rtcpeerconnectionShim2.default)(\n              window,\n              browserDetails.version\n            );\n            window.RTCPeerConnection = function RTCPeerConnection(config) {\n              if (config && config.iceServers) {\n                config.iceServers = (0, _filtericeservers.filterIceServers)(\n                  config.iceServers,\n                  browserDetails.version\n                );\n                utils.log(\"ICE servers after filtering:\", config.iceServers);\n              }\n              return new RTCPeerConnectionShim(config);\n            };\n            window.RTCPeerConnection.prototype =\n              RTCPeerConnectionShim.prototype;\n          }\n\n          function shimReplaceTrack(window) {\n            // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n            if (\n              window.RTCRtpSender &&\n              !(\"replaceTrack\" in window.RTCRtpSender.prototype)\n            ) {\n              window.RTCRtpSender.prototype.replaceTrack =\n                window.RTCRtpSender.prototype.setTrack;\n            }\n          }\n        },\n        {\n          \"../utils\": 15,\n          \"./filtericeservers\": 8,\n          \"./getdisplaymedia\": 9,\n          \"./getusermedia\": 10,\n          \"rtcpeerconnection-shim\": 16,\n        },\n      ],\n      8: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          /* eslint-env node */\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true,\n          });\n          exports.filterIceServers = filterIceServers;\n\n          var _utils = require(\"../utils\");\n\n          var utils = _interopRequireWildcard(_utils);\n\n          function _interopRequireWildcard(obj) {\n            if (obj && obj.__esModule) {\n              return obj;\n            } else {\n              var newObj = {};\n              if (obj != null) {\n                for (var key in obj) {\n                  if (Object.prototype.hasOwnProperty.call(obj, key))\n                    newObj[key] = obj[key];\n                }\n              }\n              newObj.default = obj;\n              return newObj;\n            }\n          }\n\n          // Edge does not like\n          // 1) stun: filtered after 14393 unless ?transport=udp is present\n          // 2) turn: that does not have all of turn:host:port?transport=udp\n          // 3) turn: with ipv6 addresses\n          // 4) turn: occurring muliple times\n          function filterIceServers(iceServers, edgeVersion) {\n            var hasTurn = false;\n            iceServers = JSON.parse(JSON.stringify(iceServers));\n            return iceServers.filter(function (server) {\n              if (server && (server.urls || server.url)) {\n                var urls = server.urls || server.url;\n                if (server.url && !server.urls) {\n                  utils.deprecated(\"RTCIceServer.url\", \"RTCIceServer.urls\");\n                }\n                var isString = typeof urls === \"string\";\n                if (isString) {\n                  urls = [urls];\n                }\n                urls = urls.filter(function (url) {\n                  // filter STUN unconditionally.\n                  if (url.indexOf(\"stun:\") === 0) {\n                    return false;\n                  }\n\n                  var validTurn =\n                    url.startsWith(\"turn\") &&\n                    !url.startsWith(\"turn:[\") &&\n                    url.includes(\"transport=udp\");\n                  if (validTurn && !hasTurn) {\n                    hasTurn = true;\n                    return true;\n                  }\n                  return validTurn && !hasTurn;\n                });\n\n                delete server.url;\n                server.urls = isString ? urls[0] : urls;\n                return !!urls.length;\n              }\n            });\n          }\n        },\n        { \"../utils\": 15 },\n      ],\n      9: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          /* eslint-env node */\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true,\n          });\n          exports.shimGetDisplayMedia = shimGetDisplayMedia;\n          function shimGetDisplayMedia(window) {\n            if (!(\"getDisplayMedia\" in window.navigator)) {\n              return;\n            }\n            if (!window.navigator.mediaDevices) {\n              return;\n            }\n            if (\n              window.navigator.mediaDevices &&\n              \"getDisplayMedia\" in window.navigator.mediaDevices\n            ) {\n              return;\n            }\n            window.navigator.mediaDevices.getDisplayMedia = window.navigator.getDisplayMedia.bind(\n              window.navigator\n            );\n          }\n        },\n        {},\n      ],\n      10: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          /* eslint-env node */\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true,\n          });\n          exports.shimGetUserMedia = shimGetUserMedia;\n          function shimGetUserMedia(window) {\n            var navigator = window && window.navigator;\n\n            var shimError_ = function shimError_(e) {\n              return {\n                name:\n                  { PermissionDeniedError: \"NotAllowedError\" }[e.name] ||\n                  e.name,\n                message: e.message,\n                constraint: e.constraint,\n                toString: function toString() {\n                  return this.name;\n                },\n              };\n            };\n\n            // getUserMedia error shim.\n            var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(\n              navigator.mediaDevices\n            );\n            navigator.mediaDevices.getUserMedia = function (c) {\n              return origGetUserMedia(c).catch(function (e) {\n                return Promise.reject(shimError_(e));\n              });\n            };\n          }\n        },\n        {},\n      ],\n      11: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          /* eslint-env node */\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true,\n          });\n          exports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\n          var _typeof =\n            typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n              ? function (obj) {\n                  return typeof obj;\n                }\n              : function (obj) {\n                  return obj &&\n                    typeof Symbol === \"function\" &&\n                    obj.constructor === Symbol &&\n                    obj !== Symbol.prototype\n                    ? \"symbol\"\n                    : typeof obj;\n                };\n\n          var _getusermedia = require(\"./getusermedia\");\n\n          Object.defineProperty(exports, \"shimGetUserMedia\", {\n            enumerable: true,\n            get: function get() {\n              return _getusermedia.shimGetUserMedia;\n            },\n          });\n\n          var _getdisplaymedia = require(\"./getdisplaymedia\");\n\n          Object.defineProperty(exports, \"shimGetDisplayMedia\", {\n            enumerable: true,\n            get: function get() {\n              return _getdisplaymedia.shimGetDisplayMedia;\n            },\n          });\n          exports.shimOnTrack = shimOnTrack;\n          exports.shimPeerConnection = shimPeerConnection;\n          exports.shimSenderGetStats = shimSenderGetStats;\n          exports.shimReceiverGetStats = shimReceiverGetStats;\n          exports.shimRemoveStream = shimRemoveStream;\n          exports.shimRTCDataChannel = shimRTCDataChannel;\n          exports.shimAddTransceiver = shimAddTransceiver;\n          exports.shimGetParameters = shimGetParameters;\n          exports.shimCreateOffer = shimCreateOffer;\n          exports.shimCreateAnswer = shimCreateAnswer;\n\n          var _utils = require(\"../utils\");\n\n          var utils = _interopRequireWildcard(_utils);\n\n          function _interopRequireWildcard(obj) {\n            if (obj && obj.__esModule) {\n              return obj;\n            } else {\n              var newObj = {};\n              if (obj != null) {\n                for (var key in obj) {\n                  if (Object.prototype.hasOwnProperty.call(obj, key))\n                    newObj[key] = obj[key];\n                }\n              }\n              newObj.default = obj;\n              return newObj;\n            }\n          }\n\n          function _defineProperty(obj, key, value) {\n            if (key in obj) {\n              Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true,\n              });\n            } else {\n              obj[key] = value;\n            }\n            return obj;\n          }\n\n          function shimOnTrack(window) {\n            if (\n              (typeof window === \"undefined\"\n                ? \"undefined\"\n                : _typeof(window)) === \"object\" &&\n              window.RTCTrackEvent &&\n              \"receiver\" in window.RTCTrackEvent.prototype &&\n              !(\"transceiver\" in window.RTCTrackEvent.prototype)\n            ) {\n              Object.defineProperty(\n                window.RTCTrackEvent.prototype,\n                \"transceiver\",\n                {\n                  get: function get() {\n                    return { receiver: this.receiver };\n                  },\n                }\n              );\n            }\n          }\n\n          function shimPeerConnection(window) {\n            var browserDetails = utils.detectBrowser(window);\n\n            if (\n              (typeof window === \"undefined\"\n                ? \"undefined\"\n                : _typeof(window)) !== \"object\" ||\n              !(window.RTCPeerConnection || window.mozRTCPeerConnection)\n            ) {\n              return; // probably media.peerconnection.enabled=false in about:config\n            }\n            if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n              // very basic support for old versions.\n              window.RTCPeerConnection = window.mozRTCPeerConnection;\n            }\n\n            if (browserDetails.version < 53) {\n              // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n              [\n                \"setLocalDescription\",\n                \"setRemoteDescription\",\n                \"addIceCandidate\",\n              ].forEach(function (method) {\n                var nativeMethod = window.RTCPeerConnection.prototype[method];\n                var methodObj = _defineProperty({}, method, function () {\n                  arguments[0] = new (method === \"addIceCandidate\"\n                    ? window.RTCIceCandidate\n                    : window.RTCSessionDescription)(arguments[0]);\n                  return nativeMethod.apply(this, arguments);\n                });\n                window.RTCPeerConnection.prototype[method] = methodObj[method];\n              });\n            }\n\n            // support for addIceCandidate(null or undefined)\n            // as well as ignoring {sdpMid, candidate: \"\"}\n            if (browserDetails.version < 68) {\n              var nativeAddIceCandidate =\n                window.RTCPeerConnection.prototype.addIceCandidate;\n              window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n                if (!arguments[0]) {\n                  if (arguments[1]) {\n                    arguments[1].apply(null);\n                  }\n                  return Promise.resolve();\n                }\n                // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n                // in older versions.\n                if (arguments[0] && arguments[0].candidate === \"\") {\n                  return Promise.resolve();\n                }\n                return nativeAddIceCandidate.apply(this, arguments);\n              };\n            }\n\n            var modernStatsTypes = {\n              inboundrtp: \"inbound-rtp\",\n              outboundrtp: \"outbound-rtp\",\n              candidatepair: \"candidate-pair\",\n              localcandidate: \"local-candidate\",\n              remotecandidate: \"remote-candidate\",\n            };\n\n            var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n            window.RTCPeerConnection.prototype.getStats = function getStats() {\n              var _arguments = Array.prototype.slice.call(arguments),\n                selector = _arguments[0],\n                onSucc = _arguments[1],\n                onErr = _arguments[2];\n\n              return nativeGetStats\n                .apply(this, [selector || null])\n                .then(function (stats) {\n                  if (browserDetails.version < 53 && !onSucc) {\n                    // Shim only promise getStats with spec-hyphens in type names\n                    // Leave callback version alone; misc old uses of forEach before Map\n                    try {\n                      stats.forEach(function (stat) {\n                        stat.type = modernStatsTypes[stat.type] || stat.type;\n                      });\n                    } catch (e) {\n                      if (e.name !== \"TypeError\") {\n                        throw e;\n                      }\n                      // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n                      stats.forEach(function (stat, i) {\n                        stats.set(\n                          i,\n                          Object.assign({}, stat, {\n                            type: modernStatsTypes[stat.type] || stat.type,\n                          })\n                        );\n                      });\n                    }\n                  }\n                  return stats;\n                })\n                .then(onSucc, onErr);\n            };\n          }\n\n          function shimSenderGetStats(window) {\n            if (\n              !(\n                (typeof window === \"undefined\"\n                  ? \"undefined\"\n                  : _typeof(window)) === \"object\" &&\n                window.RTCPeerConnection &&\n                window.RTCRtpSender\n              )\n            ) {\n              return;\n            }\n            if (\n              window.RTCRtpSender &&\n              \"getStats\" in window.RTCRtpSender.prototype\n            ) {\n              return;\n            }\n            var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n            if (origGetSenders) {\n              window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n                var _this = this;\n\n                var senders = origGetSenders.apply(this, []);\n                senders.forEach(function (sender) {\n                  return (sender._pc = _this);\n                });\n                return senders;\n              };\n            }\n\n            var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n            if (origAddTrack) {\n              window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n                var sender = origAddTrack.apply(this, arguments);\n                sender._pc = this;\n                return sender;\n              };\n            }\n            window.RTCRtpSender.prototype.getStats = function getStats() {\n              return this.track\n                ? this._pc.getStats(this.track)\n                : Promise.resolve(new Map());\n            };\n          }\n\n          function shimReceiverGetStats(window) {\n            if (\n              !(\n                (typeof window === \"undefined\"\n                  ? \"undefined\"\n                  : _typeof(window)) === \"object\" &&\n                window.RTCPeerConnection &&\n                window.RTCRtpSender\n              )\n            ) {\n              return;\n            }\n            if (\n              window.RTCRtpSender &&\n              \"getStats\" in window.RTCRtpReceiver.prototype\n            ) {\n              return;\n            }\n            var origGetReceivers =\n              window.RTCPeerConnection.prototype.getReceivers;\n            if (origGetReceivers) {\n              window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n                var _this2 = this;\n\n                var receivers = origGetReceivers.apply(this, []);\n                receivers.forEach(function (receiver) {\n                  return (receiver._pc = _this2);\n                });\n                return receivers;\n              };\n            }\n            utils.wrapPeerConnectionEvent(window, \"track\", function (e) {\n              e.receiver._pc = e.srcElement;\n              return e;\n            });\n            window.RTCRtpReceiver.prototype.getStats = function getStats() {\n              return this._pc.getStats(this.track);\n            };\n          }\n\n          function shimRemoveStream(window) {\n            if (\n              !window.RTCPeerConnection ||\n              \"removeStream\" in window.RTCPeerConnection.prototype\n            ) {\n              return;\n            }\n            window.RTCPeerConnection.prototype.removeStream = function removeStream(\n              stream\n            ) {\n              var _this3 = this;\n\n              utils.deprecated(\"removeStream\", \"removeTrack\");\n              this.getSenders().forEach(function (sender) {\n                if (sender.track && stream.getTracks().includes(sender.track)) {\n                  _this3.removeTrack(sender);\n                }\n              });\n            };\n          }\n\n          function shimRTCDataChannel(window) {\n            // rename DataChannel to RTCDataChannel (native fix in FF60):\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n            if (window.DataChannel && !window.RTCDataChannel) {\n              window.RTCDataChannel = window.DataChannel;\n            }\n          }\n\n          function shimAddTransceiver(window) {\n            // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n            // Firefox ignores the init sendEncodings options passed to addTransceiver\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n            if (\n              !(\n                (typeof window === \"undefined\"\n                  ? \"undefined\"\n                  : _typeof(window)) === \"object\" && window.RTCPeerConnection\n              )\n            ) {\n              return;\n            }\n            var origAddTransceiver =\n              window.RTCPeerConnection.prototype.addTransceiver;\n            if (origAddTransceiver) {\n              window.RTCPeerConnection.prototype.addTransceiver = function addTransceiver() {\n                this.setParametersPromises = [];\n                var initParameters = arguments[1];\n                var shouldPerformCheck =\n                  initParameters && \"sendEncodings\" in initParameters;\n                if (shouldPerformCheck) {\n                  // If sendEncodings params are provided, validate grammar\n                  initParameters.sendEncodings.forEach(function (\n                    encodingParam\n                  ) {\n                    if (\"rid\" in encodingParam) {\n                      var ridRegex = /^[a-z0-9]{0,16}$/i;\n                      if (!ridRegex.test(encodingParam.rid)) {\n                        throw new TypeError(\"Invalid RID value provided.\");\n                      }\n                    }\n                    if (\"scaleResolutionDownBy\" in encodingParam) {\n                      if (\n                        !(\n                          parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0\n                        )\n                      ) {\n                        throw new RangeError(\n                          \"scale_resolution_down_by must be >= 1.0\"\n                        );\n                      }\n                    }\n                    if (\"maxFramerate\" in encodingParam) {\n                      if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                        throw new RangeError(\"max_framerate must be >= 0.0\");\n                      }\n                    }\n                  });\n                }\n                var transceiver = origAddTransceiver.apply(this, arguments);\n                if (shouldPerformCheck) {\n                  // Check if the init options were applied. If not we do this in an\n                  // asynchronous way and save the promise reference in a global object.\n                  // This is an ugly hack, but at the same time is way more robust than\n                  // checking the sender parameters before and after the createOffer\n                  // Also note that after the createoffer we are not 100% sure that\n                  // the params were asynchronously applied so we might miss the\n                  // opportunity to recreate offer.\n                  var sender = transceiver.sender;\n\n                  var params = sender.getParameters();\n                  if (!(\"encodings\" in params)) {\n                    params.encodings = initParameters.sendEncodings;\n                    sender.sendEncodings = initParameters.sendEncodings;\n                    this.setParametersPromises.push(\n                      sender\n                        .setParameters(params)\n                        .then(function () {\n                          delete sender.sendEncodings;\n                        })\n                        .catch(function () {\n                          delete sender.sendEncodings;\n                        })\n                    );\n                  }\n                }\n                return transceiver;\n              };\n            }\n          }\n\n          function shimGetParameters(window) {\n            if (\n              !(\n                (typeof window === \"undefined\"\n                  ? \"undefined\"\n                  : _typeof(window)) === \"object\" && window.RTCRtpSender\n              )\n            ) {\n              return;\n            }\n            var origGetParameters = window.RTCRtpSender.prototype.getParameters;\n            if (origGetParameters) {\n              window.RTCRtpSender.prototype.getParameters = function getParameters() {\n                var params = origGetParameters.apply(this, arguments);\n                if (!(\"sendEncodings\" in this)) {\n                  return params;\n                }\n                return Object.assign(\n                  {},\n                  { encodings: this.sendEncodings },\n                  params\n                );\n              };\n            }\n          }\n\n          function shimCreateOffer(window) {\n            // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n            // Firefox ignores the init sendEncodings options passed to addTransceiver\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n            if (\n              !(\n                (typeof window === \"undefined\"\n                  ? \"undefined\"\n                  : _typeof(window)) === \"object\" && window.RTCPeerConnection\n              )\n            ) {\n              return;\n            }\n            var origCreateOffer =\n              window.RTCPeerConnection.prototype.createOffer;\n            window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n              var _this4 = this,\n                _arguments2 = arguments;\n\n              if (\n                this.setParametersPromises &&\n                this.setParametersPromises.length\n              ) {\n                return Promise.all(this.setParametersPromises)\n                  .then(function () {\n                    return origCreateOffer.apply(_this4, _arguments2);\n                  })\n                  .finally(function () {\n                    _this4.setParametersPromises = [];\n                  });\n              }\n              return origCreateOffer.apply(this, arguments);\n            };\n          }\n\n          function shimCreateAnswer(window) {\n            // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n            // Firefox ignores the init sendEncodings options passed to addTransceiver\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n            if (\n              !(\n                (typeof window === \"undefined\"\n                  ? \"undefined\"\n                  : _typeof(window)) === \"object\" && window.RTCPeerConnection\n              )\n            ) {\n              return;\n            }\n            var origCreateAnswer =\n              window.RTCPeerConnection.prototype.createAnswer;\n            window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n              var _this5 = this,\n                _arguments3 = arguments;\n\n              if (\n                this.setParametersPromises &&\n                this.setParametersPromises.length\n              ) {\n                return Promise.all(this.setParametersPromises)\n                  .then(function () {\n                    return origCreateAnswer.apply(_this5, _arguments3);\n                  })\n                  .finally(function () {\n                    _this5.setParametersPromises = [];\n                  });\n              }\n              return origCreateAnswer.apply(this, arguments);\n            };\n          }\n        },\n        { \"../utils\": 15, \"./getdisplaymedia\": 12, \"./getusermedia\": 13 },\n      ],\n      12: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          /* eslint-env node */\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true,\n          });\n          exports.shimGetDisplayMedia = shimGetDisplayMedia;\n          function shimGetDisplayMedia(window, preferredMediaSource) {\n            if (\n              window.navigator.mediaDevices &&\n              \"getDisplayMedia\" in window.navigator.mediaDevices\n            ) {\n              return;\n            }\n            if (!window.navigator.mediaDevices) {\n              return;\n            }\n            window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(\n              constraints\n            ) {\n              if (!(constraints && constraints.video)) {\n                var err = new DOMException(\n                  \"getDisplayMedia without video \" + \"constraints is undefined\"\n                );\n                err.name = \"NotFoundError\";\n                // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n                err.code = 8;\n                return Promise.reject(err);\n              }\n              if (constraints.video === true) {\n                constraints.video = { mediaSource: preferredMediaSource };\n              } else {\n                constraints.video.mediaSource = preferredMediaSource;\n              }\n              return window.navigator.mediaDevices.getUserMedia(constraints);\n            };\n          }\n        },\n        {},\n      ],\n      13: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          /* eslint-env node */\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true,\n          });\n\n          var _typeof =\n            typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n              ? function (obj) {\n                  return typeof obj;\n                }\n              : function (obj) {\n                  return obj &&\n                    typeof Symbol === \"function\" &&\n                    obj.constructor === Symbol &&\n                    obj !== Symbol.prototype\n                    ? \"symbol\"\n                    : typeof obj;\n                };\n\n          exports.shimGetUserMedia = shimGetUserMedia;\n\n          var _utils = require(\"../utils\");\n\n          var utils = _interopRequireWildcard(_utils);\n\n          function _interopRequireWildcard(obj) {\n            if (obj && obj.__esModule) {\n              return obj;\n            } else {\n              var newObj = {};\n              if (obj != null) {\n                for (var key in obj) {\n                  if (Object.prototype.hasOwnProperty.call(obj, key))\n                    newObj[key] = obj[key];\n                }\n              }\n              newObj.default = obj;\n              return newObj;\n            }\n          }\n\n          function shimGetUserMedia(window) {\n            var browserDetails = utils.detectBrowser(window);\n            var navigator = window && window.navigator;\n            var MediaStreamTrack = window && window.MediaStreamTrack;\n\n            navigator.getUserMedia = function (\n              constraints,\n              onSuccess,\n              onError\n            ) {\n              // Replace Firefox 44+'s deprecation warning with unprefixed version.\n              utils.deprecated(\n                \"navigator.getUserMedia\",\n                \"navigator.mediaDevices.getUserMedia\"\n              );\n              navigator.mediaDevices\n                .getUserMedia(constraints)\n                .then(onSuccess, onError);\n            };\n\n            if (\n              !(\n                browserDetails.version > 55 &&\n                \"autoGainControl\" in\n                  navigator.mediaDevices.getSupportedConstraints()\n              )\n            ) {\n              var remap = function remap(obj, a, b) {\n                if (a in obj && !(b in obj)) {\n                  obj[b] = obj[a];\n                  delete obj[a];\n                }\n              };\n\n              var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.bind(\n                navigator.mediaDevices\n              );\n              navigator.mediaDevices.getUserMedia = function (c) {\n                if (\n                  (typeof c === \"undefined\" ? \"undefined\" : _typeof(c)) ===\n                    \"object\" &&\n                  _typeof(c.audio) === \"object\"\n                ) {\n                  c = JSON.parse(JSON.stringify(c));\n                  remap(c.audio, \"autoGainControl\", \"mozAutoGainControl\");\n                  remap(c.audio, \"noiseSuppression\", \"mozNoiseSuppression\");\n                }\n                return nativeGetUserMedia(c);\n              };\n\n              if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n                var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n                MediaStreamTrack.prototype.getSettings = function () {\n                  var obj = nativeGetSettings.apply(this, arguments);\n                  remap(obj, \"mozAutoGainControl\", \"autoGainControl\");\n                  remap(obj, \"mozNoiseSuppression\", \"noiseSuppression\");\n                  return obj;\n                };\n              }\n\n              if (\n                MediaStreamTrack &&\n                MediaStreamTrack.prototype.applyConstraints\n              ) {\n                var nativeApplyConstraints =\n                  MediaStreamTrack.prototype.applyConstraints;\n                MediaStreamTrack.prototype.applyConstraints = function (c) {\n                  if (\n                    this.kind === \"audio\" &&\n                    (typeof c === \"undefined\" ? \"undefined\" : _typeof(c)) ===\n                      \"object\"\n                  ) {\n                    c = JSON.parse(JSON.stringify(c));\n                    remap(c, \"autoGainControl\", \"mozAutoGainControl\");\n                    remap(c, \"noiseSuppression\", \"mozNoiseSuppression\");\n                  }\n                  return nativeApplyConstraints.apply(this, [c]);\n                };\n              }\n            }\n          }\n        },\n        { \"../utils\": 15 },\n      ],\n      14: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true,\n          });\n\n          var _typeof =\n            typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n              ? function (obj) {\n                  return typeof obj;\n                }\n              : function (obj) {\n                  return obj &&\n                    typeof Symbol === \"function\" &&\n                    obj.constructor === Symbol &&\n                    obj !== Symbol.prototype\n                    ? \"symbol\"\n                    : typeof obj;\n                };\n\n          exports.shimLocalStreamsAPI = shimLocalStreamsAPI;\n          exports.shimRemoteStreamsAPI = shimRemoteStreamsAPI;\n          exports.shimCallbacksAPI = shimCallbacksAPI;\n          exports.shimGetUserMedia = shimGetUserMedia;\n          exports.shimConstraints = shimConstraints;\n          exports.shimRTCIceServerUrls = shimRTCIceServerUrls;\n          exports.shimTrackEventTransceiver = shimTrackEventTransceiver;\n          exports.shimCreateOfferLegacy = shimCreateOfferLegacy;\n          exports.shimAudioContext = shimAudioContext;\n\n          var _utils = require(\"../utils\");\n\n          var utils = _interopRequireWildcard(_utils);\n\n          function _interopRequireWildcard(obj) {\n            if (obj && obj.__esModule) {\n              return obj;\n            } else {\n              var newObj = {};\n              if (obj != null) {\n                for (var key in obj) {\n                  if (Object.prototype.hasOwnProperty.call(obj, key))\n                    newObj[key] = obj[key];\n                }\n              }\n              newObj.default = obj;\n              return newObj;\n            }\n          }\n\n          function shimLocalStreamsAPI(window) {\n            if (\n              (typeof window === \"undefined\"\n                ? \"undefined\"\n                : _typeof(window)) !== \"object\" ||\n              !window.RTCPeerConnection\n            ) {\n              return;\n            }\n            if (!(\"getLocalStreams\" in window.RTCPeerConnection.prototype)) {\n              window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n                if (!this._localStreams) {\n                  this._localStreams = [];\n                }\n                return this._localStreams;\n              };\n            }\n            if (!(\"addStream\" in window.RTCPeerConnection.prototype)) {\n              var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n              window.RTCPeerConnection.prototype.addStream = function addStream(\n                stream\n              ) {\n                var _this = this;\n\n                if (!this._localStreams) {\n                  this._localStreams = [];\n                }\n                if (!this._localStreams.includes(stream)) {\n                  this._localStreams.push(stream);\n                }\n                // Try to emulate Chrome's behaviour of adding in audio-video order.\n                // Safari orders by track id.\n                stream.getAudioTracks().forEach(function (track) {\n                  return _addTrack.call(_this, track, stream);\n                });\n                stream.getVideoTracks().forEach(function (track) {\n                  return _addTrack.call(_this, track, stream);\n                });\n              };\n\n              window.RTCPeerConnection.prototype.addTrack = function addTrack(\n                track\n              ) {\n                var _this2 = this;\n\n                for (\n                  var _len = arguments.length,\n                    streams = Array(_len > 1 ? _len - 1 : 0),\n                    _key = 1;\n                  _key < _len;\n                  _key++\n                ) {\n                  streams[_key - 1] = arguments[_key];\n                }\n\n                if (streams) {\n                  streams.forEach(function (stream) {\n                    if (!_this2._localStreams) {\n                      _this2._localStreams = [stream];\n                    } else if (!_this2._localStreams.includes(stream)) {\n                      _this2._localStreams.push(stream);\n                    }\n                  });\n                }\n                return _addTrack.apply(this, arguments);\n              };\n            }\n            if (!(\"removeStream\" in window.RTCPeerConnection.prototype)) {\n              window.RTCPeerConnection.prototype.removeStream = function removeStream(\n                stream\n              ) {\n                var _this3 = this;\n\n                if (!this._localStreams) {\n                  this._localStreams = [];\n                }\n                var index = this._localStreams.indexOf(stream);\n                if (index === -1) {\n                  return;\n                }\n                this._localStreams.splice(index, 1);\n                var tracks = stream.getTracks();\n                this.getSenders().forEach(function (sender) {\n                  if (tracks.includes(sender.track)) {\n                    _this3.removeTrack(sender);\n                  }\n                });\n              };\n            }\n          }\n\n          function shimRemoteStreamsAPI(window) {\n            if (\n              (typeof window === \"undefined\"\n                ? \"undefined\"\n                : _typeof(window)) !== \"object\" ||\n              !window.RTCPeerConnection\n            ) {\n              return;\n            }\n            if (!(\"getRemoteStreams\" in window.RTCPeerConnection.prototype)) {\n              window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\n                return this._remoteStreams ? this._remoteStreams : [];\n              };\n            }\n            if (!(\"onaddstream\" in window.RTCPeerConnection.prototype)) {\n              Object.defineProperty(\n                window.RTCPeerConnection.prototype,\n                \"onaddstream\",\n                {\n                  get: function get() {\n                    return this._onaddstream;\n                  },\n                  set: function set(f) {\n                    var _this4 = this;\n\n                    if (this._onaddstream) {\n                      this.removeEventListener(\"addstream\", this._onaddstream);\n                      this.removeEventListener(\"track\", this._onaddstreampoly);\n                    }\n                    this.addEventListener(\"addstream\", (this._onaddstream = f));\n                    this.addEventListener(\n                      \"track\",\n                      (this._onaddstreampoly = function (e) {\n                        e.streams.forEach(function (stream) {\n                          if (!_this4._remoteStreams) {\n                            _this4._remoteStreams = [];\n                          }\n                          if (_this4._remoteStreams.includes(stream)) {\n                            return;\n                          }\n                          _this4._remoteStreams.push(stream);\n                          var event = new Event(\"addstream\");\n                          event.stream = stream;\n                          _this4.dispatchEvent(event);\n                        });\n                      })\n                    );\n                  },\n                }\n              );\n              var origSetRemoteDescription =\n                window.RTCPeerConnection.prototype.setRemoteDescription;\n              window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n                var pc = this;\n                if (!this._onaddstreampoly) {\n                  this.addEventListener(\n                    \"track\",\n                    (this._onaddstreampoly = function (e) {\n                      e.streams.forEach(function (stream) {\n                        if (!pc._remoteStreams) {\n                          pc._remoteStreams = [];\n                        }\n                        if (pc._remoteStreams.indexOf(stream) >= 0) {\n                          return;\n                        }\n                        pc._remoteStreams.push(stream);\n                        var event = new Event(\"addstream\");\n                        event.stream = stream;\n                        pc.dispatchEvent(event);\n                      });\n                    })\n                  );\n                }\n                return origSetRemoteDescription.apply(pc, arguments);\n              };\n            }\n          }\n\n          function shimCallbacksAPI(window) {\n            if (\n              (typeof window === \"undefined\"\n                ? \"undefined\"\n                : _typeof(window)) !== \"object\" ||\n              !window.RTCPeerConnection\n            ) {\n              return;\n            }\n            var prototype = window.RTCPeerConnection.prototype;\n            var origCreateOffer = prototype.createOffer;\n            var origCreateAnswer = prototype.createAnswer;\n            var setLocalDescription = prototype.setLocalDescription;\n            var setRemoteDescription = prototype.setRemoteDescription;\n            var addIceCandidate = prototype.addIceCandidate;\n\n            prototype.createOffer = function createOffer(\n              successCallback,\n              failureCallback\n            ) {\n              var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n              var promise = origCreateOffer.apply(this, [options]);\n              if (!failureCallback) {\n                return promise;\n              }\n              promise.then(successCallback, failureCallback);\n              return Promise.resolve();\n            };\n\n            prototype.createAnswer = function createAnswer(\n              successCallback,\n              failureCallback\n            ) {\n              var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n              var promise = origCreateAnswer.apply(this, [options]);\n              if (!failureCallback) {\n                return promise;\n              }\n              promise.then(successCallback, failureCallback);\n              return Promise.resolve();\n            };\n\n            var withCallback = function withCallback(\n              description,\n              successCallback,\n              failureCallback\n            ) {\n              var promise = setLocalDescription.apply(this, [description]);\n              if (!failureCallback) {\n                return promise;\n              }\n              promise.then(successCallback, failureCallback);\n              return Promise.resolve();\n            };\n            prototype.setLocalDescription = withCallback;\n\n            withCallback = function withCallback(\n              description,\n              successCallback,\n              failureCallback\n            ) {\n              var promise = setRemoteDescription.apply(this, [description]);\n              if (!failureCallback) {\n                return promise;\n              }\n              promise.then(successCallback, failureCallback);\n              return Promise.resolve();\n            };\n            prototype.setRemoteDescription = withCallback;\n\n            withCallback = function withCallback(\n              candidate,\n              successCallback,\n              failureCallback\n            ) {\n              var promise = addIceCandidate.apply(this, [candidate]);\n              if (!failureCallback) {\n                return promise;\n              }\n              promise.then(successCallback, failureCallback);\n              return Promise.resolve();\n            };\n            prototype.addIceCandidate = withCallback;\n          }\n\n          function shimGetUserMedia(window) {\n            var navigator = window && window.navigator;\n\n            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n              // shim not needed in Safari 12.1\n              var mediaDevices = navigator.mediaDevices;\n              var _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n              navigator.mediaDevices.getUserMedia = function (constraints) {\n                return _getUserMedia(shimConstraints(constraints));\n              };\n            }\n\n            if (\n              !navigator.getUserMedia &&\n              navigator.mediaDevices &&\n              navigator.mediaDevices.getUserMedia\n            ) {\n              navigator.getUserMedia = function getUserMedia(\n                constraints,\n                cb,\n                errcb\n              ) {\n                navigator.mediaDevices\n                  .getUserMedia(constraints)\n                  .then(cb, errcb);\n              }.bind(navigator);\n            }\n          }\n\n          function shimConstraints(constraints) {\n            if (constraints && constraints.video !== undefined) {\n              return Object.assign({}, constraints, {\n                video: utils.compactObject(constraints.video),\n              });\n            }\n\n            return constraints;\n          }\n\n          function shimRTCIceServerUrls(window) {\n            if (!window.RTCPeerConnection) {\n              return;\n            }\n            // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n            var OrigPeerConnection = window.RTCPeerConnection;\n            window.RTCPeerConnection = function RTCPeerConnection(\n              pcConfig,\n              pcConstraints\n            ) {\n              if (pcConfig && pcConfig.iceServers) {\n                var newIceServers = [];\n                for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                  var server = pcConfig.iceServers[i];\n                  if (\n                    !server.hasOwnProperty(\"urls\") &&\n                    server.hasOwnProperty(\"url\")\n                  ) {\n                    utils.deprecated(\"RTCIceServer.url\", \"RTCIceServer.urls\");\n                    server = JSON.parse(JSON.stringify(server));\n                    server.urls = server.url;\n                    delete server.url;\n                    newIceServers.push(server);\n                  } else {\n                    newIceServers.push(pcConfig.iceServers[i]);\n                  }\n                }\n                pcConfig.iceServers = newIceServers;\n              }\n              return new OrigPeerConnection(pcConfig, pcConstraints);\n            };\n            window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n            // wrap static methods. Currently just generateCertificate.\n            if (\"generateCertificate\" in OrigPeerConnection) {\n              Object.defineProperty(\n                window.RTCPeerConnection,\n                \"generateCertificate\",\n                {\n                  get: function get() {\n                    return OrigPeerConnection.generateCertificate;\n                  },\n                }\n              );\n            }\n          }\n\n          function shimTrackEventTransceiver(window) {\n            // Add event.transceiver member over deprecated event.receiver\n            if (\n              (typeof window === \"undefined\"\n                ? \"undefined\"\n                : _typeof(window)) === \"object\" &&\n              window.RTCTrackEvent &&\n              \"receiver\" in window.RTCTrackEvent.prototype &&\n              !(\"transceiver\" in window.RTCTrackEvent.prototype)\n            ) {\n              Object.defineProperty(\n                window.RTCTrackEvent.prototype,\n                \"transceiver\",\n                {\n                  get: function get() {\n                    return { receiver: this.receiver };\n                  },\n                }\n              );\n            }\n          }\n\n          function shimCreateOfferLegacy(window) {\n            var origCreateOffer =\n              window.RTCPeerConnection.prototype.createOffer;\n            window.RTCPeerConnection.prototype.createOffer = function createOffer(\n              offerOptions\n            ) {\n              if (offerOptions) {\n                if (typeof offerOptions.offerToReceiveAudio !== \"undefined\") {\n                  // support bit values\n                  offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n                }\n                var audioTransceiver = this.getTransceivers().find(function (\n                  transceiver\n                ) {\n                  return transceiver.receiver.track.kind === \"audio\";\n                });\n                if (\n                  offerOptions.offerToReceiveAudio === false &&\n                  audioTransceiver\n                ) {\n                  if (audioTransceiver.direction === \"sendrecv\") {\n                    if (audioTransceiver.setDirection) {\n                      audioTransceiver.setDirection(\"sendonly\");\n                    } else {\n                      audioTransceiver.direction = \"sendonly\";\n                    }\n                  } else if (audioTransceiver.direction === \"recvonly\") {\n                    if (audioTransceiver.setDirection) {\n                      audioTransceiver.setDirection(\"inactive\");\n                    } else {\n                      audioTransceiver.direction = \"inactive\";\n                    }\n                  }\n                } else if (\n                  offerOptions.offerToReceiveAudio === true &&\n                  !audioTransceiver\n                ) {\n                  this.addTransceiver(\"audio\");\n                }\n\n                if (typeof offerOptions.offerToReceiveVideo !== \"undefined\") {\n                  // support bit values\n                  offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n                }\n                var videoTransceiver = this.getTransceivers().find(function (\n                  transceiver\n                ) {\n                  return transceiver.receiver.track.kind === \"video\";\n                });\n                if (\n                  offerOptions.offerToReceiveVideo === false &&\n                  videoTransceiver\n                ) {\n                  if (videoTransceiver.direction === \"sendrecv\") {\n                    if (videoTransceiver.setDirection) {\n                      videoTransceiver.setDirection(\"sendonly\");\n                    } else {\n                      videoTransceiver.direction = \"sendonly\";\n                    }\n                  } else if (videoTransceiver.direction === \"recvonly\") {\n                    if (videoTransceiver.setDirection) {\n                      videoTransceiver.setDirection(\"inactive\");\n                    } else {\n                      videoTransceiver.direction = \"inactive\";\n                    }\n                  }\n                } else if (\n                  offerOptions.offerToReceiveVideo === true &&\n                  !videoTransceiver\n                ) {\n                  this.addTransceiver(\"video\");\n                }\n              }\n              return origCreateOffer.apply(this, arguments);\n            };\n          }\n\n          function shimAudioContext(window) {\n            if (\n              (typeof window === \"undefined\"\n                ? \"undefined\"\n                : _typeof(window)) !== \"object\" ||\n              window.AudioContext\n            ) {\n              return;\n            }\n            window.AudioContext = window.webkitAudioContext;\n          }\n        },\n        { \"../utils\": 15 },\n      ],\n      15: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          /* eslint-env node */\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true,\n          });\n\n          var _typeof =\n            typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"\n              ? function (obj) {\n                  return typeof obj;\n                }\n              : function (obj) {\n                  return obj &&\n                    typeof Symbol === \"function\" &&\n                    obj.constructor === Symbol &&\n                    obj !== Symbol.prototype\n                    ? \"symbol\"\n                    : typeof obj;\n                };\n\n          exports.extractVersion = extractVersion;\n          exports.wrapPeerConnectionEvent = wrapPeerConnectionEvent;\n          exports.disableLog = disableLog;\n          exports.disableWarnings = disableWarnings;\n          exports.log = log;\n          exports.deprecated = deprecated;\n          exports.detectBrowser = detectBrowser;\n          exports.compactObject = compactObject;\n          exports.walkStats = walkStats;\n          exports.filterStats = filterStats;\n\n          function _defineProperty(obj, key, value) {\n            if (key in obj) {\n              Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true,\n              });\n            } else {\n              obj[key] = value;\n            }\n            return obj;\n          }\n\n          var logDisabled_ = true;\n          var deprecationWarnings_ = true;\n\n          /**\n           * Extract browser version out of the provided user agent string.\n           *\n           * @param {!string} uastring userAgent string.\n           * @param {!string} expr Regular expression used as match criteria.\n           * @param {!number} pos position in the version string to be returned.\n           * @return {!number} browser version.\n           */\n          function extractVersion(uastring, expr, pos) {\n            var match = uastring.match(expr);\n            return match && match.length >= pos && parseInt(match[pos], 10);\n          }\n\n          // Wraps the peerconnection event eventNameToWrap in a function\n          // which returns the modified event object (or false to prevent\n          // the event).\n          function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n            if (!window.RTCPeerConnection) {\n              return;\n            }\n            var proto = window.RTCPeerConnection.prototype;\n            var nativeAddEventListener = proto.addEventListener;\n            proto.addEventListener = function (nativeEventName, cb) {\n              if (nativeEventName !== eventNameToWrap) {\n                return nativeAddEventListener.apply(this, arguments);\n              }\n              var wrappedCallback = function wrappedCallback(e) {\n                var modifiedEvent = wrapper(e);\n                if (modifiedEvent) {\n                  if (cb.handleEvent) {\n                    cb.handleEvent(modifiedEvent);\n                  } else {\n                    cb(modifiedEvent);\n                  }\n                }\n              };\n              this._eventMap = this._eventMap || {};\n              if (!this._eventMap[eventNameToWrap]) {\n                this._eventMap[eventNameToWrap] = new Map();\n              }\n              this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n              return nativeAddEventListener.apply(this, [\n                nativeEventName,\n                wrappedCallback,\n              ]);\n            };\n\n            var nativeRemoveEventListener = proto.removeEventListener;\n            proto.removeEventListener = function (nativeEventName, cb) {\n              if (\n                nativeEventName !== eventNameToWrap ||\n                !this._eventMap ||\n                !this._eventMap[eventNameToWrap]\n              ) {\n                return nativeRemoveEventListener.apply(this, arguments);\n              }\n              if (!this._eventMap[eventNameToWrap].has(cb)) {\n                return nativeRemoveEventListener.apply(this, arguments);\n              }\n              var unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n              this._eventMap[eventNameToWrap].delete(cb);\n              if (this._eventMap[eventNameToWrap].size === 0) {\n                delete this._eventMap[eventNameToWrap];\n              }\n              if (Object.keys(this._eventMap).length === 0) {\n                delete this._eventMap;\n              }\n              return nativeRemoveEventListener.apply(this, [\n                nativeEventName,\n                unwrappedCb,\n              ]);\n            };\n\n            Object.defineProperty(proto, \"on\" + eventNameToWrap, {\n              get: function get() {\n                return this[\"_on\" + eventNameToWrap];\n              },\n              set: function set(cb) {\n                if (this[\"_on\" + eventNameToWrap]) {\n                  this.removeEventListener(\n                    eventNameToWrap,\n                    this[\"_on\" + eventNameToWrap]\n                  );\n                  delete this[\"_on\" + eventNameToWrap];\n                }\n                if (cb) {\n                  this.addEventListener(\n                    eventNameToWrap,\n                    (this[\"_on\" + eventNameToWrap] = cb)\n                  );\n                }\n              },\n\n              enumerable: true,\n              configurable: true,\n            });\n          }\n\n          function disableLog(bool) {\n            if (typeof bool !== \"boolean\") {\n              return new Error(\n                \"Argument type: \" +\n                  (typeof bool === \"undefined\" ? \"undefined\" : _typeof(bool)) +\n                  \". Please use a boolean.\"\n              );\n            }\n            logDisabled_ = bool;\n            return bool\n              ? \"adapter.js logging disabled\"\n              : \"adapter.js logging enabled\";\n          }\n\n          /**\n           * Disable or enable deprecation warnings\n           * @param {!boolean} bool set to true to disable warnings.\n           */\n          function disableWarnings(bool) {\n            if (typeof bool !== \"boolean\") {\n              return new Error(\n                \"Argument type: \" +\n                  (typeof bool === \"undefined\" ? \"undefined\" : _typeof(bool)) +\n                  \". Please use a boolean.\"\n              );\n            }\n            deprecationWarnings_ = !bool;\n            return (\n              \"adapter.js deprecation warnings \" +\n              (bool ? \"disabled\" : \"enabled\")\n            );\n          }\n\n          function log() {\n            if (\n              (typeof window === \"undefined\"\n                ? \"undefined\"\n                : _typeof(window)) === \"object\"\n            ) {\n              if (logDisabled_) {\n                return;\n              }\n              if (\n                typeof console !== \"undefined\" &&\n                typeof console.log === \"function\"\n              ) {\n                console.log.apply(console, arguments);\n              }\n            }\n          }\n\n          /**\n           * Shows a deprecation warning suggesting the modern and spec-compatible API.\n           */\n          function deprecated(oldMethod, newMethod) {\n            if (!deprecationWarnings_) {\n              return;\n            }\n            console.warn(\n              oldMethod +\n                \" is deprecated, please use \" +\n                newMethod +\n                \" instead.\"\n            );\n          }\n\n          /**\n           * Browser detector.\n           *\n           * @return {object} result containing browser and version\n           *     properties.\n           */\n          function detectBrowser(window) {\n            var navigator = window.navigator;\n\n            // Returned result object.\n\n            var result = { browser: null, version: null };\n\n            // Fail early if it's not a browser\n            if (typeof window === \"undefined\" || !window.navigator) {\n              result.browser = \"Not a browser.\";\n              return result;\n            }\n\n            if (navigator.mozGetUserMedia) {\n              // Firefox.\n              result.browser = \"firefox\";\n              result.version = extractVersion(\n                navigator.userAgent,\n                /Firefox\\/(\\d+)\\./,\n                1\n              );\n            } else if (\n              navigator.webkitGetUserMedia ||\n              (window.isSecureContext === false &&\n                window.webkitRTCPeerConnection &&\n                !window.RTCIceGatherer)\n            ) {\n              // Chrome, Chromium, Webview, Opera.\n              // Version matches Chrome/WebRTC version.\n              // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n              // more complicated fallback to webkitRTCPeerConnection.\n              result.browser = \"chrome\";\n              result.version = extractVersion(\n                navigator.userAgent,\n                /Chrom(e|ium)\\/(\\d+)\\./,\n                2\n              );\n            } else if (\n              navigator.mediaDevices &&\n              navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)\n            ) {\n              // Edge.\n              result.browser = \"edge\";\n              result.version = extractVersion(\n                navigator.userAgent,\n                /Edge\\/(\\d+).(\\d+)$/,\n                2\n              );\n            } else if (\n              window.RTCPeerConnection &&\n              navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)\n            ) {\n              // Safari.\n              result.browser = \"safari\";\n              result.version = extractVersion(\n                navigator.userAgent,\n                /AppleWebKit\\/(\\d+)\\./,\n                1\n              );\n              result.supportsUnifiedPlan =\n                window.RTCRtpTransceiver &&\n                \"currentDirection\" in window.RTCRtpTransceiver.prototype;\n            } else {\n              // Default fallthrough: not supported.\n              result.browser = \"Not a supported browser.\";\n              return result;\n            }\n\n            return result;\n          }\n\n          /**\n           * Checks if something is an object.\n           *\n           * @param {*} val The something you want to check.\n           * @return true if val is an object, false otherwise.\n           */\n          function isObject(val) {\n            return Object.prototype.toString.call(val) === \"[object Object]\";\n          }\n\n          /**\n           * Remove all empty objects and undefined values\n           * from a nested object -- an enhanced and vanilla version\n           * of Lodash's `compact`.\n           */\n          function compactObject(data) {\n            if (!isObject(data)) {\n              return data;\n            }\n\n            return Object.keys(data).reduce(function (accumulator, key) {\n              var isObj = isObject(data[key]);\n              var value = isObj ? compactObject(data[key]) : data[key];\n              var isEmptyObject = isObj && !Object.keys(value).length;\n              if (value === undefined || isEmptyObject) {\n                return accumulator;\n              }\n              return Object.assign(\n                accumulator,\n                _defineProperty({}, key, value)\n              );\n            }, {});\n          }\n\n          /* iterates the stats graph recursively. */\n          function walkStats(stats, base, resultSet) {\n            if (!base || resultSet.has(base.id)) {\n              return;\n            }\n            resultSet.set(base.id, base);\n            Object.keys(base).forEach(function (name) {\n              if (name.endsWith(\"Id\")) {\n                walkStats(stats, stats.get(base[name]), resultSet);\n              } else if (name.endsWith(\"Ids\")) {\n                base[name].forEach(function (id) {\n                  walkStats(stats, stats.get(id), resultSet);\n                });\n              }\n            });\n          }\n\n          /* filter getStats for a sender/receiver track. */\n          function filterStats(result, track, outbound) {\n            var streamStatsType = outbound ? \"outbound-rtp\" : \"inbound-rtp\";\n            var filteredResult = new Map();\n            if (track === null) {\n              return filteredResult;\n            }\n            var trackStats = [];\n            result.forEach(function (value) {\n              if (\n                value.type === \"track\" &&\n                value.trackIdentifier === track.id\n              ) {\n                trackStats.push(value);\n              }\n            });\n            trackStats.forEach(function (trackStat) {\n              result.forEach(function (stats) {\n                if (\n                  stats.type === streamStatsType &&\n                  stats.trackId === trackStat.id\n                ) {\n                  walkStats(result, stats, filteredResult);\n                }\n              });\n            });\n            return filteredResult;\n          }\n        },\n        {},\n      ],\n      16: [\n        function (require, module, exports) {\n          /*\n           *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n           *\n           *  Use of this source code is governed by a BSD-style license\n           *  that can be found in the LICENSE file in the root of the source\n           *  tree.\n           */\n          /* eslint-env node */\n          \"use strict\";\n\n          var SDPUtils = require(\"sdp\");\n\n          function fixStatsType(stat) {\n            return (\n              {\n                inboundrtp: \"inbound-rtp\",\n                outboundrtp: \"outbound-rtp\",\n                candidatepair: \"candidate-pair\",\n                localcandidate: \"local-candidate\",\n                remotecandidate: \"remote-candidate\",\n              }[stat.type] || stat.type\n            );\n          }\n\n          function writeMediaSection(\n            transceiver,\n            caps,\n            type,\n            stream,\n            dtlsRole\n          ) {\n            var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n            // Map ICE parameters (ufrag, pwd) to SDP.\n            sdp += SDPUtils.writeIceParameters(\n              transceiver.iceGatherer.getLocalParameters()\n            );\n\n            // Map DTLS parameters to SDP.\n            sdp += SDPUtils.writeDtlsParameters(\n              transceiver.dtlsTransport.getLocalParameters(),\n              type === \"offer\" ? \"actpass\" : dtlsRole || \"active\"\n            );\n\n            sdp += \"a=mid:\" + transceiver.mid + \"\\r\\n\";\n\n            if (transceiver.rtpSender && transceiver.rtpReceiver) {\n              sdp += \"a=sendrecv\\r\\n\";\n            } else if (transceiver.rtpSender) {\n              sdp += \"a=sendonly\\r\\n\";\n            } else if (transceiver.rtpReceiver) {\n              sdp += \"a=recvonly\\r\\n\";\n            } else {\n              sdp += \"a=inactive\\r\\n\";\n            }\n\n            if (transceiver.rtpSender) {\n              var trackId =\n                transceiver.rtpSender._initialTrackId ||\n                transceiver.rtpSender.track.id;\n              transceiver.rtpSender._initialTrackId = trackId;\n              // spec.\n              var msid =\n                \"msid:\" + (stream ? stream.id : \"-\") + \" \" + trackId + \"\\r\\n\";\n              sdp += \"a=\" + msid;\n              // for Chrome. Legacy should no longer be required.\n              sdp +=\n                \"a=ssrc:\" +\n                transceiver.sendEncodingParameters[0].ssrc +\n                \" \" +\n                msid;\n\n              // RTX\n              if (transceiver.sendEncodingParameters[0].rtx) {\n                sdp +=\n                  \"a=ssrc:\" +\n                  transceiver.sendEncodingParameters[0].rtx.ssrc +\n                  \" \" +\n                  msid;\n                sdp +=\n                  \"a=ssrc-group:FID \" +\n                  transceiver.sendEncodingParameters[0].ssrc +\n                  \" \" +\n                  transceiver.sendEncodingParameters[0].rtx.ssrc +\n                  \"\\r\\n\";\n              }\n            }\n            // FIXME: this should be written by writeRtpDescription.\n            sdp +=\n              \"a=ssrc:\" +\n              transceiver.sendEncodingParameters[0].ssrc +\n              \" cname:\" +\n              SDPUtils.localCName +\n              \"\\r\\n\";\n            if (\n              transceiver.rtpSender &&\n              transceiver.sendEncodingParameters[0].rtx\n            ) {\n              sdp +=\n                \"a=ssrc:\" +\n                transceiver.sendEncodingParameters[0].rtx.ssrc +\n                \" cname:\" +\n                SDPUtils.localCName +\n                \"\\r\\n\";\n            }\n            return sdp;\n          }\n\n          // Edge does not like\n          // 1) stun: filtered after 14393 unless ?transport=udp is present\n          // 2) turn: that does not have all of turn:host:port?transport=udp\n          // 3) turn: with ipv6 addresses\n          // 4) turn: occurring muliple times\n          function filterIceServers(iceServers, edgeVersion) {\n            var hasTurn = false;\n            iceServers = JSON.parse(JSON.stringify(iceServers));\n            return iceServers.filter(function (server) {\n              if (server && (server.urls || server.url)) {\n                var urls = server.urls || server.url;\n                if (server.url && !server.urls) {\n                  console.warn(\n                    \"RTCIceServer.url is deprecated! Use urls instead.\"\n                  );\n                }\n                var isString = typeof urls === \"string\";\n                if (isString) {\n                  urls = [urls];\n                }\n                urls = urls.filter(function (url) {\n                  var validTurn =\n                    url.indexOf(\"turn:\") === 0 &&\n                    url.indexOf(\"transport=udp\") !== -1 &&\n                    url.indexOf(\"turn:[\") === -1 &&\n                    !hasTurn;\n\n                  if (validTurn) {\n                    hasTurn = true;\n                    return true;\n                  }\n                  return (\n                    url.indexOf(\"stun:\") === 0 &&\n                    edgeVersion >= 14393 &&\n                    url.indexOf(\"?transport=udp\") === -1\n                  );\n                });\n\n                delete server.url;\n                server.urls = isString ? urls[0] : urls;\n                return !!urls.length;\n              }\n            });\n          }\n\n          // Determines the intersection of local and remote capabilities.\n          function getCommonCapabilities(\n            localCapabilities,\n            remoteCapabilities\n          ) {\n            var commonCapabilities = {\n              codecs: [],\n              headerExtensions: [],\n              fecMechanisms: [],\n            };\n\n            var findCodecByPayloadType = function (pt, codecs) {\n              pt = parseInt(pt, 10);\n              for (var i = 0; i < codecs.length; i++) {\n                if (\n                  codecs[i].payloadType === pt ||\n                  codecs[i].preferredPayloadType === pt\n                ) {\n                  return codecs[i];\n                }\n              }\n            };\n\n            var rtxCapabilityMatches = function (lRtx, rRtx, lCodecs, rCodecs) {\n              var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n              var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n              return (\n                lCodec &&\n                rCodec &&\n                lCodec.name.toLowerCase() === rCodec.name.toLowerCase()\n              );\n            };\n\n            localCapabilities.codecs.forEach(function (lCodec) {\n              for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n                var rCodec = remoteCapabilities.codecs[i];\n                if (\n                  lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n                  lCodec.clockRate === rCodec.clockRate\n                ) {\n                  if (\n                    lCodec.name.toLowerCase() === \"rtx\" &&\n                    lCodec.parameters &&\n                    rCodec.parameters.apt\n                  ) {\n                    // for RTX we need to find the local rtx that has a apt\n                    // which points to the same local codec as the remote one.\n                    if (\n                      !rtxCapabilityMatches(\n                        lCodec,\n                        rCodec,\n                        localCapabilities.codecs,\n                        remoteCapabilities.codecs\n                      )\n                    ) {\n                      continue;\n                    }\n                  }\n                  rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n                  // number of channels is the highest common number of channels\n                  rCodec.numChannels = Math.min(\n                    lCodec.numChannels,\n                    rCodec.numChannels\n                  );\n                  // push rCodec so we reply with offerer payload type\n                  commonCapabilities.codecs.push(rCodec);\n\n                  // determine common feedback mechanisms\n                  rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function (\n                    fb\n                  ) {\n                    for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n                      if (\n                        lCodec.rtcpFeedback[j].type === fb.type &&\n                        lCodec.rtcpFeedback[j].parameter === fb.parameter\n                      ) {\n                        return true;\n                      }\n                    }\n                    return false;\n                  });\n                  // FIXME: also need to determine .parameters\n                  //  see https://github.com/openpeer/ortc/issues/569\n                  break;\n                }\n              }\n            });\n\n            localCapabilities.headerExtensions.forEach(function (\n              lHeaderExtension\n            ) {\n              for (\n                var i = 0;\n                i < remoteCapabilities.headerExtensions.length;\n                i++\n              ) {\n                var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n                if (lHeaderExtension.uri === rHeaderExtension.uri) {\n                  commonCapabilities.headerExtensions.push(rHeaderExtension);\n                  break;\n                }\n              }\n            });\n\n            // FIXME: fecMechanisms\n            return commonCapabilities;\n          }\n\n          // is action=setLocalDescription with type allowed in signalingState\n          function isActionAllowedInSignalingState(\n            action,\n            type,\n            signalingState\n          ) {\n            return (\n              {\n                offer: {\n                  setLocalDescription: [\"stable\", \"have-local-offer\"],\n                  setRemoteDescription: [\"stable\", \"have-remote-offer\"],\n                },\n                answer: {\n                  setLocalDescription: [\n                    \"have-remote-offer\",\n                    \"have-local-pranswer\",\n                  ],\n                  setRemoteDescription: [\n                    \"have-local-offer\",\n                    \"have-remote-pranswer\",\n                  ],\n                },\n              }[type][action].indexOf(signalingState) !== -1\n            );\n          }\n\n          function maybeAddCandidate(iceTransport, candidate) {\n            // Edge's internal representation adds some fields therefore\n            // not all fieldѕ are taken into account.\n            var alreadyAdded = iceTransport\n              .getRemoteCandidates()\n              .find(function (remoteCandidate) {\n                return (\n                  candidate.foundation === remoteCandidate.foundation &&\n                  candidate.ip === remoteCandidate.ip &&\n                  candidate.port === remoteCandidate.port &&\n                  candidate.priority === remoteCandidate.priority &&\n                  candidate.protocol === remoteCandidate.protocol &&\n                  candidate.type === remoteCandidate.type\n                );\n              });\n            if (!alreadyAdded) {\n              iceTransport.addRemoteCandidate(candidate);\n            }\n            return !alreadyAdded;\n          }\n\n          function makeError(name, description) {\n            var e = new Error(description);\n            e.name = name;\n            // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n            e.code = {\n              NotSupportedError: 9,\n              InvalidStateError: 11,\n              InvalidAccessError: 15,\n              TypeError: undefined,\n              OperationError: undefined,\n            }[name];\n            return e;\n          }\n\n          module.exports = function (window, edgeVersion) {\n            // https://w3c.github.io/mediacapture-main/#mediastream\n            // Helper function to add the track to the stream and\n            // dispatch the event ourselves.\n            function addTrackToStreamAndFireEvent(track, stream) {\n              stream.addTrack(track);\n              stream.dispatchEvent(\n                new window.MediaStreamTrackEvent(\"addtrack\", { track: track })\n              );\n            }\n\n            function removeTrackFromStreamAndFireEvent(track, stream) {\n              stream.removeTrack(track);\n              stream.dispatchEvent(\n                new window.MediaStreamTrackEvent(\"removetrack\", {\n                  track: track,\n                })\n              );\n            }\n\n            function fireAddTrack(pc, track, receiver, streams) {\n              var trackEvent = new Event(\"track\");\n              trackEvent.track = track;\n              trackEvent.receiver = receiver;\n              trackEvent.transceiver = { receiver: receiver };\n              trackEvent.streams = streams;\n              window.setTimeout(function () {\n                pc._dispatchEvent(\"track\", trackEvent);\n              });\n            }\n\n            var RTCPeerConnection = function (config) {\n              var pc = this;\n\n              var _eventTarget = document.createDocumentFragment();\n              [\n                \"addEventListener\",\n                \"removeEventListener\",\n                \"dispatchEvent\",\n              ].forEach(function (method) {\n                pc[method] = _eventTarget[method].bind(_eventTarget);\n              });\n\n              this.canTrickleIceCandidates = null;\n\n              this.needNegotiation = false;\n\n              this.localStreams = [];\n              this.remoteStreams = [];\n\n              this._localDescription = null;\n              this._remoteDescription = null;\n\n              this.signalingState = \"stable\";\n              this.iceConnectionState = \"new\";\n              this.connectionState = \"new\";\n              this.iceGatheringState = \"new\";\n\n              config = JSON.parse(JSON.stringify(config || {}));\n\n              this.usingBundle = config.bundlePolicy === \"max-bundle\";\n              if (config.rtcpMuxPolicy === \"negotiate\") {\n                throw makeError(\n                  \"NotSupportedError\",\n                  \"rtcpMuxPolicy 'negotiate' is not supported\"\n                );\n              } else if (!config.rtcpMuxPolicy) {\n                config.rtcpMuxPolicy = \"require\";\n              }\n\n              switch (config.iceTransportPolicy) {\n                case \"all\":\n                case \"relay\":\n                  break;\n                default:\n                  config.iceTransportPolicy = \"all\";\n                  break;\n              }\n\n              switch (config.bundlePolicy) {\n                case \"balanced\":\n                case \"max-compat\":\n                case \"max-bundle\":\n                  break;\n                default:\n                  config.bundlePolicy = \"balanced\";\n                  break;\n              }\n\n              config.iceServers = filterIceServers(\n                config.iceServers || [],\n                edgeVersion\n              );\n\n              this._iceGatherers = [];\n              if (config.iceCandidatePoolSize) {\n                for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n                  this._iceGatherers.push(\n                    new window.RTCIceGatherer({\n                      iceServers: config.iceServers,\n                      gatherPolicy: config.iceTransportPolicy,\n                    })\n                  );\n                }\n              } else {\n                config.iceCandidatePoolSize = 0;\n              }\n\n              this._config = config;\n\n              // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n              // everything that is needed to describe a SDP m-line.\n              this.transceivers = [];\n\n              this._sdpSessionId = SDPUtils.generateSessionId();\n              this._sdpSessionVersion = 0;\n\n              this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n              this._isClosed = false;\n            };\n\n            Object.defineProperty(\n              RTCPeerConnection.prototype,\n              \"localDescription\",\n              {\n                configurable: true,\n                get: function () {\n                  return this._localDescription;\n                },\n              }\n            );\n            Object.defineProperty(\n              RTCPeerConnection.prototype,\n              \"remoteDescription\",\n              {\n                configurable: true,\n                get: function () {\n                  return this._remoteDescription;\n                },\n              }\n            );\n\n            // set up event handlers on prototype\n            RTCPeerConnection.prototype.onicecandidate = null;\n            RTCPeerConnection.prototype.onaddstream = null;\n            RTCPeerConnection.prototype.ontrack = null;\n            RTCPeerConnection.prototype.onremovestream = null;\n            RTCPeerConnection.prototype.onsignalingstatechange = null;\n            RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n            RTCPeerConnection.prototype.onconnectionstatechange = null;\n            RTCPeerConnection.prototype.onicegatheringstatechange = null;\n            RTCPeerConnection.prototype.onnegotiationneeded = null;\n            RTCPeerConnection.prototype.ondatachannel = null;\n\n            RTCPeerConnection.prototype._dispatchEvent = function (\n              name,\n              event\n            ) {\n              if (this._isClosed) {\n                return;\n              }\n              this.dispatchEvent(event);\n              if (typeof this[\"on\" + name] === \"function\") {\n                this[\"on\" + name](event);\n              }\n            };\n\n            RTCPeerConnection.prototype._emitGatheringStateChange = function () {\n              var event = new Event(\"icegatheringstatechange\");\n              this._dispatchEvent(\"icegatheringstatechange\", event);\n            };\n\n            RTCPeerConnection.prototype.getConfiguration = function () {\n              return this._config;\n            };\n\n            RTCPeerConnection.prototype.getLocalStreams = function () {\n              return this.localStreams;\n            };\n\n            RTCPeerConnection.prototype.getRemoteStreams = function () {\n              return this.remoteStreams;\n            };\n\n            // internal helper to create a transceiver object.\n            // (which is not yet the same as the WebRTC 1.0 transceiver)\n            RTCPeerConnection.prototype._createTransceiver = function (\n              kind,\n              doNotAdd\n            ) {\n              var hasBundleTransport = this.transceivers.length > 0;\n              var transceiver = {\n                track: null,\n                iceGatherer: null,\n                iceTransport: null,\n                dtlsTransport: null,\n                localCapabilities: null,\n                remoteCapabilities: null,\n                rtpSender: null,\n                rtpReceiver: null,\n                kind: kind,\n                mid: null,\n                sendEncodingParameters: null,\n                recvEncodingParameters: null,\n                stream: null,\n                associatedRemoteMediaStreams: [],\n                wantReceive: true,\n              };\n              if (this.usingBundle && hasBundleTransport) {\n                transceiver.iceTransport = this.transceivers[0].iceTransport;\n                transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n              } else {\n                var transports = this._createIceAndDtlsTransports();\n                transceiver.iceTransport = transports.iceTransport;\n                transceiver.dtlsTransport = transports.dtlsTransport;\n              }\n              if (!doNotAdd) {\n                this.transceivers.push(transceiver);\n              }\n              return transceiver;\n            };\n\n            RTCPeerConnection.prototype.addTrack = function (track, stream) {\n              if (this._isClosed) {\n                throw makeError(\n                  \"InvalidStateError\",\n                  \"Attempted to call addTrack on a closed peerconnection.\"\n                );\n              }\n\n              var alreadyExists = this.transceivers.find(function (s) {\n                return s.track === track;\n              });\n\n              if (alreadyExists) {\n                throw makeError(\"InvalidAccessError\", \"Track already exists.\");\n              }\n\n              var transceiver;\n              for (var i = 0; i < this.transceivers.length; i++) {\n                if (\n                  !this.transceivers[i].track &&\n                  this.transceivers[i].kind === track.kind\n                ) {\n                  transceiver = this.transceivers[i];\n                }\n              }\n              if (!transceiver) {\n                transceiver = this._createTransceiver(track.kind);\n              }\n\n              this._maybeFireNegotiationNeeded();\n\n              if (this.localStreams.indexOf(stream) === -1) {\n                this.localStreams.push(stream);\n              }\n\n              transceiver.track = track;\n              transceiver.stream = stream;\n              transceiver.rtpSender = new window.RTCRtpSender(\n                track,\n                transceiver.dtlsTransport\n              );\n              return transceiver.rtpSender;\n            };\n\n            RTCPeerConnection.prototype.addStream = function (stream) {\n              var pc = this;\n              if (edgeVersion >= 15025) {\n                stream.getTracks().forEach(function (track) {\n                  pc.addTrack(track, stream);\n                });\n              } else {\n                // Clone is necessary for local demos mostly, attaching directly\n                // to two different senders does not work (build 10547).\n                // Fixed in 15025 (or earlier)\n                var clonedStream = stream.clone();\n                stream.getTracks().forEach(function (track, idx) {\n                  var clonedTrack = clonedStream.getTracks()[idx];\n                  track.addEventListener(\"enabled\", function (event) {\n                    clonedTrack.enabled = event.enabled;\n                  });\n                });\n                clonedStream.getTracks().forEach(function (track) {\n                  pc.addTrack(track, clonedStream);\n                });\n              }\n            };\n\n            RTCPeerConnection.prototype.removeTrack = function (sender) {\n              if (this._isClosed) {\n                throw makeError(\n                  \"InvalidStateError\",\n                  \"Attempted to call removeTrack on a closed peerconnection.\"\n                );\n              }\n\n              if (!(sender instanceof window.RTCRtpSender)) {\n                throw new TypeError(\n                  \"Argument 1 of RTCPeerConnection.removeTrack \" +\n                    \"does not implement interface RTCRtpSender.\"\n                );\n              }\n\n              var transceiver = this.transceivers.find(function (t) {\n                return t.rtpSender === sender;\n              });\n\n              if (!transceiver) {\n                throw makeError(\n                  \"InvalidAccessError\",\n                  \"Sender was not created by this connection.\"\n                );\n              }\n              var stream = transceiver.stream;\n\n              transceiver.rtpSender.stop();\n              transceiver.rtpSender = null;\n              transceiver.track = null;\n              transceiver.stream = null;\n\n              // remove the stream from the set of local streams\n              var localStreams = this.transceivers.map(function (t) {\n                return t.stream;\n              });\n              if (\n                localStreams.indexOf(stream) === -1 &&\n                this.localStreams.indexOf(stream) > -1\n              ) {\n                this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n              }\n\n              this._maybeFireNegotiationNeeded();\n            };\n\n            RTCPeerConnection.prototype.removeStream = function (stream) {\n              var pc = this;\n              stream.getTracks().forEach(function (track) {\n                var sender = pc.getSenders().find(function (s) {\n                  return s.track === track;\n                });\n                if (sender) {\n                  pc.removeTrack(sender);\n                }\n              });\n            };\n\n            RTCPeerConnection.prototype.getSenders = function () {\n              return this.transceivers\n                .filter(function (transceiver) {\n                  return !!transceiver.rtpSender;\n                })\n                .map(function (transceiver) {\n                  return transceiver.rtpSender;\n                });\n            };\n\n            RTCPeerConnection.prototype.getReceivers = function () {\n              return this.transceivers\n                .filter(function (transceiver) {\n                  return !!transceiver.rtpReceiver;\n                })\n                .map(function (transceiver) {\n                  return transceiver.rtpReceiver;\n                });\n            };\n\n            RTCPeerConnection.prototype._createIceGatherer = function (\n              sdpMLineIndex,\n              usingBundle\n            ) {\n              var pc = this;\n              if (usingBundle && sdpMLineIndex > 0) {\n                return this.transceivers[0].iceGatherer;\n              } else if (this._iceGatherers.length) {\n                return this._iceGatherers.shift();\n              }\n              var iceGatherer = new window.RTCIceGatherer({\n                iceServers: this._config.iceServers,\n                gatherPolicy: this._config.iceTransportPolicy,\n              });\n              Object.defineProperty(iceGatherer, \"state\", {\n                value: \"new\",\n                writable: true,\n              });\n\n              this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n              this.transceivers[sdpMLineIndex].bufferCandidates = function (\n                event\n              ) {\n                var end =\n                  !event.candidate || Object.keys(event.candidate).length === 0;\n                // polyfill since RTCIceGatherer.state is not implemented in\n                // Edge 10547 yet.\n                iceGatherer.state = end ? \"completed\" : \"gathering\";\n                if (\n                  pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !==\n                  null\n                ) {\n                  pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(\n                    event\n                  );\n                }\n              };\n              iceGatherer.addEventListener(\n                \"localcandidate\",\n                this.transceivers[sdpMLineIndex].bufferCandidates\n              );\n              return iceGatherer;\n            };\n\n            // start gathering from an RTCIceGatherer.\n            RTCPeerConnection.prototype._gather = function (\n              mid,\n              sdpMLineIndex\n            ) {\n              var pc = this;\n              var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n              if (iceGatherer.onlocalcandidate) {\n                return;\n              }\n              var bufferedCandidateEvents = this.transceivers[sdpMLineIndex]\n                .bufferedCandidateEvents;\n              this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n              iceGatherer.removeEventListener(\n                \"localcandidate\",\n                this.transceivers[sdpMLineIndex].bufferCandidates\n              );\n              iceGatherer.onlocalcandidate = function (evt) {\n                if (pc.usingBundle && sdpMLineIndex > 0) {\n                  // if we know that we use bundle we can drop candidates with\n                  // ѕdpMLineIndex > 0. If we don't do this then our state gets\n                  // confused since we dispose the extra ice gatherer.\n                  return;\n                }\n                var event = new Event(\"icecandidate\");\n                event.candidate = { sdpMid: mid, sdpMLineIndex: sdpMLineIndex };\n\n                var cand = evt.candidate;\n                // Edge emits an empty object for RTCIceCandidateComplete‥\n                var end = !cand || Object.keys(cand).length === 0;\n                if (end) {\n                  // polyfill since RTCIceGatherer.state is not implemented in\n                  // Edge 10547 yet.\n                  if (\n                    iceGatherer.state === \"new\" ||\n                    iceGatherer.state === \"gathering\"\n                  ) {\n                    iceGatherer.state = \"completed\";\n                  }\n                } else {\n                  if (iceGatherer.state === \"new\") {\n                    iceGatherer.state = \"gathering\";\n                  }\n                  // RTCIceCandidate doesn't have a component, needs to be added\n                  cand.component = 1;\n                  // also the usernameFragment. TODO: update SDP to take both variants.\n                  cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n                  var serializedCandidate = SDPUtils.writeCandidate(cand);\n                  event.candidate = Object.assign(\n                    event.candidate,\n                    SDPUtils.parseCandidate(serializedCandidate)\n                  );\n\n                  event.candidate.candidate = serializedCandidate;\n                  event.candidate.toJSON = function () {\n                    return {\n                      candidate: event.candidate.candidate,\n                      sdpMid: event.candidate.sdpMid,\n                      sdpMLineIndex: event.candidate.sdpMLineIndex,\n                      usernameFragment: event.candidate.usernameFragment,\n                    };\n                  };\n                }\n\n                // update local description.\n                var sections = SDPUtils.getMediaSections(\n                  pc._localDescription.sdp\n                );\n                if (!end) {\n                  sections[event.candidate.sdpMLineIndex] +=\n                    \"a=\" + event.candidate.candidate + \"\\r\\n\";\n                } else {\n                  sections[event.candidate.sdpMLineIndex] +=\n                    \"a=end-of-candidates\\r\\n\";\n                }\n                pc._localDescription.sdp =\n                  SDPUtils.getDescription(pc._localDescription.sdp) +\n                  sections.join(\"\");\n                var complete = pc.transceivers.every(function (transceiver) {\n                  return (\n                    transceiver.iceGatherer &&\n                    transceiver.iceGatherer.state === \"completed\"\n                  );\n                });\n\n                if (pc.iceGatheringState !== \"gathering\") {\n                  pc.iceGatheringState = \"gathering\";\n                  pc._emitGatheringStateChange();\n                }\n\n                // Emit candidate. Also emit null candidate when all gatherers are\n                // complete.\n                if (!end) {\n                  pc._dispatchEvent(\"icecandidate\", event);\n                }\n                if (complete) {\n                  pc._dispatchEvent(\"icecandidate\", new Event(\"icecandidate\"));\n                  pc.iceGatheringState = \"complete\";\n                  pc._emitGatheringStateChange();\n                }\n              };\n\n              // emit already gathered candidates.\n              window.setTimeout(function () {\n                bufferedCandidateEvents.forEach(function (e) {\n                  iceGatherer.onlocalcandidate(e);\n                });\n              }, 0);\n            };\n\n            // Create ICE transport and DTLS transport.\n            RTCPeerConnection.prototype._createIceAndDtlsTransports = function () {\n              var pc = this;\n              var iceTransport = new window.RTCIceTransport(null);\n              iceTransport.onicestatechange = function () {\n                pc._updateIceConnectionState();\n                pc._updateConnectionState();\n              };\n\n              var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n              dtlsTransport.ondtlsstatechange = function () {\n                pc._updateConnectionState();\n              };\n              dtlsTransport.onerror = function () {\n                // onerror does not set state to failed by itself.\n                Object.defineProperty(dtlsTransport, \"state\", {\n                  value: \"failed\",\n                  writable: true,\n                });\n                pc._updateConnectionState();\n              };\n\n              return {\n                iceTransport: iceTransport,\n                dtlsTransport: dtlsTransport,\n              };\n            };\n\n            // Destroy ICE gatherer, ICE transport and DTLS transport.\n            // Without triggering the callbacks.\n            RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function (\n              sdpMLineIndex\n            ) {\n              var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n              if (iceGatherer) {\n                delete iceGatherer.onlocalcandidate;\n                delete this.transceivers[sdpMLineIndex].iceGatherer;\n              }\n              var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n              if (iceTransport) {\n                delete iceTransport.onicestatechange;\n                delete this.transceivers[sdpMLineIndex].iceTransport;\n              }\n              var dtlsTransport = this.transceivers[sdpMLineIndex]\n                .dtlsTransport;\n              if (dtlsTransport) {\n                delete dtlsTransport.ondtlsstatechange;\n                delete dtlsTransport.onerror;\n                delete this.transceivers[sdpMLineIndex].dtlsTransport;\n              }\n            };\n\n            // Start the RTP Sender and Receiver for a transceiver.\n            RTCPeerConnection.prototype._transceive = function (\n              transceiver,\n              send,\n              recv\n            ) {\n              var params = getCommonCapabilities(\n                transceiver.localCapabilities,\n                transceiver.remoteCapabilities\n              );\n              if (send && transceiver.rtpSender) {\n                params.encodings = transceiver.sendEncodingParameters;\n                params.rtcp = {\n                  cname: SDPUtils.localCName,\n                  compound: transceiver.rtcpParameters.compound,\n                };\n                if (transceiver.recvEncodingParameters.length) {\n                  params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n                }\n                transceiver.rtpSender.send(params);\n              }\n              if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n                // remove RTX field in Edge 14942\n                if (\n                  transceiver.kind === \"video\" &&\n                  transceiver.recvEncodingParameters &&\n                  edgeVersion < 15019\n                ) {\n                  transceiver.recvEncodingParameters.forEach(function (p) {\n                    delete p.rtx;\n                  });\n                }\n                if (transceiver.recvEncodingParameters.length) {\n                  params.encodings = transceiver.recvEncodingParameters;\n                } else {\n                  params.encodings = [{}];\n                }\n                params.rtcp = {\n                  compound: transceiver.rtcpParameters.compound,\n                };\n                if (transceiver.rtcpParameters.cname) {\n                  params.rtcp.cname = transceiver.rtcpParameters.cname;\n                }\n                if (transceiver.sendEncodingParameters.length) {\n                  params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n                }\n                transceiver.rtpReceiver.receive(params);\n              }\n            };\n\n            RTCPeerConnection.prototype.setLocalDescription = function (\n              description\n            ) {\n              var pc = this;\n\n              // Note: pranswer is not supported.\n              if ([\"offer\", \"answer\"].indexOf(description.type) === -1) {\n                return Promise.reject(\n                  makeError(\n                    \"TypeError\",\n                    'Unsupported type \"' + description.type + '\"'\n                  )\n                );\n              }\n\n              if (\n                !isActionAllowedInSignalingState(\n                  \"setLocalDescription\",\n                  description.type,\n                  pc.signalingState\n                ) ||\n                pc._isClosed\n              ) {\n                return Promise.reject(\n                  makeError(\n                    \"InvalidStateError\",\n                    \"Can not set local \" +\n                      description.type +\n                      \" in state \" +\n                      pc.signalingState\n                  )\n                );\n              }\n\n              var sections;\n              var sessionpart;\n              if (description.type === \"offer\") {\n                // VERY limited support for SDP munging. Limited to:\n                // * changing the order of codecs\n                sections = SDPUtils.splitSections(description.sdp);\n                sessionpart = sections.shift();\n                sections.forEach(function (mediaSection, sdpMLineIndex) {\n                  var caps = SDPUtils.parseRtpParameters(mediaSection);\n                  pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n                });\n\n                pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n                  pc._gather(transceiver.mid, sdpMLineIndex);\n                });\n              } else if (description.type === \"answer\") {\n                sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n                sessionpart = sections.shift();\n                var isIceLite =\n                  SDPUtils.matchPrefix(sessionpart, \"a=ice-lite\").length > 0;\n                sections.forEach(function (mediaSection, sdpMLineIndex) {\n                  var transceiver = pc.transceivers[sdpMLineIndex];\n                  var iceGatherer = transceiver.iceGatherer;\n                  var iceTransport = transceiver.iceTransport;\n                  var dtlsTransport = transceiver.dtlsTransport;\n                  var localCapabilities = transceiver.localCapabilities;\n                  var remoteCapabilities = transceiver.remoteCapabilities;\n\n                  // treat bundle-only as not-rejected.\n                  var rejected =\n                    SDPUtils.isRejected(mediaSection) &&\n                    SDPUtils.matchPrefix(mediaSection, \"a=bundle-only\")\n                      .length === 0;\n\n                  if (!rejected && !transceiver.rejected) {\n                    var remoteIceParameters = SDPUtils.getIceParameters(\n                      mediaSection,\n                      sessionpart\n                    );\n                    var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n                      mediaSection,\n                      sessionpart\n                    );\n                    if (isIceLite) {\n                      remoteDtlsParameters.role = \"server\";\n                    }\n\n                    if (!pc.usingBundle || sdpMLineIndex === 0) {\n                      pc._gather(transceiver.mid, sdpMLineIndex);\n                      if (iceTransport.state === \"new\") {\n                        iceTransport.start(\n                          iceGatherer,\n                          remoteIceParameters,\n                          isIceLite ? \"controlling\" : \"controlled\"\n                        );\n                      }\n                      if (dtlsTransport.state === \"new\") {\n                        dtlsTransport.start(remoteDtlsParameters);\n                      }\n                    }\n\n                    // Calculate intersection of capabilities.\n                    var params = getCommonCapabilities(\n                      localCapabilities,\n                      remoteCapabilities\n                    );\n\n                    // Start the RTCRtpSender. The RTCRtpReceiver for this\n                    // transceiver has already been started in setRemoteDescription.\n                    pc._transceive(\n                      transceiver,\n                      params.codecs.length > 0,\n                      false\n                    );\n                  }\n                });\n              }\n\n              pc._localDescription = {\n                type: description.type,\n                sdp: description.sdp,\n              };\n              if (description.type === \"offer\") {\n                pc._updateSignalingState(\"have-local-offer\");\n              } else {\n                pc._updateSignalingState(\"stable\");\n              }\n\n              return Promise.resolve();\n            };\n\n            RTCPeerConnection.prototype.setRemoteDescription = function (\n              description\n            ) {\n              var pc = this;\n\n              // Note: pranswer is not supported.\n              if ([\"offer\", \"answer\"].indexOf(description.type) === -1) {\n                return Promise.reject(\n                  makeError(\n                    \"TypeError\",\n                    'Unsupported type \"' + description.type + '\"'\n                  )\n                );\n              }\n\n              if (\n                !isActionAllowedInSignalingState(\n                  \"setRemoteDescription\",\n                  description.type,\n                  pc.signalingState\n                ) ||\n                pc._isClosed\n              ) {\n                return Promise.reject(\n                  makeError(\n                    \"InvalidStateError\",\n                    \"Can not set remote \" +\n                      description.type +\n                      \" in state \" +\n                      pc.signalingState\n                  )\n                );\n              }\n\n              var streams = {};\n              pc.remoteStreams.forEach(function (stream) {\n                streams[stream.id] = stream;\n              });\n              var receiverList = [];\n              var sections = SDPUtils.splitSections(description.sdp);\n              var sessionpart = sections.shift();\n              var isIceLite =\n                SDPUtils.matchPrefix(sessionpart, \"a=ice-lite\").length > 0;\n              var usingBundle =\n                SDPUtils.matchPrefix(sessionpart, \"a=group:BUNDLE \").length > 0;\n              pc.usingBundle = usingBundle;\n              var iceOptions = SDPUtils.matchPrefix(\n                sessionpart,\n                \"a=ice-options:\"\n              )[0];\n              if (iceOptions) {\n                pc.canTrickleIceCandidates =\n                  iceOptions.substr(14).split(\" \").indexOf(\"trickle\") >= 0;\n              } else {\n                pc.canTrickleIceCandidates = false;\n              }\n\n              sections.forEach(function (mediaSection, sdpMLineIndex) {\n                var lines = SDPUtils.splitLines(mediaSection);\n                var kind = SDPUtils.getKind(mediaSection);\n                // treat bundle-only as not-rejected.\n                var rejected =\n                  SDPUtils.isRejected(mediaSection) &&\n                  SDPUtils.matchPrefix(mediaSection, \"a=bundle-only\").length ===\n                    0;\n                var protocol = lines[0].substr(2).split(\" \")[2];\n\n                var direction = SDPUtils.getDirection(\n                  mediaSection,\n                  sessionpart\n                );\n                var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n                var mid =\n                  SDPUtils.getMid(mediaSection) ||\n                  SDPUtils.generateIdentifier();\n\n                // Reject datachannels which are not implemented yet.\n                if (\n                  rejected ||\n                  (kind === \"application\" &&\n                    (protocol === \"DTLS/SCTP\" || protocol === \"UDP/DTLS/SCTP\"))\n                ) {\n                  // TODO: this is dangerous in the case where a non-rejected m-line\n                  //     becomes rejected.\n                  pc.transceivers[sdpMLineIndex] = {\n                    mid: mid,\n                    kind: kind,\n                    protocol: protocol,\n                    rejected: true,\n                  };\n                  return;\n                }\n\n                if (\n                  !rejected &&\n                  pc.transceivers[sdpMLineIndex] &&\n                  pc.transceivers[sdpMLineIndex].rejected\n                ) {\n                  // recycle a rejected transceiver.\n                  pc.transceivers[sdpMLineIndex] = pc._createTransceiver(\n                    kind,\n                    true\n                  );\n                }\n\n                var transceiver;\n                var iceGatherer;\n                var iceTransport;\n                var dtlsTransport;\n                var rtpReceiver;\n                var sendEncodingParameters;\n                var recvEncodingParameters;\n                var localCapabilities;\n\n                var track;\n                // FIXME: ensure the mediaSection has rtcp-mux set.\n                var remoteCapabilities = SDPUtils.parseRtpParameters(\n                  mediaSection\n                );\n                var remoteIceParameters;\n                var remoteDtlsParameters;\n                if (!rejected) {\n                  remoteIceParameters = SDPUtils.getIceParameters(\n                    mediaSection,\n                    sessionpart\n                  );\n                  remoteDtlsParameters = SDPUtils.getDtlsParameters(\n                    mediaSection,\n                    sessionpart\n                  );\n                  remoteDtlsParameters.role = \"client\";\n                }\n                recvEncodingParameters = SDPUtils.parseRtpEncodingParameters(\n                  mediaSection\n                );\n\n                var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n                var isComplete =\n                  SDPUtils.matchPrefix(\n                    mediaSection,\n                    \"a=end-of-candidates\",\n                    sessionpart\n                  ).length > 0;\n                var cands = SDPUtils.matchPrefix(mediaSection, \"a=candidate:\")\n                  .map(function (cand) {\n                    return SDPUtils.parseCandidate(cand);\n                  })\n                  .filter(function (cand) {\n                    return cand.component === 1;\n                  });\n\n                // Check if we can use BUNDLE and dispose transports.\n                if (\n                  (description.type === \"offer\" ||\n                    description.type === \"answer\") &&\n                  !rejected &&\n                  usingBundle &&\n                  sdpMLineIndex > 0 &&\n                  pc.transceivers[sdpMLineIndex]\n                ) {\n                  pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n                  pc.transceivers[sdpMLineIndex].iceGatherer =\n                    pc.transceivers[0].iceGatherer;\n                  pc.transceivers[sdpMLineIndex].iceTransport =\n                    pc.transceivers[0].iceTransport;\n                  pc.transceivers[sdpMLineIndex].dtlsTransport =\n                    pc.transceivers[0].dtlsTransport;\n                  if (pc.transceivers[sdpMLineIndex].rtpSender) {\n                    pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n                      pc.transceivers[0].dtlsTransport\n                    );\n                  }\n                  if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n                    pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n                      pc.transceivers[0].dtlsTransport\n                    );\n                  }\n                }\n                if (description.type === \"offer\" && !rejected) {\n                  transceiver =\n                    pc.transceivers[sdpMLineIndex] ||\n                    pc._createTransceiver(kind);\n                  transceiver.mid = mid;\n\n                  if (!transceiver.iceGatherer) {\n                    transceiver.iceGatherer = pc._createIceGatherer(\n                      sdpMLineIndex,\n                      usingBundle\n                    );\n                  }\n\n                  if (\n                    cands.length &&\n                    transceiver.iceTransport.state === \"new\"\n                  ) {\n                    if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n                      transceiver.iceTransport.setRemoteCandidates(cands);\n                    } else {\n                      cands.forEach(function (candidate) {\n                        maybeAddCandidate(transceiver.iceTransport, candidate);\n                      });\n                    }\n                  }\n\n                  localCapabilities = window.RTCRtpReceiver.getCapabilities(\n                    kind\n                  );\n\n                  // filter RTX until additional stuff needed for RTX is implemented\n                  // in adapter.js\n                  if (edgeVersion < 15019) {\n                    localCapabilities.codecs = localCapabilities.codecs.filter(\n                      function (codec) {\n                        return codec.name !== \"rtx\";\n                      }\n                    );\n                  }\n\n                  sendEncodingParameters = transceiver.sendEncodingParameters || [\n                    {\n                      ssrc: (2 * sdpMLineIndex + 2) * 1001,\n                    },\n                  ];\n\n                  // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n                  var isNewTrack = false;\n                  if (direction === \"sendrecv\" || direction === \"sendonly\") {\n                    isNewTrack = !transceiver.rtpReceiver;\n                    rtpReceiver =\n                      transceiver.rtpReceiver ||\n                      new window.RTCRtpReceiver(\n                        transceiver.dtlsTransport,\n                        kind\n                      );\n\n                    if (isNewTrack) {\n                      var stream;\n                      track = rtpReceiver.track;\n                      // FIXME: does not work with Plan B.\n                      if (remoteMsid && remoteMsid.stream === \"-\") {\n                        // no-op. a stream id of '-' means: no associated stream.\n                      } else if (remoteMsid) {\n                        if (!streams[remoteMsid.stream]) {\n                          streams[remoteMsid.stream] = new window.MediaStream();\n                          Object.defineProperty(\n                            streams[remoteMsid.stream],\n                            \"id\",\n                            {\n                              get: function () {\n                                return remoteMsid.stream;\n                              },\n                            }\n                          );\n                        }\n                        Object.defineProperty(track, \"id\", {\n                          get: function () {\n                            return remoteMsid.track;\n                          },\n                        });\n                        stream = streams[remoteMsid.stream];\n                      } else {\n                        if (!streams.default) {\n                          streams.default = new window.MediaStream();\n                        }\n                        stream = streams.default;\n                      }\n                      if (stream) {\n                        addTrackToStreamAndFireEvent(track, stream);\n                        transceiver.associatedRemoteMediaStreams.push(stream);\n                      }\n                      receiverList.push([track, rtpReceiver, stream]);\n                    }\n                  } else if (\n                    transceiver.rtpReceiver &&\n                    transceiver.rtpReceiver.track\n                  ) {\n                    transceiver.associatedRemoteMediaStreams.forEach(function (\n                      s\n                    ) {\n                      var nativeTrack = s.getTracks().find(function (t) {\n                        return t.id === transceiver.rtpReceiver.track.id;\n                      });\n                      if (nativeTrack) {\n                        removeTrackFromStreamAndFireEvent(nativeTrack, s);\n                      }\n                    });\n                    transceiver.associatedRemoteMediaStreams = [];\n                  }\n\n                  transceiver.localCapabilities = localCapabilities;\n                  transceiver.remoteCapabilities = remoteCapabilities;\n                  transceiver.rtpReceiver = rtpReceiver;\n                  transceiver.rtcpParameters = rtcpParameters;\n                  transceiver.sendEncodingParameters = sendEncodingParameters;\n                  transceiver.recvEncodingParameters = recvEncodingParameters;\n\n                  // Start the RTCRtpReceiver now. The RTPSender is started in\n                  // setLocalDescription.\n                  pc._transceive(\n                    pc.transceivers[sdpMLineIndex],\n                    false,\n                    isNewTrack\n                  );\n                } else if (description.type === \"answer\" && !rejected) {\n                  transceiver = pc.transceivers[sdpMLineIndex];\n                  iceGatherer = transceiver.iceGatherer;\n                  iceTransport = transceiver.iceTransport;\n                  dtlsTransport = transceiver.dtlsTransport;\n                  rtpReceiver = transceiver.rtpReceiver;\n                  sendEncodingParameters = transceiver.sendEncodingParameters;\n                  localCapabilities = transceiver.localCapabilities;\n\n                  pc.transceivers[\n                    sdpMLineIndex\n                  ].recvEncodingParameters = recvEncodingParameters;\n                  pc.transceivers[\n                    sdpMLineIndex\n                  ].remoteCapabilities = remoteCapabilities;\n                  pc.transceivers[\n                    sdpMLineIndex\n                  ].rtcpParameters = rtcpParameters;\n\n                  if (cands.length && iceTransport.state === \"new\") {\n                    if (\n                      (isIceLite || isComplete) &&\n                      (!usingBundle || sdpMLineIndex === 0)\n                    ) {\n                      iceTransport.setRemoteCandidates(cands);\n                    } else {\n                      cands.forEach(function (candidate) {\n                        maybeAddCandidate(transceiver.iceTransport, candidate);\n                      });\n                    }\n                  }\n\n                  if (!usingBundle || sdpMLineIndex === 0) {\n                    if (iceTransport.state === \"new\") {\n                      iceTransport.start(\n                        iceGatherer,\n                        remoteIceParameters,\n                        \"controlling\"\n                      );\n                    }\n                    if (dtlsTransport.state === \"new\") {\n                      dtlsTransport.start(remoteDtlsParameters);\n                    }\n                  }\n\n                  // If the offer contained RTX but the answer did not,\n                  // remove RTX from sendEncodingParameters.\n                  var commonCapabilities = getCommonCapabilities(\n                    transceiver.localCapabilities,\n                    transceiver.remoteCapabilities\n                  );\n\n                  var hasRtx = commonCapabilities.codecs.filter(function (c) {\n                    return c.name.toLowerCase() === \"rtx\";\n                  }).length;\n                  if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n                    delete transceiver.sendEncodingParameters[0].rtx;\n                  }\n\n                  pc._transceive(\n                    transceiver,\n                    direction === \"sendrecv\" || direction === \"recvonly\",\n                    direction === \"sendrecv\" || direction === \"sendonly\"\n                  );\n\n                  // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n                  if (\n                    rtpReceiver &&\n                    (direction === \"sendrecv\" || direction === \"sendonly\")\n                  ) {\n                    track = rtpReceiver.track;\n                    if (remoteMsid) {\n                      if (!streams[remoteMsid.stream]) {\n                        streams[remoteMsid.stream] = new window.MediaStream();\n                      }\n                      addTrackToStreamAndFireEvent(\n                        track,\n                        streams[remoteMsid.stream]\n                      );\n                      receiverList.push([\n                        track,\n                        rtpReceiver,\n                        streams[remoteMsid.stream],\n                      ]);\n                    } else {\n                      if (!streams.default) {\n                        streams.default = new window.MediaStream();\n                      }\n                      addTrackToStreamAndFireEvent(track, streams.default);\n                      receiverList.push([track, rtpReceiver, streams.default]);\n                    }\n                  } else {\n                    // FIXME: actually the receiver should be created later.\n                    delete transceiver.rtpReceiver;\n                  }\n                }\n              });\n\n              if (pc._dtlsRole === undefined) {\n                pc._dtlsRole =\n                  description.type === \"offer\" ? \"active\" : \"passive\";\n              }\n\n              pc._remoteDescription = {\n                type: description.type,\n                sdp: description.sdp,\n              };\n              if (description.type === \"offer\") {\n                pc._updateSignalingState(\"have-remote-offer\");\n              } else {\n                pc._updateSignalingState(\"stable\");\n              }\n              Object.keys(streams).forEach(function (sid) {\n                var stream = streams[sid];\n                if (stream.getTracks().length) {\n                  if (pc.remoteStreams.indexOf(stream) === -1) {\n                    pc.remoteStreams.push(stream);\n                    var event = new Event(\"addstream\");\n                    event.stream = stream;\n                    window.setTimeout(function () {\n                      pc._dispatchEvent(\"addstream\", event);\n                    });\n                  }\n\n                  receiverList.forEach(function (item) {\n                    var track = item[0];\n                    var receiver = item[1];\n                    if (stream.id !== item[2].id) {\n                      return;\n                    }\n                    fireAddTrack(pc, track, receiver, [stream]);\n                  });\n                }\n              });\n              receiverList.forEach(function (item) {\n                if (item[2]) {\n                  return;\n                }\n                fireAddTrack(pc, item[0], item[1], []);\n              });\n\n              // check whether addIceCandidate({}) was called within four seconds after\n              // setRemoteDescription.\n              window.setTimeout(function () {\n                if (!(pc && pc.transceivers)) {\n                  return;\n                }\n                pc.transceivers.forEach(function (transceiver) {\n                  if (\n                    transceiver.iceTransport &&\n                    transceiver.iceTransport.state === \"new\" &&\n                    transceiver.iceTransport.getRemoteCandidates().length > 0\n                  ) {\n                    console.warn(\n                      \"Timeout for addRemoteCandidate. Consider sending \" +\n                        \"an end-of-candidates notification\"\n                    );\n                    transceiver.iceTransport.addRemoteCandidate({});\n                  }\n                });\n              }, 4000);\n\n              return Promise.resolve();\n            };\n\n            RTCPeerConnection.prototype.close = function () {\n              this.transceivers.forEach(function (transceiver) {\n                /* not yet\n        if (transceiver.iceGatherer) {\n          transceiver.iceGatherer.close();\n        }\n        */\n                if (transceiver.iceTransport) {\n                  transceiver.iceTransport.stop();\n                }\n                if (transceiver.dtlsTransport) {\n                  transceiver.dtlsTransport.stop();\n                }\n                if (transceiver.rtpSender) {\n                  transceiver.rtpSender.stop();\n                }\n                if (transceiver.rtpReceiver) {\n                  transceiver.rtpReceiver.stop();\n                }\n              });\n              // FIXME: clean up tracks, local streams, remote streams, etc\n              this._isClosed = true;\n              this._updateSignalingState(\"closed\");\n            };\n\n            // Update the signaling state.\n            RTCPeerConnection.prototype._updateSignalingState = function (\n              newState\n            ) {\n              this.signalingState = newState;\n              var event = new Event(\"signalingstatechange\");\n              this._dispatchEvent(\"signalingstatechange\", event);\n            };\n\n            // Determine whether to fire the negotiationneeded event.\n            RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function () {\n              var pc = this;\n              if (\n                this.signalingState !== \"stable\" ||\n                this.needNegotiation === true\n              ) {\n                return;\n              }\n              this.needNegotiation = true;\n              window.setTimeout(function () {\n                if (pc.needNegotiation) {\n                  pc.needNegotiation = false;\n                  var event = new Event(\"negotiationneeded\");\n                  pc._dispatchEvent(\"negotiationneeded\", event);\n                }\n              }, 0);\n            };\n\n            // Update the ice connection state.\n            RTCPeerConnection.prototype._updateIceConnectionState = function () {\n              var newState;\n              var states = {\n                new: 0,\n                closed: 0,\n                checking: 0,\n                connected: 0,\n                completed: 0,\n                disconnected: 0,\n                failed: 0,\n              };\n              this.transceivers.forEach(function (transceiver) {\n                if (transceiver.iceTransport && !transceiver.rejected) {\n                  states[transceiver.iceTransport.state]++;\n                }\n              });\n\n              newState = \"new\";\n              if (states.failed > 0) {\n                newState = \"failed\";\n              } else if (states.checking > 0) {\n                newState = \"checking\";\n              } else if (states.disconnected > 0) {\n                newState = \"disconnected\";\n              } else if (states.new > 0) {\n                newState = \"new\";\n              } else if (states.connected > 0) {\n                newState = \"connected\";\n              } else if (states.completed > 0) {\n                newState = \"completed\";\n              }\n\n              if (newState !== this.iceConnectionState) {\n                this.iceConnectionState = newState;\n                var event = new Event(\"iceconnectionstatechange\");\n                this._dispatchEvent(\"iceconnectionstatechange\", event);\n              }\n            };\n\n            // Update the connection state.\n            RTCPeerConnection.prototype._updateConnectionState = function () {\n              var newState;\n              var states = {\n                new: 0,\n                closed: 0,\n                connecting: 0,\n                connected: 0,\n                completed: 0,\n                disconnected: 0,\n                failed: 0,\n              };\n              this.transceivers.forEach(function (transceiver) {\n                if (\n                  transceiver.iceTransport &&\n                  transceiver.dtlsTransport &&\n                  !transceiver.rejected\n                ) {\n                  states[transceiver.iceTransport.state]++;\n                  states[transceiver.dtlsTransport.state]++;\n                }\n              });\n              // ICETransport.completed and connected are the same for this purpose.\n              states.connected += states.completed;\n\n              newState = \"new\";\n              if (states.failed > 0) {\n                newState = \"failed\";\n              } else if (states.connecting > 0) {\n                newState = \"connecting\";\n              } else if (states.disconnected > 0) {\n                newState = \"disconnected\";\n              } else if (states.new > 0) {\n                newState = \"new\";\n              } else if (states.connected > 0) {\n                newState = \"connected\";\n              }\n\n              if (newState !== this.connectionState) {\n                this.connectionState = newState;\n                var event = new Event(\"connectionstatechange\");\n                this._dispatchEvent(\"connectionstatechange\", event);\n              }\n            };\n\n            RTCPeerConnection.prototype.createOffer = function () {\n              var pc = this;\n\n              if (pc._isClosed) {\n                return Promise.reject(\n                  makeError(\n                    \"InvalidStateError\",\n                    \"Can not call createOffer after close\"\n                  )\n                );\n              }\n\n              var numAudioTracks = pc.transceivers.filter(function (t) {\n                return t.kind === \"audio\";\n              }).length;\n              var numVideoTracks = pc.transceivers.filter(function (t) {\n                return t.kind === \"video\";\n              }).length;\n\n              // Determine number of audio and video tracks we need to send/recv.\n              var offerOptions = arguments[0];\n              if (offerOptions) {\n                // Reject Chrome legacy constraints.\n                if (offerOptions.mandatory || offerOptions.optional) {\n                  throw new TypeError(\n                    \"Legacy mandatory/optional constraints not supported.\"\n                  );\n                }\n                if (offerOptions.offerToReceiveAudio !== undefined) {\n                  if (offerOptions.offerToReceiveAudio === true) {\n                    numAudioTracks = 1;\n                  } else if (offerOptions.offerToReceiveAudio === false) {\n                    numAudioTracks = 0;\n                  } else {\n                    numAudioTracks = offerOptions.offerToReceiveAudio;\n                  }\n                }\n                if (offerOptions.offerToReceiveVideo !== undefined) {\n                  if (offerOptions.offerToReceiveVideo === true) {\n                    numVideoTracks = 1;\n                  } else if (offerOptions.offerToReceiveVideo === false) {\n                    numVideoTracks = 0;\n                  } else {\n                    numVideoTracks = offerOptions.offerToReceiveVideo;\n                  }\n                }\n              }\n\n              pc.transceivers.forEach(function (transceiver) {\n                if (transceiver.kind === \"audio\") {\n                  numAudioTracks--;\n                  if (numAudioTracks < 0) {\n                    transceiver.wantReceive = false;\n                  }\n                } else if (transceiver.kind === \"video\") {\n                  numVideoTracks--;\n                  if (numVideoTracks < 0) {\n                    transceiver.wantReceive = false;\n                  }\n                }\n              });\n\n              // Create M-lines for recvonly streams.\n              while (numAudioTracks > 0 || numVideoTracks > 0) {\n                if (numAudioTracks > 0) {\n                  pc._createTransceiver(\"audio\");\n                  numAudioTracks--;\n                }\n                if (numVideoTracks > 0) {\n                  pc._createTransceiver(\"video\");\n                  numVideoTracks--;\n                }\n              }\n\n              var sdp = SDPUtils.writeSessionBoilerplate(\n                pc._sdpSessionId,\n                pc._sdpSessionVersion++\n              );\n              pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n                // For each track, create an ice gatherer, ice transport,\n                // dtls transport, potentially rtpsender and rtpreceiver.\n                var track = transceiver.track;\n                var kind = transceiver.kind;\n                var mid = transceiver.mid || SDPUtils.generateIdentifier();\n                transceiver.mid = mid;\n\n                if (!transceiver.iceGatherer) {\n                  transceiver.iceGatherer = pc._createIceGatherer(\n                    sdpMLineIndex,\n                    pc.usingBundle\n                  );\n                }\n\n                var localCapabilities = window.RTCRtpSender.getCapabilities(\n                  kind\n                );\n                // filter RTX until additional stuff needed for RTX is implemented\n                // in adapter.js\n                if (edgeVersion < 15019) {\n                  localCapabilities.codecs = localCapabilities.codecs.filter(\n                    function (codec) {\n                      return codec.name !== \"rtx\";\n                    }\n                  );\n                }\n                localCapabilities.codecs.forEach(function (codec) {\n                  // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n                  // by adding level-asymmetry-allowed=1\n                  if (\n                    codec.name === \"H264\" &&\n                    codec.parameters[\"level-asymmetry-allowed\"] === undefined\n                  ) {\n                    codec.parameters[\"level-asymmetry-allowed\"] = \"1\";\n                  }\n\n                  // for subsequent offers, we might have to re-use the payload\n                  // type of the last offer.\n                  if (\n                    transceiver.remoteCapabilities &&\n                    transceiver.remoteCapabilities.codecs\n                  ) {\n                    transceiver.remoteCapabilities.codecs.forEach(function (\n                      remoteCodec\n                    ) {\n                      if (\n                        codec.name.toLowerCase() ===\n                          remoteCodec.name.toLowerCase() &&\n                        codec.clockRate === remoteCodec.clockRate\n                      ) {\n                        codec.preferredPayloadType = remoteCodec.payloadType;\n                      }\n                    });\n                  }\n                });\n                localCapabilities.headerExtensions.forEach(function (hdrExt) {\n                  var remoteExtensions =\n                    (transceiver.remoteCapabilities &&\n                      transceiver.remoteCapabilities.headerExtensions) ||\n                    [];\n                  remoteExtensions.forEach(function (rHdrExt) {\n                    if (hdrExt.uri === rHdrExt.uri) {\n                      hdrExt.id = rHdrExt.id;\n                    }\n                  });\n                });\n\n                // generate an ssrc now, to be used later in rtpSender.send\n                var sendEncodingParameters = transceiver.sendEncodingParameters || [\n                  {\n                    ssrc: (2 * sdpMLineIndex + 1) * 1001,\n                  },\n                ];\n                if (track) {\n                  // add RTX\n                  if (\n                    edgeVersion >= 15019 &&\n                    kind === \"video\" &&\n                    !sendEncodingParameters[0].rtx\n                  ) {\n                    sendEncodingParameters[0].rtx = {\n                      ssrc: sendEncodingParameters[0].ssrc + 1,\n                    };\n                  }\n                }\n\n                if (transceiver.wantReceive) {\n                  transceiver.rtpReceiver = new window.RTCRtpReceiver(\n                    transceiver.dtlsTransport,\n                    kind\n                  );\n                }\n\n                transceiver.localCapabilities = localCapabilities;\n                transceiver.sendEncodingParameters = sendEncodingParameters;\n              });\n\n              // always offer BUNDLE and dispose on return if not supported.\n              if (pc._config.bundlePolicy !== \"max-compat\") {\n                sdp +=\n                  \"a=group:BUNDLE \" +\n                  pc.transceivers\n                    .map(function (t) {\n                      return t.mid;\n                    })\n                    .join(\" \") +\n                  \"\\r\\n\";\n              }\n              sdp += \"a=ice-options:trickle\\r\\n\";\n\n              pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n                sdp += writeMediaSection(\n                  transceiver,\n                  transceiver.localCapabilities,\n                  \"offer\",\n                  transceiver.stream,\n                  pc._dtlsRole\n                );\n                sdp += \"a=rtcp-rsize\\r\\n\";\n\n                if (\n                  transceiver.iceGatherer &&\n                  pc.iceGatheringState !== \"new\" &&\n                  (sdpMLineIndex === 0 || !pc.usingBundle)\n                ) {\n                  transceiver.iceGatherer\n                    .getLocalCandidates()\n                    .forEach(function (cand) {\n                      cand.component = 1;\n                      sdp += \"a=\" + SDPUtils.writeCandidate(cand) + \"\\r\\n\";\n                    });\n\n                  if (transceiver.iceGatherer.state === \"completed\") {\n                    sdp += \"a=end-of-candidates\\r\\n\";\n                  }\n                }\n              });\n\n              var desc = new window.RTCSessionDescription({\n                type: \"offer\",\n                sdp: sdp,\n              });\n              return Promise.resolve(desc);\n            };\n\n            RTCPeerConnection.prototype.createAnswer = function () {\n              var pc = this;\n\n              if (pc._isClosed) {\n                return Promise.reject(\n                  makeError(\n                    \"InvalidStateError\",\n                    \"Can not call createAnswer after close\"\n                  )\n                );\n              }\n\n              if (\n                !(\n                  pc.signalingState === \"have-remote-offer\" ||\n                  pc.signalingState === \"have-local-pranswer\"\n                )\n              ) {\n                return Promise.reject(\n                  makeError(\n                    \"InvalidStateError\",\n                    \"Can not call createAnswer in signalingState \" +\n                      pc.signalingState\n                  )\n                );\n              }\n\n              var sdp = SDPUtils.writeSessionBoilerplate(\n                pc._sdpSessionId,\n                pc._sdpSessionVersion++\n              );\n              if (pc.usingBundle) {\n                sdp +=\n                  \"a=group:BUNDLE \" +\n                  pc.transceivers\n                    .map(function (t) {\n                      return t.mid;\n                    })\n                    .join(\" \") +\n                  \"\\r\\n\";\n              }\n              sdp += \"a=ice-options:trickle\\r\\n\";\n\n              var mediaSectionsInOffer = SDPUtils.getMediaSections(\n                pc._remoteDescription.sdp\n              ).length;\n              pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n                if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n                  return;\n                }\n                if (transceiver.rejected) {\n                  if (transceiver.kind === \"application\") {\n                    if (transceiver.protocol === \"DTLS/SCTP\") {\n                      // legacy fmt\n                      sdp += \"m=application 0 DTLS/SCTP 5000\\r\\n\";\n                    } else {\n                      sdp +=\n                        \"m=application 0 \" +\n                        transceiver.protocol +\n                        \" webrtc-datachannel\\r\\n\";\n                    }\n                  } else if (transceiver.kind === \"audio\") {\n                    sdp +=\n                      \"m=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n\" +\n                      \"a=rtpmap:0 PCMU/8000\\r\\n\";\n                  } else if (transceiver.kind === \"video\") {\n                    sdp +=\n                      \"m=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n\" +\n                      \"a=rtpmap:120 VP8/90000\\r\\n\";\n                  }\n                  sdp +=\n                    \"c=IN IP4 0.0.0.0\\r\\n\" +\n                    \"a=inactive\\r\\n\" +\n                    \"a=mid:\" +\n                    transceiver.mid +\n                    \"\\r\\n\";\n                  return;\n                }\n\n                // FIXME: look at direction.\n                if (transceiver.stream) {\n                  var localTrack;\n                  if (transceiver.kind === \"audio\") {\n                    localTrack = transceiver.stream.getAudioTracks()[0];\n                  } else if (transceiver.kind === \"video\") {\n                    localTrack = transceiver.stream.getVideoTracks()[0];\n                  }\n                  if (localTrack) {\n                    // add RTX\n                    if (\n                      edgeVersion >= 15019 &&\n                      transceiver.kind === \"video\" &&\n                      !transceiver.sendEncodingParameters[0].rtx\n                    ) {\n                      transceiver.sendEncodingParameters[0].rtx = {\n                        ssrc: transceiver.sendEncodingParameters[0].ssrc + 1,\n                      };\n                    }\n                  }\n                }\n\n                // Calculate intersection of capabilities.\n                var commonCapabilities = getCommonCapabilities(\n                  transceiver.localCapabilities,\n                  transceiver.remoteCapabilities\n                );\n\n                var hasRtx = commonCapabilities.codecs.filter(function (c) {\n                  return c.name.toLowerCase() === \"rtx\";\n                }).length;\n                if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n                  delete transceiver.sendEncodingParameters[0].rtx;\n                }\n\n                sdp += writeMediaSection(\n                  transceiver,\n                  commonCapabilities,\n                  \"answer\",\n                  transceiver.stream,\n                  pc._dtlsRole\n                );\n                if (\n                  transceiver.rtcpParameters &&\n                  transceiver.rtcpParameters.reducedSize\n                ) {\n                  sdp += \"a=rtcp-rsize\\r\\n\";\n                }\n              });\n\n              var desc = new window.RTCSessionDescription({\n                type: \"answer\",\n                sdp: sdp,\n              });\n              return Promise.resolve(desc);\n            };\n\n            RTCPeerConnection.prototype.addIceCandidate = function (candidate) {\n              var pc = this;\n              var sections;\n              if (\n                candidate &&\n                !(candidate.sdpMLineIndex !== undefined || candidate.sdpMid)\n              ) {\n                return Promise.reject(\n                  new TypeError(\"sdpMLineIndex or sdpMid required\")\n                );\n              }\n\n              // TODO: needs to go into ops queue.\n              return new Promise(function (resolve, reject) {\n                if (!pc._remoteDescription) {\n                  return reject(\n                    makeError(\n                      \"InvalidStateError\",\n                      \"Can not add ICE candidate without a remote description\"\n                    )\n                  );\n                } else if (!candidate || candidate.candidate === \"\") {\n                  for (var j = 0; j < pc.transceivers.length; j++) {\n                    if (pc.transceivers[j].rejected) {\n                      continue;\n                    }\n                    pc.transceivers[j].iceTransport.addRemoteCandidate({});\n                    sections = SDPUtils.getMediaSections(\n                      pc._remoteDescription.sdp\n                    );\n                    sections[j] += \"a=end-of-candidates\\r\\n\";\n                    pc._remoteDescription.sdp =\n                      SDPUtils.getDescription(pc._remoteDescription.sdp) +\n                      sections.join(\"\");\n                    if (pc.usingBundle) {\n                      break;\n                    }\n                  }\n                } else {\n                  var sdpMLineIndex = candidate.sdpMLineIndex;\n                  if (candidate.sdpMid) {\n                    for (var i = 0; i < pc.transceivers.length; i++) {\n                      if (pc.transceivers[i].mid === candidate.sdpMid) {\n                        sdpMLineIndex = i;\n                        break;\n                      }\n                    }\n                  }\n                  var transceiver = pc.transceivers[sdpMLineIndex];\n                  if (transceiver) {\n                    if (transceiver.rejected) {\n                      return resolve();\n                    }\n                    var cand =\n                      Object.keys(candidate.candidate).length > 0\n                        ? SDPUtils.parseCandidate(candidate.candidate)\n                        : {};\n                    // Ignore Chrome's invalid candidates since Edge does not like them.\n                    if (\n                      cand.protocol === \"tcp\" &&\n                      (cand.port === 0 || cand.port === 9)\n                    ) {\n                      return resolve();\n                    }\n                    // Ignore RTCP candidates, we assume RTCP-MUX.\n                    if (cand.component && cand.component !== 1) {\n                      return resolve();\n                    }\n                    // when using bundle, avoid adding candidates to the wrong\n                    // ice transport. And avoid adding candidates added in the SDP.\n                    if (\n                      sdpMLineIndex === 0 ||\n                      (sdpMLineIndex > 0 &&\n                        transceiver.iceTransport !==\n                          pc.transceivers[0].iceTransport)\n                    ) {\n                      if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n                        return reject(\n                          makeError(\n                            \"OperationError\",\n                            \"Can not add ICE candidate\"\n                          )\n                        );\n                      }\n                    }\n\n                    // update the remoteDescription.\n                    var candidateString = candidate.candidate.trim();\n                    if (candidateString.indexOf(\"a=\") === 0) {\n                      candidateString = candidateString.substr(2);\n                    }\n                    sections = SDPUtils.getMediaSections(\n                      pc._remoteDescription.sdp\n                    );\n                    sections[sdpMLineIndex] +=\n                      \"a=\" +\n                      (cand.type ? candidateString : \"end-of-candidates\") +\n                      \"\\r\\n\";\n                    pc._remoteDescription.sdp =\n                      SDPUtils.getDescription(pc._remoteDescription.sdp) +\n                      sections.join(\"\");\n                  } else {\n                    return reject(\n                      makeError(\"OperationError\", \"Can not add ICE candidate\")\n                    );\n                  }\n                }\n                resolve();\n              });\n            };\n\n            RTCPeerConnection.prototype.getStats = function (selector) {\n              if (selector && selector instanceof window.MediaStreamTrack) {\n                var senderOrReceiver = null;\n                this.transceivers.forEach(function (transceiver) {\n                  if (\n                    transceiver.rtpSender &&\n                    transceiver.rtpSender.track === selector\n                  ) {\n                    senderOrReceiver = transceiver.rtpSender;\n                  } else if (\n                    transceiver.rtpReceiver &&\n                    transceiver.rtpReceiver.track === selector\n                  ) {\n                    senderOrReceiver = transceiver.rtpReceiver;\n                  }\n                });\n                if (!senderOrReceiver) {\n                  throw makeError(\"InvalidAccessError\", \"Invalid selector.\");\n                }\n                return senderOrReceiver.getStats();\n              }\n\n              var promises = [];\n              this.transceivers.forEach(function (transceiver) {\n                [\n                  \"rtpSender\",\n                  \"rtpReceiver\",\n                  \"iceGatherer\",\n                  \"iceTransport\",\n                  \"dtlsTransport\",\n                ].forEach(function (method) {\n                  if (transceiver[method]) {\n                    promises.push(transceiver[method].getStats());\n                  }\n                });\n              });\n              return Promise.all(promises).then(function (allStats) {\n                var results = new Map();\n                allStats.forEach(function (stats) {\n                  stats.forEach(function (stat) {\n                    results.set(stat.id, stat);\n                  });\n                });\n                return results;\n              });\n            };\n\n            // fix low-level stat names and return Map instead of object.\n            var ortcObjects = [\n              \"RTCRtpSender\",\n              \"RTCRtpReceiver\",\n              \"RTCIceGatherer\",\n              \"RTCIceTransport\",\n              \"RTCDtlsTransport\",\n            ];\n            ortcObjects.forEach(function (ortcObjectName) {\n              var obj = window[ortcObjectName];\n              if (obj && obj.prototype && obj.prototype.getStats) {\n                var nativeGetstats = obj.prototype.getStats;\n                obj.prototype.getStats = function () {\n                  return nativeGetstats\n                    .apply(this)\n                    .then(function (nativeStats) {\n                      var mapStats = new Map();\n                      Object.keys(nativeStats).forEach(function (id) {\n                        nativeStats[id].type = fixStatsType(nativeStats[id]);\n                        mapStats.set(id, nativeStats[id]);\n                      });\n                      return mapStats;\n                    });\n                };\n              }\n            });\n\n            // legacy callback shims. Should be moved to adapter.js some days.\n            var methods = [\"createOffer\", \"createAnswer\"];\n            methods.forEach(function (method) {\n              var nativeMethod = RTCPeerConnection.prototype[method];\n              RTCPeerConnection.prototype[method] = function () {\n                var args = arguments;\n                if (\n                  typeof args[0] === \"function\" ||\n                  typeof args[1] === \"function\"\n                ) {\n                  // legacy\n                  return nativeMethod.apply(this, [arguments[2]]).then(\n                    function (description) {\n                      if (typeof args[0] === \"function\") {\n                        args[0].apply(null, [description]);\n                      }\n                    },\n                    function (error) {\n                      if (typeof args[1] === \"function\") {\n                        args[1].apply(null, [error]);\n                      }\n                    }\n                  );\n                }\n                return nativeMethod.apply(this, arguments);\n              };\n            });\n\n            methods = [\n              \"setLocalDescription\",\n              \"setRemoteDescription\",\n              \"addIceCandidate\",\n            ];\n            methods.forEach(function (method) {\n              var nativeMethod = RTCPeerConnection.prototype[method];\n              RTCPeerConnection.prototype[method] = function () {\n                var args = arguments;\n                if (\n                  typeof args[1] === \"function\" ||\n                  typeof args[2] === \"function\"\n                ) {\n                  // legacy\n                  return nativeMethod.apply(this, arguments).then(\n                    function () {\n                      if (typeof args[1] === \"function\") {\n                        args[1].apply(null);\n                      }\n                    },\n                    function (error) {\n                      if (typeof args[2] === \"function\") {\n                        args[2].apply(null, [error]);\n                      }\n                    }\n                  );\n                }\n                return nativeMethod.apply(this, arguments);\n              };\n            });\n\n            // getStats is special. It doesn't have a spec legacy method yet we support\n            // getStats(something, cb) without error callbacks.\n            [\"getStats\"].forEach(function (method) {\n              var nativeMethod = RTCPeerConnection.prototype[method];\n              RTCPeerConnection.prototype[method] = function () {\n                var args = arguments;\n                if (typeof args[1] === \"function\") {\n                  return nativeMethod.apply(this, arguments).then(function () {\n                    if (typeof args[1] === \"function\") {\n                      args[1].apply(null);\n                    }\n                  });\n                }\n                return nativeMethod.apply(this, arguments);\n              };\n            });\n\n            return RTCPeerConnection;\n          };\n        },\n        { sdp: 17 },\n      ],\n      17: [\n        function (require, module, exports) {\n          /* eslint-env node */\n          \"use strict\";\n\n          // SDP helpers.\n          var SDPUtils = {};\n\n          // Generate an alphanumeric identifier for cname or mids.\n          // TODO: use UUIDs instead? https://gist.github.com/jed/982883\n          SDPUtils.generateIdentifier = function () {\n            return Math.random().toString(36).substr(2, 10);\n          };\n\n          // The RTCP CNAME used by all peerconnections from the same JS.\n          SDPUtils.localCName = SDPUtils.generateIdentifier();\n\n          // Splits SDP into lines, dealing with both CRLF and LF.\n          SDPUtils.splitLines = function (blob) {\n            return blob\n              .trim()\n              .split(\"\\n\")\n              .map(function (line) {\n                return line.trim();\n              });\n          };\n          // Splits SDP into sessionpart and mediasections. Ensures CRLF.\n          SDPUtils.splitSections = function (blob) {\n            var parts = blob.split(\"\\nm=\");\n            return parts.map(function (part, index) {\n              return (index > 0 ? \"m=\" + part : part).trim() + \"\\r\\n\";\n            });\n          };\n\n          // returns the session description.\n          SDPUtils.getDescription = function (blob) {\n            var sections = SDPUtils.splitSections(blob);\n            return sections && sections[0];\n          };\n\n          // returns the individual media sections.\n          SDPUtils.getMediaSections = function (blob) {\n            var sections = SDPUtils.splitSections(blob);\n            sections.shift();\n            return sections;\n          };\n\n          // Returns lines that start with a certain prefix.\n          SDPUtils.matchPrefix = function (blob, prefix) {\n            return SDPUtils.splitLines(blob).filter(function (line) {\n              return line.indexOf(prefix) === 0;\n            });\n          };\n\n          // Parses an ICE candidate line. Sample input:\n          // candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n          // rport 55996\"\n          SDPUtils.parseCandidate = function (line) {\n            var parts;\n            // Parse both variants.\n            if (line.indexOf(\"a=candidate:\") === 0) {\n              parts = line.substring(12).split(\" \");\n            } else {\n              parts = line.substring(10).split(\" \");\n            }\n\n            var candidate = {\n              foundation: parts[0],\n              component: parseInt(parts[1], 10),\n              protocol: parts[2].toLowerCase(),\n              priority: parseInt(parts[3], 10),\n              ip: parts[4],\n              address: parts[4], // address is an alias for ip.\n              port: parseInt(parts[5], 10),\n              // skip parts[6] == 'typ'\n              type: parts[7],\n            };\n\n            for (var i = 8; i < parts.length; i += 2) {\n              switch (parts[i]) {\n                case \"raddr\":\n                  candidate.relatedAddress = parts[i + 1];\n                  break;\n                case \"rport\":\n                  candidate.relatedPort = parseInt(parts[i + 1], 10);\n                  break;\n                case \"tcptype\":\n                  candidate.tcpType = parts[i + 1];\n                  break;\n                case \"ufrag\":\n                  candidate.ufrag = parts[i + 1]; // for backward compability.\n                  candidate.usernameFragment = parts[i + 1];\n                  break;\n                default:\n                  // extension handling, in particular ufrag\n                  candidate[parts[i]] = parts[i + 1];\n                  break;\n              }\n            }\n            return candidate;\n          };\n\n          // Translates a candidate object into SDP candidate attribute.\n          SDPUtils.writeCandidate = function (candidate) {\n            var sdp = [];\n            sdp.push(candidate.foundation);\n            sdp.push(candidate.component);\n            sdp.push(candidate.protocol.toUpperCase());\n            sdp.push(candidate.priority);\n            sdp.push(candidate.address || candidate.ip);\n            sdp.push(candidate.port);\n\n            var type = candidate.type;\n            sdp.push(\"typ\");\n            sdp.push(type);\n            if (\n              type !== \"host\" &&\n              candidate.relatedAddress &&\n              candidate.relatedPort\n            ) {\n              sdp.push(\"raddr\");\n              sdp.push(candidate.relatedAddress);\n              sdp.push(\"rport\");\n              sdp.push(candidate.relatedPort);\n            }\n            if (\n              candidate.tcpType &&\n              candidate.protocol.toLowerCase() === \"tcp\"\n            ) {\n              sdp.push(\"tcptype\");\n              sdp.push(candidate.tcpType);\n            }\n            if (candidate.usernameFragment || candidate.ufrag) {\n              sdp.push(\"ufrag\");\n              sdp.push(candidate.usernameFragment || candidate.ufrag);\n            }\n            return \"candidate:\" + sdp.join(\" \");\n          };\n\n          // Parses an ice-options line, returns an array of option tags.\n          // a=ice-options:foo bar\n          SDPUtils.parseIceOptions = function (line) {\n            return line.substr(14).split(\" \");\n          };\n\n          // Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n          // a=rtpmap:111 opus/48000/2\n          SDPUtils.parseRtpMap = function (line) {\n            var parts = line.substr(9).split(\" \");\n            var parsed = {\n              payloadType: parseInt(parts.shift(), 10), // was: id\n            };\n\n            parts = parts[0].split(\"/\");\n\n            parsed.name = parts[0];\n            parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n            parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n            // legacy alias, got renamed back to channels in ORTC.\n            parsed.numChannels = parsed.channels;\n            return parsed;\n          };\n\n          // Generate an a=rtpmap line from RTCRtpCodecCapability or\n          // RTCRtpCodecParameters.\n          SDPUtils.writeRtpMap = function (codec) {\n            var pt = codec.payloadType;\n            if (codec.preferredPayloadType !== undefined) {\n              pt = codec.preferredPayloadType;\n            }\n            var channels = codec.channels || codec.numChannels || 1;\n            return (\n              \"a=rtpmap:\" +\n              pt +\n              \" \" +\n              codec.name +\n              \"/\" +\n              codec.clockRate +\n              (channels !== 1 ? \"/\" + channels : \"\") +\n              \"\\r\\n\"\n            );\n          };\n\n          // Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n          // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n          // a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\n          SDPUtils.parseExtmap = function (line) {\n            var parts = line.substr(9).split(\" \");\n            return {\n              id: parseInt(parts[0], 10),\n              direction:\n                parts[0].indexOf(\"/\") > 0 ? parts[0].split(\"/\")[1] : \"sendrecv\",\n              uri: parts[1],\n            };\n          };\n\n          // Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n          // RTCRtpHeaderExtension.\n          SDPUtils.writeExtmap = function (headerExtension) {\n            return (\n              \"a=extmap:\" +\n              (headerExtension.id || headerExtension.preferredId) +\n              (headerExtension.direction &&\n              headerExtension.direction !== \"sendrecv\"\n                ? \"/\" + headerExtension.direction\n                : \"\") +\n              \" \" +\n              headerExtension.uri +\n              \"\\r\\n\"\n            );\n          };\n\n          // Parses an ftmp line, returns dictionary. Sample input:\n          // a=fmtp:96 vbr=on;cng=on\n          // Also deals with vbr=on; cng=on\n          SDPUtils.parseFmtp = function (line) {\n            var parsed = {};\n            var kv;\n            var parts = line.substr(line.indexOf(\" \") + 1).split(\";\");\n            for (var j = 0; j < parts.length; j++) {\n              kv = parts[j].trim().split(\"=\");\n              parsed[kv[0].trim()] = kv[1];\n            }\n            return parsed;\n          };\n\n          // Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\n          SDPUtils.writeFmtp = function (codec) {\n            var line = \"\";\n            var pt = codec.payloadType;\n            if (codec.preferredPayloadType !== undefined) {\n              pt = codec.preferredPayloadType;\n            }\n            if (codec.parameters && Object.keys(codec.parameters).length) {\n              var params = [];\n              Object.keys(codec.parameters).forEach(function (param) {\n                if (codec.parameters[param]) {\n                  params.push(param + \"=\" + codec.parameters[param]);\n                } else {\n                  params.push(param);\n                }\n              });\n              line += \"a=fmtp:\" + pt + \" \" + params.join(\";\") + \"\\r\\n\";\n            }\n            return line;\n          };\n\n          // Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n          // a=rtcp-fb:98 nack rpsi\n          SDPUtils.parseRtcpFb = function (line) {\n            var parts = line.substr(line.indexOf(\" \") + 1).split(\" \");\n            return {\n              type: parts.shift(),\n              parameter: parts.join(\" \"),\n            };\n          };\n          // Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\n          SDPUtils.writeRtcpFb = function (codec) {\n            var lines = \"\";\n            var pt = codec.payloadType;\n            if (codec.preferredPayloadType !== undefined) {\n              pt = codec.preferredPayloadType;\n            }\n            if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n              // FIXME: special handling for trr-int?\n              codec.rtcpFeedback.forEach(function (fb) {\n                lines +=\n                  \"a=rtcp-fb:\" +\n                  pt +\n                  \" \" +\n                  fb.type +\n                  (fb.parameter && fb.parameter.length\n                    ? \" \" + fb.parameter\n                    : \"\") +\n                  \"\\r\\n\";\n              });\n            }\n            return lines;\n          };\n\n          // Parses an RFC 5576 ssrc media attribute. Sample input:\n          // a=ssrc:3735928559 cname:something\n          SDPUtils.parseSsrcMedia = function (line) {\n            var sp = line.indexOf(\" \");\n            var parts = {\n              ssrc: parseInt(line.substr(7, sp - 7), 10),\n            };\n            var colon = line.indexOf(\":\", sp);\n            if (colon > -1) {\n              parts.attribute = line.substr(sp + 1, colon - sp - 1);\n              parts.value = line.substr(colon + 1);\n            } else {\n              parts.attribute = line.substr(sp + 1);\n            }\n            return parts;\n          };\n\n          SDPUtils.parseSsrcGroup = function (line) {\n            var parts = line.substr(13).split(\" \");\n            return {\n              semantics: parts.shift(),\n              ssrcs: parts.map(function (ssrc) {\n                return parseInt(ssrc, 10);\n              }),\n            };\n          };\n\n          // Extracts the MID (RFC 5888) from a media section.\n          // returns the MID or undefined if no mid line was found.\n          SDPUtils.getMid = function (mediaSection) {\n            var mid = SDPUtils.matchPrefix(mediaSection, \"a=mid:\")[0];\n            if (mid) {\n              return mid.substr(6);\n            }\n          };\n\n          SDPUtils.parseFingerprint = function (line) {\n            var parts = line.substr(14).split(\" \");\n            return {\n              algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n              value: parts[1],\n            };\n          };\n\n          // Extracts DTLS parameters from SDP media section or sessionpart.\n          // FIXME: for consistency with other functions this should only\n          //   get the fingerprint line as input. See also getIceParameters.\n          SDPUtils.getDtlsParameters = function (mediaSection, sessionpart) {\n            var lines = SDPUtils.matchPrefix(\n              mediaSection + sessionpart,\n              \"a=fingerprint:\"\n            );\n            // Note: a=setup line is ignored since we use the 'auto' role.\n            // Note2: 'algorithm' is not case sensitive except in Edge.\n            return {\n              role: \"auto\",\n              fingerprints: lines.map(SDPUtils.parseFingerprint),\n            };\n          };\n\n          // Serializes DTLS parameters to SDP.\n          SDPUtils.writeDtlsParameters = function (params, setupType) {\n            var sdp = \"a=setup:\" + setupType + \"\\r\\n\";\n            params.fingerprints.forEach(function (fp) {\n              sdp += \"a=fingerprint:\" + fp.algorithm + \" \" + fp.value + \"\\r\\n\";\n            });\n            return sdp;\n          };\n\n          // Parses a=crypto lines into\n          //   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\n          SDPUtils.parseCryptoLine = function (line) {\n            var parts = line.substr(9).split(\" \");\n            return {\n              tag: parseInt(parts[0], 10),\n              cryptoSuite: parts[1],\n              keyParams: parts[2],\n              sessionParams: parts.slice(3),\n            };\n          };\n\n          SDPUtils.writeCryptoLine = function (parameters) {\n            return (\n              \"a=crypto:\" +\n              parameters.tag +\n              \" \" +\n              parameters.cryptoSuite +\n              \" \" +\n              (typeof parameters.keyParams === \"object\"\n                ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n                : parameters.keyParams) +\n              (parameters.sessionParams\n                ? \" \" + parameters.sessionParams.join(\" \")\n                : \"\") +\n              \"\\r\\n\"\n            );\n          };\n\n          // Parses the crypto key parameters into\n          //   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\n          SDPUtils.parseCryptoKeyParams = function (keyParams) {\n            if (keyParams.indexOf(\"inline:\") !== 0) {\n              return null;\n            }\n            var parts = keyParams.substr(7).split(\"|\");\n            return {\n              keyMethod: \"inline\",\n              keySalt: parts[0],\n              lifeTime: parts[1],\n              mkiValue: parts[2] ? parts[2].split(\":\")[0] : undefined,\n              mkiLength: parts[2] ? parts[2].split(\":\")[1] : undefined,\n            };\n          };\n\n          SDPUtils.writeCryptoKeyParams = function (keyParams) {\n            return (\n              keyParams.keyMethod +\n              \":\" +\n              keyParams.keySalt +\n              (keyParams.lifeTime ? \"|\" + keyParams.lifeTime : \"\") +\n              (keyParams.mkiValue && keyParams.mkiLength\n                ? \"|\" + keyParams.mkiValue + \":\" + keyParams.mkiLength\n                : \"\")\n            );\n          };\n\n          // Extracts all SDES paramters.\n          SDPUtils.getCryptoParameters = function (mediaSection, sessionpart) {\n            var lines = SDPUtils.matchPrefix(\n              mediaSection + sessionpart,\n              \"a=crypto:\"\n            );\n            return lines.map(SDPUtils.parseCryptoLine);\n          };\n\n          // Parses ICE information from SDP media section or sessionpart.\n          // FIXME: for consistency with other functions this should only\n          //   get the ice-ufrag and ice-pwd lines as input.\n          SDPUtils.getIceParameters = function (mediaSection, sessionpart) {\n            var ufrag = SDPUtils.matchPrefix(\n              mediaSection + sessionpart,\n              \"a=ice-ufrag:\"\n            )[0];\n            var pwd = SDPUtils.matchPrefix(\n              mediaSection + sessionpart,\n              \"a=ice-pwd:\"\n            )[0];\n            if (!(ufrag && pwd)) {\n              return null;\n            }\n            return {\n              usernameFragment: ufrag.substr(12),\n              password: pwd.substr(10),\n            };\n          };\n\n          // Serializes ICE parameters to SDP.\n          SDPUtils.writeIceParameters = function (params) {\n            return (\n              \"a=ice-ufrag:\" +\n              params.usernameFragment +\n              \"\\r\\n\" +\n              \"a=ice-pwd:\" +\n              params.password +\n              \"\\r\\n\"\n            );\n          };\n\n          // Parses the SDP media section and returns RTCRtpParameters.\n          SDPUtils.parseRtpParameters = function (mediaSection) {\n            var description = {\n              codecs: [],\n              headerExtensions: [],\n              fecMechanisms: [],\n              rtcp: [],\n            };\n            var lines = SDPUtils.splitLines(mediaSection);\n            var mline = lines[0].split(\" \");\n            for (var i = 3; i < mline.length; i++) {\n              // find all codecs from mline[3..]\n              var pt = mline[i];\n              var rtpmapline = SDPUtils.matchPrefix(\n                mediaSection,\n                \"a=rtpmap:\" + pt + \" \"\n              )[0];\n              if (rtpmapline) {\n                var codec = SDPUtils.parseRtpMap(rtpmapline);\n                var fmtps = SDPUtils.matchPrefix(\n                  mediaSection,\n                  \"a=fmtp:\" + pt + \" \"\n                );\n                // Only the first a=fmtp:<pt> is considered.\n                codec.parameters = fmtps.length\n                  ? SDPUtils.parseFmtp(fmtps[0])\n                  : {};\n                codec.rtcpFeedback = SDPUtils.matchPrefix(\n                  mediaSection,\n                  \"a=rtcp-fb:\" + pt + \" \"\n                ).map(SDPUtils.parseRtcpFb);\n                description.codecs.push(codec);\n                // parse FEC mechanisms from rtpmap lines.\n                switch (codec.name.toUpperCase()) {\n                  case \"RED\":\n                  case \"ULPFEC\":\n                    description.fecMechanisms.push(codec.name.toUpperCase());\n                    break;\n                  default:\n                    // only RED and ULPFEC are recognized as FEC mechanisms.\n                    break;\n                }\n              }\n            }\n            SDPUtils.matchPrefix(mediaSection, \"a=extmap:\").forEach(function (\n              line\n            ) {\n              description.headerExtensions.push(SDPUtils.parseExtmap(line));\n            });\n            // FIXME: parse rtcp.\n            return description;\n          };\n\n          // Generates parts of the SDP media section describing the capabilities /\n          // parameters.\n          SDPUtils.writeRtpDescription = function (kind, caps) {\n            var sdp = \"\";\n\n            // Build the mline.\n            sdp += \"m=\" + kind + \" \";\n            sdp += caps.codecs.length > 0 ? \"9\" : \"0\"; // reject if no codecs.\n            sdp += \" UDP/TLS/RTP/SAVPF \";\n            sdp +=\n              caps.codecs\n                .map(function (codec) {\n                  if (codec.preferredPayloadType !== undefined) {\n                    return codec.preferredPayloadType;\n                  }\n                  return codec.payloadType;\n                })\n                .join(\" \") + \"\\r\\n\";\n\n            sdp += \"c=IN IP4 0.0.0.0\\r\\n\";\n            sdp += \"a=rtcp:9 IN IP4 0.0.0.0\\r\\n\";\n\n            // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n            caps.codecs.forEach(function (codec) {\n              sdp += SDPUtils.writeRtpMap(codec);\n              sdp += SDPUtils.writeFmtp(codec);\n              sdp += SDPUtils.writeRtcpFb(codec);\n            });\n            var maxptime = 0;\n            caps.codecs.forEach(function (codec) {\n              if (codec.maxptime > maxptime) {\n                maxptime = codec.maxptime;\n              }\n            });\n            if (maxptime > 0) {\n              sdp += \"a=maxptime:\" + maxptime + \"\\r\\n\";\n            }\n            sdp += \"a=rtcp-mux\\r\\n\";\n\n            if (caps.headerExtensions) {\n              caps.headerExtensions.forEach(function (extension) {\n                sdp += SDPUtils.writeExtmap(extension);\n              });\n            }\n            // FIXME: write fecMechanisms.\n            return sdp;\n          };\n\n          // Parses the SDP media section and returns an array of\n          // RTCRtpEncodingParameters.\n          SDPUtils.parseRtpEncodingParameters = function (mediaSection) {\n            var encodingParameters = [];\n            var description = SDPUtils.parseRtpParameters(mediaSection);\n            var hasRed = description.fecMechanisms.indexOf(\"RED\") !== -1;\n            var hasUlpfec = description.fecMechanisms.indexOf(\"ULPFEC\") !== -1;\n\n            // filter a=ssrc:... cname:, ignore PlanB-msid\n            var ssrcs = SDPUtils.matchPrefix(mediaSection, \"a=ssrc:\")\n              .map(function (line) {\n                return SDPUtils.parseSsrcMedia(line);\n              })\n              .filter(function (parts) {\n                return parts.attribute === \"cname\";\n              });\n            var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n            var secondarySsrc;\n\n            var flows = SDPUtils.matchPrefix(\n              mediaSection,\n              \"a=ssrc-group:FID\"\n            ).map(function (line) {\n              var parts = line.substr(17).split(\" \");\n              return parts.map(function (part) {\n                return parseInt(part, 10);\n              });\n            });\n            if (\n              flows.length > 0 &&\n              flows[0].length > 1 &&\n              flows[0][0] === primarySsrc\n            ) {\n              secondarySsrc = flows[0][1];\n            }\n\n            description.codecs.forEach(function (codec) {\n              if (codec.name.toUpperCase() === \"RTX\" && codec.parameters.apt) {\n                var encParam = {\n                  ssrc: primarySsrc,\n                  codecPayloadType: parseInt(codec.parameters.apt, 10),\n                };\n                if (primarySsrc && secondarySsrc) {\n                  encParam.rtx = { ssrc: secondarySsrc };\n                }\n                encodingParameters.push(encParam);\n                if (hasRed) {\n                  encParam = JSON.parse(JSON.stringify(encParam));\n                  encParam.fec = {\n                    ssrc: primarySsrc,\n                    mechanism: hasUlpfec ? \"red+ulpfec\" : \"red\",\n                  };\n                  encodingParameters.push(encParam);\n                }\n              }\n            });\n            if (encodingParameters.length === 0 && primarySsrc) {\n              encodingParameters.push({\n                ssrc: primarySsrc,\n              });\n            }\n\n            // we support both b=AS and b=TIAS but interpret AS as TIAS.\n            var bandwidth = SDPUtils.matchPrefix(mediaSection, \"b=\");\n            if (bandwidth.length) {\n              if (bandwidth[0].indexOf(\"b=TIAS:\") === 0) {\n                bandwidth = parseInt(bandwidth[0].substr(7), 10);\n              } else if (bandwidth[0].indexOf(\"b=AS:\") === 0) {\n                // use formula from JSEP to convert b=AS to TIAS value.\n                bandwidth =\n                  parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95 -\n                  50 * 40 * 8;\n              } else {\n                bandwidth = undefined;\n              }\n              encodingParameters.forEach(function (params) {\n                params.maxBitrate = bandwidth;\n              });\n            }\n            return encodingParameters;\n          };\n\n          // parses http://draft.ortc.org/#rtcrtcpparameters*\n          SDPUtils.parseRtcpParameters = function (mediaSection) {\n            var rtcpParameters = {};\n\n            // Gets the first SSRC. Note tha with RTX there might be multiple\n            // SSRCs.\n            var remoteSsrc = SDPUtils.matchPrefix(mediaSection, \"a=ssrc:\")\n              .map(function (line) {\n                return SDPUtils.parseSsrcMedia(line);\n              })\n              .filter(function (obj) {\n                return obj.attribute === \"cname\";\n              })[0];\n            if (remoteSsrc) {\n              rtcpParameters.cname = remoteSsrc.value;\n              rtcpParameters.ssrc = remoteSsrc.ssrc;\n            }\n\n            // Edge uses the compound attribute instead of reducedSize\n            // compound is !reducedSize\n            var rsize = SDPUtils.matchPrefix(mediaSection, \"a=rtcp-rsize\");\n            rtcpParameters.reducedSize = rsize.length > 0;\n            rtcpParameters.compound = rsize.length === 0;\n\n            // parses the rtcp-mux attrіbute.\n            // Note that Edge does not support unmuxed RTCP.\n            var mux = SDPUtils.matchPrefix(mediaSection, \"a=rtcp-mux\");\n            rtcpParameters.mux = mux.length > 0;\n\n            return rtcpParameters;\n          };\n\n          // parses either a=msid: or a=ssrc:... msid lines and returns\n          // the id of the MediaStream and MediaStreamTrack.\n          SDPUtils.parseMsid = function (mediaSection) {\n            var parts;\n            var spec = SDPUtils.matchPrefix(mediaSection, \"a=msid:\");\n            if (spec.length === 1) {\n              parts = spec[0].substr(7).split(\" \");\n              return { stream: parts[0], track: parts[1] };\n            }\n            var planB = SDPUtils.matchPrefix(mediaSection, \"a=ssrc:\")\n              .map(function (line) {\n                return SDPUtils.parseSsrcMedia(line);\n              })\n              .filter(function (msidParts) {\n                return msidParts.attribute === \"msid\";\n              });\n            if (planB.length > 0) {\n              parts = planB[0].value.split(\" \");\n              return { stream: parts[0], track: parts[1] };\n            }\n          };\n\n          // SCTP\n          // parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n          // to draft-ietf-mmusic-sctp-sdp-05\n          SDPUtils.parseSctpDescription = function (mediaSection) {\n            var mline = SDPUtils.parseMLine(mediaSection);\n            var maxSizeLine = SDPUtils.matchPrefix(\n              mediaSection,\n              \"a=max-message-size:\"\n            );\n            var maxMessageSize;\n            if (maxSizeLine.length > 0) {\n              maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n            }\n            if (isNaN(maxMessageSize)) {\n              maxMessageSize = 65536;\n            }\n            var sctpPort = SDPUtils.matchPrefix(mediaSection, \"a=sctp-port:\");\n            if (sctpPort.length > 0) {\n              return {\n                port: parseInt(sctpPort[0].substr(12), 10),\n                protocol: mline.fmt,\n                maxMessageSize: maxMessageSize,\n              };\n            }\n            var sctpMapLines = SDPUtils.matchPrefix(mediaSection, \"a=sctpmap:\");\n            if (sctpMapLines.length > 0) {\n              var parts = SDPUtils.matchPrefix(mediaSection, \"a=sctpmap:\")[0]\n                .substr(10)\n                .split(\" \");\n              return {\n                port: parseInt(parts[0], 10),\n                protocol: parts[1],\n                maxMessageSize: maxMessageSize,\n              };\n            }\n          };\n\n          // SCTP\n          // outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n          // support by now receiving in this format, unless we originally parsed\n          // as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n          // protocol of DTLS/SCTP -- without UDP/ or TCP/)\n          SDPUtils.writeSctpDescription = function (media, sctp) {\n            var output = [];\n            if (media.protocol !== \"DTLS/SCTP\") {\n              output = [\n                \"m=\" +\n                  media.kind +\n                  \" 9 \" +\n                  media.protocol +\n                  \" \" +\n                  sctp.protocol +\n                  \"\\r\\n\",\n                \"c=IN IP4 0.0.0.0\\r\\n\",\n                \"a=sctp-port:\" + sctp.port + \"\\r\\n\",\n              ];\n            } else {\n              output = [\n                \"m=\" +\n                  media.kind +\n                  \" 9 \" +\n                  media.protocol +\n                  \" \" +\n                  sctp.port +\n                  \"\\r\\n\",\n                \"c=IN IP4 0.0.0.0\\r\\n\",\n                \"a=sctpmap:\" + sctp.port + \" \" + sctp.protocol + \" 65535\\r\\n\",\n              ];\n            }\n            if (sctp.maxMessageSize !== undefined) {\n              output.push(\"a=max-message-size:\" + sctp.maxMessageSize + \"\\r\\n\");\n            }\n            return output.join(\"\");\n          };\n\n          // Generate a session ID for SDP.\n          // https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n          // recommends using a cryptographically random +ve 64-bit value\n          // but right now this should be acceptable and within the right range\n          SDPUtils.generateSessionId = function () {\n            return Math.random().toString().substr(2, 21);\n          };\n\n          // Write boilder plate for start of SDP\n          // sessId argument is optional - if not supplied it will\n          // be generated randomly\n          // sessVersion is optional and defaults to 2\n          // sessUser is optional and defaults to 'thisisadapterortc'\n          SDPUtils.writeSessionBoilerplate = function (\n            sessId,\n            sessVer,\n            sessUser\n          ) {\n            var sessionId;\n            var version = sessVer !== undefined ? sessVer : 2;\n            if (sessId) {\n              sessionId = sessId;\n            } else {\n              sessionId = SDPUtils.generateSessionId();\n            }\n            var user = sessUser || \"thisisadapterortc\";\n            // FIXME: sess-id should be an NTP timestamp.\n            return (\n              \"v=0\\r\\n\" +\n              \"o=\" +\n              user +\n              \" \" +\n              sessionId +\n              \" \" +\n              version +\n              \" IN IP4 127.0.0.1\\r\\n\" +\n              \"s=-\\r\\n\" +\n              \"t=0 0\\r\\n\"\n            );\n          };\n\n          SDPUtils.writeMediaSection = function (\n            transceiver,\n            caps,\n            type,\n            stream\n          ) {\n            var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n            // Map ICE parameters (ufrag, pwd) to SDP.\n            sdp += SDPUtils.writeIceParameters(\n              transceiver.iceGatherer.getLocalParameters()\n            );\n\n            // Map DTLS parameters to SDP.\n            sdp += SDPUtils.writeDtlsParameters(\n              transceiver.dtlsTransport.getLocalParameters(),\n              type === \"offer\" ? \"actpass\" : \"active\"\n            );\n\n            sdp += \"a=mid:\" + transceiver.mid + \"\\r\\n\";\n\n            if (transceiver.direction) {\n              sdp += \"a=\" + transceiver.direction + \"\\r\\n\";\n            } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n              sdp += \"a=sendrecv\\r\\n\";\n            } else if (transceiver.rtpSender) {\n              sdp += \"a=sendonly\\r\\n\";\n            } else if (transceiver.rtpReceiver) {\n              sdp += \"a=recvonly\\r\\n\";\n            } else {\n              sdp += \"a=inactive\\r\\n\";\n            }\n\n            if (transceiver.rtpSender) {\n              // spec.\n              var msid =\n                \"msid:\" +\n                stream.id +\n                \" \" +\n                transceiver.rtpSender.track.id +\n                \"\\r\\n\";\n              sdp += \"a=\" + msid;\n\n              // for Chrome.\n              sdp +=\n                \"a=ssrc:\" +\n                transceiver.sendEncodingParameters[0].ssrc +\n                \" \" +\n                msid;\n              if (transceiver.sendEncodingParameters[0].rtx) {\n                sdp +=\n                  \"a=ssrc:\" +\n                  transceiver.sendEncodingParameters[0].rtx.ssrc +\n                  \" \" +\n                  msid;\n                sdp +=\n                  \"a=ssrc-group:FID \" +\n                  transceiver.sendEncodingParameters[0].ssrc +\n                  \" \" +\n                  transceiver.sendEncodingParameters[0].rtx.ssrc +\n                  \"\\r\\n\";\n              }\n            }\n            // FIXME: this should be written by writeRtpDescription.\n            sdp +=\n              \"a=ssrc:\" +\n              transceiver.sendEncodingParameters[0].ssrc +\n              \" cname:\" +\n              SDPUtils.localCName +\n              \"\\r\\n\";\n            if (\n              transceiver.rtpSender &&\n              transceiver.sendEncodingParameters[0].rtx\n            ) {\n              sdp +=\n                \"a=ssrc:\" +\n                transceiver.sendEncodingParameters[0].rtx.ssrc +\n                \" cname:\" +\n                SDPUtils.localCName +\n                \"\\r\\n\";\n            }\n            return sdp;\n          };\n\n          // Gets the direction from the mediaSection or the sessionpart.\n          SDPUtils.getDirection = function (mediaSection, sessionpart) {\n            // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n            var lines = SDPUtils.splitLines(mediaSection);\n            for (var i = 0; i < lines.length; i++) {\n              switch (lines[i]) {\n                case \"a=sendrecv\":\n                case \"a=sendonly\":\n                case \"a=recvonly\":\n                case \"a=inactive\":\n                  return lines[i].substr(2);\n                default:\n                // FIXME: What should happen here?\n              }\n            }\n            if (sessionpart) {\n              return SDPUtils.getDirection(sessionpart);\n            }\n            return \"sendrecv\";\n          };\n\n          SDPUtils.getKind = function (mediaSection) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            var mline = lines[0].split(\" \");\n            return mline[0].substr(2);\n          };\n\n          SDPUtils.isRejected = function (mediaSection) {\n            return mediaSection.split(\" \", 2)[1] === \"0\";\n          };\n\n          SDPUtils.parseMLine = function (mediaSection) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            var parts = lines[0].substr(2).split(\" \");\n            return {\n              kind: parts[0],\n              port: parseInt(parts[1], 10),\n              protocol: parts[2],\n              fmt: parts.slice(3).join(\" \"),\n            };\n          };\n\n          SDPUtils.parseOLine = function (mediaSection) {\n            var line = SDPUtils.matchPrefix(mediaSection, \"o=\")[0];\n            var parts = line.substr(2).split(\" \");\n            return {\n              username: parts[0],\n              sessionId: parts[1],\n              sessionVersion: parseInt(parts[2], 10),\n              netType: parts[3],\n              addressType: parts[4],\n              address: parts[5],\n            };\n          };\n\n          // a very naive interpretation of a valid SDP.\n          SDPUtils.isValidSDP = function (blob) {\n            if (typeof blob !== \"string\" || blob.length === 0) {\n              return false;\n            }\n            var lines = SDPUtils.splitLines(blob);\n            for (var i = 0; i < lines.length; i++) {\n              if (lines[i].length < 2 || lines[i].charAt(1) !== \"=\") {\n                return false;\n              }\n              // TODO: check the modifier a bit more.\n            }\n            return true;\n          };\n\n          // Expose public methods.\n          if (typeof module === \"object\") {\n            module.exports = SDPUtils;\n          }\n        },\n        {},\n      ],\n    },\n    {},\n    [1]\n  )(1);\n});\n"]}